var kg=Object.defineProperty;var Ng=(t,e,n)=>e in t?kg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ze=(t,e,n)=>Ng(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Cg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gd={exports:{}},la={},Qd={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=Symbol.for("react.element"),Tg=Symbol.for("react.portal"),bg=Symbol.for("react.fragment"),Eg=Symbol.for("react.strict_mode"),Ag=Symbol.for("react.profiler"),Mg=Symbol.for("react.provider"),Ig=Symbol.for("react.context"),jg=Symbol.for("react.forward_ref"),Og=Symbol.for("react.suspense"),Dg=Symbol.for("react.memo"),Rg=Symbol.for("react.lazy"),dh=Symbol.iterator;function Pg(t){return t===null||typeof t!="object"?null:(t=dh&&t[dh]||t["@@iterator"],typeof t=="function"?t:null)}var Yd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xd=Object.assign,Zd={};function gr(t,e,n){this.props=t,this.context=e,this.refs=Zd,this.updater=n||Yd}gr.prototype.isReactComponent={};gr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Kd(){}Kd.prototype=gr.prototype;function bc(t,e,n){this.props=t,this.context=e,this.refs=Zd,this.updater=n||Yd}var Ec=bc.prototype=new Kd;Ec.constructor=bc;Xd(Ec,gr.prototype);Ec.isPureReactComponent=!0;var fh=Array.isArray,Jd=Object.prototype.hasOwnProperty,Ac={current:null},ef={key:!0,ref:!0,__self:!0,__source:!0};function tf(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Jd.call(e,s)&&!ef.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:xi,type:t,key:i,ref:o,props:r,_owner:Ac.current}}function Fg(t,e){return{$$typeof:xi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mc(t){return typeof t=="object"&&t!==null&&t.$$typeof===xi}function Lg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ph=/\/+/g;function Ba(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lg(""+t.key):e.toString(36)}function ao(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case xi:case Tg:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+Ba(o,0):s,fh(r)?(n="",t!=null&&(n=t.replace(ph,"$&/")+"/"),ao(r,e,n,"",function(c){return c})):r!=null&&(Mc(r)&&(r=Fg(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(ph,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",fh(t))for(var a=0;a<t.length;a++){i=t[a];var l=s+Ba(i,a);o+=ao(i,e,n,l,r)}else if(l=Pg(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=s+Ba(i,a++),o+=ao(i,e,n,l,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zi(t,e,n){if(t==null)return t;var s=[],r=0;return ao(t,s,"","",function(i){return e.call(n,i,r++)}),s}function Vg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tt={current:null},lo={transition:null},zg={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:lo,ReactCurrentOwner:Ac};function nf(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:zi,forEach:function(t,e,n){zi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zi(t,function(){e++}),e},toArray:function(t){return zi(t,function(e){return e})||[]},only:function(t){if(!Mc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=gr;K.Fragment=bg;K.Profiler=Ag;K.PureComponent=bc;K.StrictMode=Eg;K.Suspense=Og;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zg;K.act=nf;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Xd({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ac.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Jd.call(e,l)&&!ef.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:xi,type:t.type,key:r,ref:i,props:s,_owner:o}};K.createContext=function(t){return t={$$typeof:Ig,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Mg,_context:t},t.Consumer=t};K.createElement=tf;K.createFactory=function(t){var e=tf.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:jg,render:t}};K.isValidElement=Mc;K.lazy=function(t){return{$$typeof:Rg,_payload:{_status:-1,_result:t},_init:Vg}};K.memo=function(t,e){return{$$typeof:Dg,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=lo.transition;lo.transition={};try{t()}finally{lo.transition=e}};K.unstable_act=nf;K.useCallback=function(t,e){return tt.current.useCallback(t,e)};K.useContext=function(t){return tt.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return tt.current.useDeferredValue(t)};K.useEffect=function(t,e){return tt.current.useEffect(t,e)};K.useId=function(){return tt.current.useId()};K.useImperativeHandle=function(t,e,n){return tt.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return tt.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return tt.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return tt.current.useMemo(t,e)};K.useReducer=function(t,e,n){return tt.current.useReducer(t,e,n)};K.useRef=function(t){return tt.current.useRef(t)};K.useState=function(t){return tt.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return tt.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return tt.current.useTransition()};K.version="18.3.1";Qd.exports=K;var U=Qd.exports;const Zr=Cg(U);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=U,qg=Symbol.for("react.element"),Bg=Symbol.for("react.fragment"),Ug=Object.prototype.hasOwnProperty,$g=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hg={key:!0,ref:!0,__self:!0,__source:!0};function sf(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Ug.call(e,s)&&!Hg.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:qg,type:t,key:i,ref:o,props:r,_owner:$g.current}}la.Fragment=Bg;la.jsx=sf;la.jsxs=sf;Gd.exports=la;var h=Gd.exports,_l={},rf={exports:{}},vt={},of={exports:{}},af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,O){var R=I.length;I.push(O);e:for(;0<R;){var j=R-1>>>1,V=I[j];if(0<r(V,O))I[j]=O,I[R]=V,R=j;else break e}}function n(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var O=I[0],R=I.pop();if(R!==O){I[0]=R;e:for(var j=0,V=I.length,Q=V>>>1;j<Q;){var te=2*(j+1)-1,$=I[te],J=te+1,Se=I[J];if(0>r($,R))J<V&&0>r(Se,$)?(I[j]=Se,I[J]=R,j=J):(I[j]=$,I[te]=R,j=te);else if(J<V&&0>r(Se,R))I[j]=Se,I[J]=R,j=J;else break e}}return O}function r(I,O){var R=I.sortIndex-O.sortIndex;return R!==0?R:I.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,y=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var O=n(c);O!==null;){if(O.callback===null)s(c);else if(O.startTime<=I)s(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function C(I){if(v=!1,_(I),!m)if(n(l)!==null)m=!0,L(x);else{var O=n(c);O!==null&&z(C,O.startTime-I)}}function x(I,O){m=!1,v&&(v=!1,p(N),N=-1),y=!0;var R=f;try{for(_(O),d=n(l);d!==null&&(!(d.expirationTime>O)||I&&!M());){var j=d.callback;if(typeof j=="function"){d.callback=null,f=d.priorityLevel;var V=j(d.expirationTime<=O);O=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&s(l),_(O)}else s(l);d=n(l)}if(d!==null)var Q=!0;else{var te=n(c);te!==null&&z(C,te.startTime-O),Q=!1}return Q}finally{d=null,f=R,y=!1}}var S=!1,k=null,N=-1,A=5,T=-1;function M(){return!(t.unstable_now()-T<A)}function E(){if(k!==null){var I=t.unstable_now();T=I;var O=!0;try{O=k(!0,I)}finally{O?F():(S=!1,k=null)}}else S=!1}var F;if(typeof g=="function")F=function(){g(E)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,P=b.port2;b.port1.onmessage=E,F=function(){P.postMessage(null)}}else F=function(){w(E,0)};function L(I){k=I,S||(S=!0,F())}function z(I,O){N=w(function(){I(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){m||y||(m=!0,L(x))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var R=f;f=O;try{return I()}finally{f=R}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,O){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var R=f;f=I;try{return O()}finally{f=R}},t.unstable_scheduleCallback=function(I,O,R){var j=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?j+R:j):R=j,I){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=R+V,I={id:u++,callback:O,priorityLevel:I,startTime:R,expirationTime:V,sortIndex:-1},R>j?(I.sortIndex=R,e(c,I),n(l)===null&&I===n(c)&&(v?(p(N),N=-1):v=!0,z(C,R-j))):(I.sortIndex=V,e(l,I),m||y||(m=!0,L(x))),I},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(I){var O=f;return function(){var R=f;f=O;try{return I.apply(this,arguments)}finally{f=R}}}})(af);of.exports=af;var Gg=of.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg=U,yt=Gg;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lf=new Set,Kr={};function Ns(t,e){ir(t,e),ir(t+"Capture",e)}function ir(t,e){for(Kr[t]=e,t=0;t<e.length;t++)lf.add(e[t])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xl=Object.prototype.hasOwnProperty,Yg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mh={},gh={};function Xg(t){return xl.call(gh,t)?!0:xl.call(mh,t)?!1:Yg.test(t)?gh[t]=!0:(mh[t]=!0,!1)}function Zg(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kg(t,e,n,s){if(e===null||typeof e>"u"||Zg(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nt(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Be[t]=new nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Be[e]=new nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Be[t]=new nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Be[t]=new nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Be[t]=new nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Be[t]=new nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Be[t]=new nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Be[t]=new nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Be[t]=new nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ic=/[\-:]([a-z])/g;function jc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ic,jc);Be[e]=new nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ic,jc);Be[e]=new nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ic,jc);Be[e]=new nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Be[t]=new nt(t,1,!1,t.toLowerCase(),null,!1,!1)});Be.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Be[t]=new nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Oc(t,e,n,s){var r=Be.hasOwnProperty(e)?Be[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kg(e,n,r,s)&&(n=null),s||r===null?Xg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var gn=Qg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wi=Symbol.for("react.element"),Rs=Symbol.for("react.portal"),Ps=Symbol.for("react.fragment"),Dc=Symbol.for("react.strict_mode"),wl=Symbol.for("react.profiler"),cf=Symbol.for("react.provider"),uf=Symbol.for("react.context"),Rc=Symbol.for("react.forward_ref"),Sl=Symbol.for("react.suspense"),kl=Symbol.for("react.suspense_list"),Pc=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),hf=Symbol.for("react.offscreen"),yh=Symbol.iterator;function Tr(t){return t===null||typeof t!="object"?null:(t=yh&&t[yh]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,Ua;function Rr(t){if(Ua===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ua=e&&e[1]||""}return`
`+Ua+t}var $a=!1;function Ha(t,e){if(!t||$a)return"";$a=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{$a=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rr(t):""}function Jg(t){switch(t.tag){case 5:return Rr(t.type);case 16:return Rr("Lazy");case 13:return Rr("Suspense");case 19:return Rr("SuspenseList");case 0:case 2:case 15:return t=Ha(t.type,!1),t;case 11:return t=Ha(t.type.render,!1),t;case 1:return t=Ha(t.type,!0),t;default:return""}}function Nl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ps:return"Fragment";case Rs:return"Portal";case wl:return"Profiler";case Dc:return"StrictMode";case Sl:return"Suspense";case kl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uf:return(t.displayName||"Context")+".Consumer";case cf:return(t._context.displayName||"Context")+".Provider";case Rc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pc:return e=t.displayName||null,e!==null?e:Nl(t.type)||"Memo";case Nn:e=t._payload,t=t._init;try{return Nl(t(e))}catch{}}return null}function e0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nl(e);case 8:return e===Dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function df(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t0(t){var e=df(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function qi(t){t._valueTracker||(t._valueTracker=t0(t))}function ff(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=df(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cl(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vh(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pf(t,e){e=e.checked,e!=null&&Oc(t,"checked",e,!1)}function Tl(t,e){pf(t,e);var n=qn(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bl(t,e.type,n):e.hasOwnProperty("defaultValue")&&bl(t,e.type,qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _h(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bl(t,e,n){(e!=="number"||ko(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pr=Array.isArray;function Zs(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+qn(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function El(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(Pr(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qn(n)}}function mf(t,e){var n=qn(e.value),s=qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function wh(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Al(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bi,yf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n0=["Webkit","ms","Moz","O"];Object.keys(Vr).forEach(function(t){n0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vr[e]=Vr[t]})});function vf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vr.hasOwnProperty(t)&&Vr[t]?(""+e).trim():e+"px"}function _f(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=vf(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var s0=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ml(t,e){if(e){if(s0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Il(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=null;function Fc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ol=null,Ks=null,Js=null;function Sh(t){if(t=ki(t)){if(typeof Ol!="function")throw Error(D(280));var e=t.stateNode;e&&(e=fa(e),Ol(t.stateNode,t.type,e))}}function xf(t){Ks?Js?Js.push(t):Js=[t]:Ks=t}function wf(){if(Ks){var t=Ks,e=Js;if(Js=Ks=null,Sh(t),e)for(t=0;t<e.length;t++)Sh(e[t])}}function Sf(t,e){return t(e)}function kf(){}var Ga=!1;function Nf(t,e,n){if(Ga)return t(e,n);Ga=!0;try{return Sf(t,e,n)}finally{Ga=!1,(Ks!==null||Js!==null)&&(kf(),wf())}}function ei(t,e){var n=t.stateNode;if(n===null)return null;var s=fa(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Dl=!1;if(hn)try{var br={};Object.defineProperty(br,"passive",{get:function(){Dl=!0}}),window.addEventListener("test",br,br),window.removeEventListener("test",br,br)}catch{Dl=!1}function r0(t,e,n,s,r,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var zr=!1,No=null,Co=!1,Rl=null,i0={onError:function(t){zr=!0,No=t}};function o0(t,e,n,s,r,i,o,a,l){zr=!1,No=null,r0.apply(i0,arguments)}function a0(t,e,n,s,r,i,o,a,l){if(o0.apply(this,arguments),zr){if(zr){var c=No;zr=!1,No=null}else throw Error(D(198));Co||(Co=!0,Rl=c)}}function Cs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Cf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kh(t){if(Cs(t)!==t)throw Error(D(188))}function l0(t){var e=t.alternate;if(!e){if(e=Cs(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return kh(r),t;if(i===s)return kh(r),e;i=i.sibling}throw Error(D(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==s)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Tf(t){return t=l0(t),t!==null?bf(t):null}function bf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bf(t);if(e!==null)return e;t=t.sibling}return null}var Ef=yt.unstable_scheduleCallback,Nh=yt.unstable_cancelCallback,c0=yt.unstable_shouldYield,u0=yt.unstable_requestPaint,Te=yt.unstable_now,h0=yt.unstable_getCurrentPriorityLevel,Lc=yt.unstable_ImmediatePriority,Af=yt.unstable_UserBlockingPriority,To=yt.unstable_NormalPriority,d0=yt.unstable_LowPriority,Mf=yt.unstable_IdlePriority,ca=null,Yt=null;function f0(t){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(ca,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:g0,p0=Math.log,m0=Math.LN2;function g0(t){return t>>>=0,t===0?32:31-(p0(t)/m0|0)|0}var Ui=64,$i=4194304;function Fr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bo(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?s=Fr(a):(i&=o,i!==0&&(s=Fr(i)))}else o=n&~r,o!==0?s=Fr(o):i!==0&&(s=Fr(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-Ft(e),r=1<<n,s|=t[n],e&=~r;return s}function y0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v0(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ft(i),a=1<<o,l=r[o];l===-1?(!(a&n)||a&s)&&(r[o]=y0(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Pl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function If(){var t=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),t}function Qa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ft(e),t[e]=n}function _0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ft(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Vc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Ft(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var ie=0;function jf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Of,zc,Df,Rf,Pf,Fl=!1,Hi=[],jn=null,On=null,Dn=null,ti=new Map,ni=new Map,bn=[],x0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ch(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":ti.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ni.delete(e.pointerId)}}function Er(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=ki(e),e!==null&&zc(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function w0(t,e,n,s,r){switch(e){case"focusin":return jn=Er(jn,t,e,n,s,r),!0;case"dragenter":return On=Er(On,t,e,n,s,r),!0;case"mouseover":return Dn=Er(Dn,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return ti.set(i,Er(ti.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,ni.set(i,Er(ni.get(i)||null,t,e,n,s,r)),!0}return!1}function Ff(t){var e=ls(t.target);if(e!==null){var n=Cs(e);if(n!==null){if(e=n.tag,e===13){if(e=Cf(n),e!==null){t.blockedOn=e,Pf(t.priority,function(){Df(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function co(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ll(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);jl=s,n.target.dispatchEvent(s),jl=null}else return e=ki(n),e!==null&&zc(e),t.blockedOn=n,!1;e.shift()}return!0}function Th(t,e,n){co(t)&&n.delete(e)}function S0(){Fl=!1,jn!==null&&co(jn)&&(jn=null),On!==null&&co(On)&&(On=null),Dn!==null&&co(Dn)&&(Dn=null),ti.forEach(Th),ni.forEach(Th)}function Ar(t,e){t.blockedOn===e&&(t.blockedOn=null,Fl||(Fl=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,S0)))}function si(t){function e(r){return Ar(r,t)}if(0<Hi.length){Ar(Hi[0],t);for(var n=1;n<Hi.length;n++){var s=Hi[n];s.blockedOn===t&&(s.blockedOn=null)}}for(jn!==null&&Ar(jn,t),On!==null&&Ar(On,t),Dn!==null&&Ar(Dn,t),ti.forEach(e),ni.forEach(e),n=0;n<bn.length;n++)s=bn[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<bn.length&&(n=bn[0],n.blockedOn===null);)Ff(n),n.blockedOn===null&&bn.shift()}var er=gn.ReactCurrentBatchConfig,Eo=!0;function k0(t,e,n,s){var r=ie,i=er.transition;er.transition=null;try{ie=1,Wc(t,e,n,s)}finally{ie=r,er.transition=i}}function N0(t,e,n,s){var r=ie,i=er.transition;er.transition=null;try{ie=4,Wc(t,e,n,s)}finally{ie=r,er.transition=i}}function Wc(t,e,n,s){if(Eo){var r=Ll(t,e,n,s);if(r===null)rl(t,e,s,Ao,n),Ch(t,s);else if(w0(r,t,e,n,s))s.stopPropagation();else if(Ch(t,s),e&4&&-1<x0.indexOf(t)){for(;r!==null;){var i=ki(r);if(i!==null&&Of(i),i=Ll(t,e,n,s),i===null&&rl(t,e,s,Ao,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else rl(t,e,s,null,n)}}var Ao=null;function Ll(t,e,n,s){if(Ao=null,t=Fc(s),t=ls(t),t!==null)if(e=Cs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Cf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ao=t,null}function Lf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h0()){case Lc:return 1;case Af:return 4;case To:case d0:return 16;case Mf:return 536870912;default:return 16}default:return 16}}var Mn=null,qc=null,uo=null;function Vf(){if(uo)return uo;var t,e=qc,n=e.length,s,r="value"in Mn?Mn.value:Mn.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return uo=r.slice(t,1<s?1-s:void 0)}function ho(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gi(){return!0}function bh(){return!1}function _t(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gi:bh,this.isPropagationStopped=bh,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),e}var yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bc=_t(yr),Si=xe({},yr,{view:0,detail:0}),C0=_t(Si),Ya,Xa,Mr,ua=xe({},Si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mr&&(Mr&&t.type==="mousemove"?(Ya=t.screenX-Mr.screenX,Xa=t.screenY-Mr.screenY):Xa=Ya=0,Mr=t),Ya)},movementY:function(t){return"movementY"in t?t.movementY:Xa}}),Eh=_t(ua),T0=xe({},ua,{dataTransfer:0}),b0=_t(T0),E0=xe({},Si,{relatedTarget:0}),Za=_t(E0),A0=xe({},yr,{animationName:0,elapsedTime:0,pseudoElement:0}),M0=_t(A0),I0=xe({},yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j0=_t(I0),O0=xe({},yr,{data:0}),Ah=_t(O0),D0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=P0[t])?!!e[t]:!1}function Uc(){return F0}var L0=xe({},Si,{key:function(t){if(t.key){var e=D0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ho(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?R0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uc,charCode:function(t){return t.type==="keypress"?ho(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ho(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),V0=_t(L0),z0=xe({},ua,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=_t(z0),W0=xe({},Si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uc}),q0=_t(W0),B0=xe({},yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),U0=_t(B0),$0=xe({},ua,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=_t($0),G0=[9,13,27,32],$c=hn&&"CompositionEvent"in window,Wr=null;hn&&"documentMode"in document&&(Wr=document.documentMode);var Q0=hn&&"TextEvent"in window&&!Wr,zf=hn&&(!$c||Wr&&8<Wr&&11>=Wr),Ih=" ",jh=!1;function Wf(t,e){switch(t){case"keyup":return G0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function Y0(t,e){switch(t){case"compositionend":return qf(e);case"keypress":return e.which!==32?null:(jh=!0,Ih);case"textInput":return t=e.data,t===Ih&&jh?null:t;default:return null}}function X0(t,e){if(Fs)return t==="compositionend"||!$c&&Wf(t,e)?(t=Vf(),uo=qc=Mn=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zf&&e.locale!=="ko"?null:e.data;default:return null}}var Z0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Z0[t.type]:e==="textarea"}function Bf(t,e,n,s){xf(s),e=Mo(e,"onChange"),0<e.length&&(n=new Bc("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var qr=null,ri=null;function K0(t){ep(t,0)}function ha(t){var e=zs(t);if(ff(e))return t}function J0(t,e){if(t==="change")return e}var Uf=!1;if(hn){var Ka;if(hn){var Ja="oninput"in document;if(!Ja){var Dh=document.createElement("div");Dh.setAttribute("oninput","return;"),Ja=typeof Dh.oninput=="function"}Ka=Ja}else Ka=!1;Uf=Ka&&(!document.documentMode||9<document.documentMode)}function Rh(){qr&&(qr.detachEvent("onpropertychange",$f),ri=qr=null)}function $f(t){if(t.propertyName==="value"&&ha(ri)){var e=[];Bf(e,ri,t,Fc(t)),Nf(K0,e)}}function ey(t,e,n){t==="focusin"?(Rh(),qr=e,ri=n,qr.attachEvent("onpropertychange",$f)):t==="focusout"&&Rh()}function ty(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ha(ri)}function ny(t,e){if(t==="click")return ha(e)}function sy(t,e){if(t==="input"||t==="change")return ha(e)}function ry(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zt=typeof Object.is=="function"?Object.is:ry;function ii(t,e){if(zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!xl.call(e,r)||!zt(t[r],e[r]))return!1}return!0}function Ph(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fh(t,e){var n=Ph(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ph(n)}}function Hf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gf(){for(var t=window,e=ko();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ko(t.document)}return e}function Hc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iy(t){var e=Gf(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hf(n.ownerDocument.documentElement,n)){if(s!==null&&Hc(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=Fh(n,i);var o=Fh(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var oy=hn&&"documentMode"in document&&11>=document.documentMode,Ls=null,Vl=null,Br=null,zl=!1;function Lh(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zl||Ls==null||Ls!==ko(s)||(s=Ls,"selectionStart"in s&&Hc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Br&&ii(Br,s)||(Br=s,s=Mo(Vl,"onSelect"),0<s.length&&(e=new Bc("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Ls)))}function Qi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Vs={animationend:Qi("Animation","AnimationEnd"),animationiteration:Qi("Animation","AnimationIteration"),animationstart:Qi("Animation","AnimationStart"),transitionend:Qi("Transition","TransitionEnd")},el={},Qf={};hn&&(Qf=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function da(t){if(el[t])return el[t];if(!Vs[t])return t;var e=Vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qf)return el[t]=e[n];return t}var Yf=da("animationend"),Xf=da("animationiteration"),Zf=da("animationstart"),Kf=da("transitionend"),Jf=new Map,Vh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(t,e){Jf.set(t,e),Ns(e,[t])}for(var tl=0;tl<Vh.length;tl++){var nl=Vh[tl],ay=nl.toLowerCase(),ly=nl[0].toUpperCase()+nl.slice(1);Zn(ay,"on"+ly)}Zn(Yf,"onAnimationEnd");Zn(Xf,"onAnimationIteration");Zn(Zf,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(Kf,"onTransitionEnd");ir("onMouseEnter",["mouseout","mouseover"]);ir("onMouseLeave",["mouseout","mouseover"]);ir("onPointerEnter",["pointerout","pointerover"]);ir("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function zh(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,a0(s,e,void 0,t),t.currentTarget=null}function ep(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;zh(r,a,c),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;zh(r,a,c),i=l}}}if(Co)throw t=Rl,Co=!1,Rl=null,t}function de(t,e){var n=e[$l];n===void 0&&(n=e[$l]=new Set);var s=t+"__bubble";n.has(s)||(tp(e,t,2,!1),n.add(s))}function sl(t,e,n){var s=0;e&&(s|=4),tp(n,t,s,e)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function oi(t){if(!t[Yi]){t[Yi]=!0,lf.forEach(function(n){n!=="selectionchange"&&(cy.has(n)||sl(n,!1,t),sl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yi]||(e[Yi]=!0,sl("selectionchange",!1,e))}}function tp(t,e,n,s){switch(Lf(e)){case 1:var r=k0;break;case 4:r=N0;break;default:r=Wc}n=r.bind(null,e,n,t),r=void 0,!Dl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function rl(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ls(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}Nf(function(){var c=i,u=Fc(n),d=[];e:{var f=Jf.get(t);if(f!==void 0){var y=Bc,m=t;switch(t){case"keypress":if(ho(n)===0)break e;case"keydown":case"keyup":y=V0;break;case"focusin":m="focus",y=Za;break;case"focusout":m="blur",y=Za;break;case"beforeblur":case"afterblur":y=Za;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=b0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=q0;break;case Yf:case Xf:case Zf:y=M0;break;case Kf:y=U0;break;case"scroll":y=C0;break;case"wheel":y=H0;break;case"copy":case"cut":case"paste":y=j0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Mh}var v=(e&4)!==0,w=!v&&t==="scroll",p=v?f!==null?f+"Capture":null:f;v=[];for(var g=c,_;g!==null;){_=g;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,p!==null&&(C=ei(g,p),C!=null&&v.push(ai(g,C,_)))),w)break;g=g.return}0<v.length&&(f=new y(f,m,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==jl&&(m=n.relatedTarget||n.fromElement)&&(ls(m)||m[dn]))break e;if((y||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,y?(m=n.relatedTarget||n.toElement,y=c,m=m?ls(m):null,m!==null&&(w=Cs(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(y=null,m=c),y!==m)){if(v=Eh,C="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Mh,C="onPointerLeave",p="onPointerEnter",g="pointer"),w=y==null?f:zs(y),_=m==null?f:zs(m),f=new v(C,g+"leave",y,n,u),f.target=w,f.relatedTarget=_,C=null,ls(u)===c&&(v=new v(p,g+"enter",m,n,u),v.target=_,v.relatedTarget=w,C=v),w=C,y&&m)t:{for(v=y,p=m,g=0,_=v;_;_=js(_))g++;for(_=0,C=p;C;C=js(C))_++;for(;0<g-_;)v=js(v),g--;for(;0<_-g;)p=js(p),_--;for(;g--;){if(v===p||p!==null&&v===p.alternate)break t;v=js(v),p=js(p)}v=null}else v=null;y!==null&&Wh(d,f,y,v,!1),m!==null&&w!==null&&Wh(d,w,m,v,!0)}}e:{if(f=c?zs(c):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var x=J0;else if(Oh(f))if(Uf)x=sy;else{x=ty;var S=ey}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=ny);if(x&&(x=x(t,c))){Bf(d,x,n,u);break e}S&&S(t,f,c),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&bl(f,"number",f.value)}switch(S=c?zs(c):window,t){case"focusin":(Oh(S)||S.contentEditable==="true")&&(Ls=S,Vl=c,Br=null);break;case"focusout":Br=Vl=Ls=null;break;case"mousedown":zl=!0;break;case"contextmenu":case"mouseup":case"dragend":zl=!1,Lh(d,n,u);break;case"selectionchange":if(oy)break;case"keydown":case"keyup":Lh(d,n,u)}var k;if($c)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Fs?Wf(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(zf&&n.locale!=="ko"&&(Fs||N!=="onCompositionStart"?N==="onCompositionEnd"&&Fs&&(k=Vf()):(Mn=u,qc="value"in Mn?Mn.value:Mn.textContent,Fs=!0)),S=Mo(c,N),0<S.length&&(N=new Ah(N,t,null,n,u),d.push({event:N,listeners:S}),k?N.data=k:(k=qf(n),k!==null&&(N.data=k)))),(k=Q0?Y0(t,n):X0(t,n))&&(c=Mo(c,"onBeforeInput"),0<c.length&&(u=new Ah("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}ep(d,e)})}function ai(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mo(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=ei(t,n),i!=null&&s.unshift(ai(t,i,r)),i=ei(t,e),i!=null&&s.push(ai(t,i,r))),t=t.return}return s}function js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wh(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,r?(l=ei(n,i),l!=null&&o.unshift(ai(n,l,a))):r||(l=ei(n,i),l!=null&&o.push(ai(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uy=/\r\n?/g,hy=/\u0000|\uFFFD/g;function qh(t){return(typeof t=="string"?t:""+t).replace(uy,`
`).replace(hy,"")}function Xi(t,e,n){if(e=qh(e),qh(t)!==e&&n)throw Error(D(425))}function Io(){}var Wl=null,ql=null;function Bl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ul=typeof setTimeout=="function"?setTimeout:void 0,dy=typeof clearTimeout=="function"?clearTimeout:void 0,Bh=typeof Promise=="function"?Promise:void 0,fy=typeof queueMicrotask=="function"?queueMicrotask:typeof Bh<"u"?function(t){return Bh.resolve(null).then(t).catch(py)}:Ul;function py(t){setTimeout(function(){throw t})}function il(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),si(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);si(e)}function Rn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vr=Math.random().toString(36).slice(2),Qt="__reactFiber$"+vr,li="__reactProps$"+vr,dn="__reactContainer$"+vr,$l="__reactEvents$"+vr,my="__reactListeners$"+vr,gy="__reactHandles$"+vr;function ls(t){var e=t[Qt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dn]||n[Qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uh(t);t!==null;){if(n=t[Qt])return n;t=Uh(t)}return e}t=n,n=t.parentNode}return null}function ki(t){return t=t[Qt]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function fa(t){return t[li]||null}var Hl=[],Ws=-1;function Kn(t){return{current:t}}function fe(t){0>Ws||(t.current=Hl[Ws],Hl[Ws]=null,Ws--)}function ce(t,e){Ws++,Hl[Ws]=t.current,t.current=e}var Bn={},Qe=Kn(Bn),at=Kn(!1),ys=Bn;function or(t,e){var n=t.type.contextTypes;if(!n)return Bn;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function lt(t){return t=t.childContextTypes,t!=null}function jo(){fe(at),fe(Qe)}function $h(t,e,n){if(Qe.current!==Bn)throw Error(D(168));ce(Qe,e),ce(at,n)}function np(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(D(108,e0(t)||"Unknown",r));return xe({},n,s)}function Oo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bn,ys=Qe.current,ce(Qe,t),ce(at,at.current),!0}function Hh(t,e,n){var s=t.stateNode;if(!s)throw Error(D(169));n?(t=np(t,e,ys),s.__reactInternalMemoizedMergedChildContext=t,fe(at),fe(Qe),ce(Qe,t)):fe(at),ce(at,n)}var rn=null,pa=!1,ol=!1;function sp(t){rn===null?rn=[t]:rn.push(t)}function yy(t){pa=!0,sp(t)}function Jn(){if(!ol&&rn!==null){ol=!0;var t=0,e=ie;try{var n=rn;for(ie=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}rn=null,pa=!1}catch(r){throw rn!==null&&(rn=rn.slice(t+1)),Ef(Lc,Jn),r}finally{ie=e,ol=!1}}return null}var qs=[],Bs=0,Do=null,Ro=0,wt=[],St=0,vs=null,on=1,an="";function rs(t,e){qs[Bs++]=Ro,qs[Bs++]=Do,Do=t,Ro=e}function rp(t,e,n){wt[St++]=on,wt[St++]=an,wt[St++]=vs,vs=t;var s=on;t=an;var r=32-Ft(s)-1;s&=~(1<<r),n+=1;var i=32-Ft(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,on=1<<32-Ft(e)+r|n<<r|s,an=i+t}else on=1<<i|n<<r|s,an=t}function Gc(t){t.return!==null&&(rs(t,1),rp(t,1,0))}function Qc(t){for(;t===Do;)Do=qs[--Bs],qs[Bs]=null,Ro=qs[--Bs],qs[Bs]=null;for(;t===vs;)vs=wt[--St],wt[St]=null,an=wt[--St],wt[St]=null,on=wt[--St],wt[St]=null}var gt=null,mt=null,ge=!1,Dt=null;function ip(t,e){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gt=t,mt=Rn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gt=t,mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vs!==null?{id:on,overflow:an}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,gt=t,mt=null,!0):!1;default:return!1}}function Gl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ql(t){if(ge){var e=mt;if(e){var n=e;if(!Gh(t,e)){if(Gl(t))throw Error(D(418));e=Rn(n.nextSibling);var s=gt;e&&Gh(t,e)?ip(s,n):(t.flags=t.flags&-4097|2,ge=!1,gt=t)}}else{if(Gl(t))throw Error(D(418));t.flags=t.flags&-4097|2,ge=!1,gt=t}}}function Qh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gt=t}function Zi(t){if(t!==gt)return!1;if(!ge)return Qh(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bl(t.type,t.memoizedProps)),e&&(e=mt)){if(Gl(t))throw op(),Error(D(418));for(;e;)ip(t,e),e=Rn(e.nextSibling)}if(Qh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mt=Rn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mt=null}}else mt=gt?Rn(t.stateNode.nextSibling):null;return!0}function op(){for(var t=mt;t;)t=Rn(t.nextSibling)}function ar(){mt=gt=null,ge=!1}function Yc(t){Dt===null?Dt=[t]:Dt.push(t)}var vy=gn.ReactCurrentBatchConfig;function Ir(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var s=n.stateNode}if(!s)throw Error(D(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function Ki(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Yh(t){var e=t._init;return e(t._payload)}function ap(t){function e(p,g){if(t){var _=p.deletions;_===null?(p.deletions=[g],p.flags|=16):_.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function s(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function r(p,g){return p=Vn(p,g),p.index=0,p.sibling=null,p}function i(p,g,_){return p.index=_,t?(_=p.alternate,_!==null?(_=_.index,_<g?(p.flags|=2,g):_):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,g,_,C){return g===null||g.tag!==6?(g=fl(_,p.mode,C),g.return=p,g):(g=r(g,_),g.return=p,g)}function l(p,g,_,C){var x=_.type;return x===Ps?u(p,g,_.props.children,C,_.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Nn&&Yh(x)===g.type)?(C=r(g,_.props),C.ref=Ir(p,g,_),C.return=p,C):(C=_o(_.type,_.key,_.props,null,p.mode,C),C.ref=Ir(p,g,_),C.return=p,C)}function c(p,g,_,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=pl(_,p.mode,C),g.return=p,g):(g=r(g,_.children||[]),g.return=p,g)}function u(p,g,_,C,x){return g===null||g.tag!==7?(g=fs(_,p.mode,C,x),g.return=p,g):(g=r(g,_),g.return=p,g)}function d(p,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=fl(""+g,p.mode,_),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Wi:return _=_o(g.type,g.key,g.props,null,p.mode,_),_.ref=Ir(p,null,g),_.return=p,_;case Rs:return g=pl(g,p.mode,_),g.return=p,g;case Nn:var C=g._init;return d(p,C(g._payload),_)}if(Pr(g)||Tr(g))return g=fs(g,p.mode,_,null),g.return=p,g;Ki(p,g)}return null}function f(p,g,_,C){var x=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:a(p,g,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Wi:return _.key===x?l(p,g,_,C):null;case Rs:return _.key===x?c(p,g,_,C):null;case Nn:return x=_._init,f(p,g,x(_._payload),C)}if(Pr(_)||Tr(_))return x!==null?null:u(p,g,_,C,null);Ki(p,_)}return null}function y(p,g,_,C,x){if(typeof C=="string"&&C!==""||typeof C=="number")return p=p.get(_)||null,a(g,p,""+C,x);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Wi:return p=p.get(C.key===null?_:C.key)||null,l(g,p,C,x);case Rs:return p=p.get(C.key===null?_:C.key)||null,c(g,p,C,x);case Nn:var S=C._init;return y(p,g,_,S(C._payload),x)}if(Pr(C)||Tr(C))return p=p.get(_)||null,u(g,p,C,x,null);Ki(g,C)}return null}function m(p,g,_,C){for(var x=null,S=null,k=g,N=g=0,A=null;k!==null&&N<_.length;N++){k.index>N?(A=k,k=null):A=k.sibling;var T=f(p,k,_[N],C);if(T===null){k===null&&(k=A);break}t&&k&&T.alternate===null&&e(p,k),g=i(T,g,N),S===null?x=T:S.sibling=T,S=T,k=A}if(N===_.length)return n(p,k),ge&&rs(p,N),x;if(k===null){for(;N<_.length;N++)k=d(p,_[N],C),k!==null&&(g=i(k,g,N),S===null?x=k:S.sibling=k,S=k);return ge&&rs(p,N),x}for(k=s(p,k);N<_.length;N++)A=y(k,p,N,_[N],C),A!==null&&(t&&A.alternate!==null&&k.delete(A.key===null?N:A.key),g=i(A,g,N),S===null?x=A:S.sibling=A,S=A);return t&&k.forEach(function(M){return e(p,M)}),ge&&rs(p,N),x}function v(p,g,_,C){var x=Tr(_);if(typeof x!="function")throw Error(D(150));if(_=x.call(_),_==null)throw Error(D(151));for(var S=x=null,k=g,N=g=0,A=null,T=_.next();k!==null&&!T.done;N++,T=_.next()){k.index>N?(A=k,k=null):A=k.sibling;var M=f(p,k,T.value,C);if(M===null){k===null&&(k=A);break}t&&k&&M.alternate===null&&e(p,k),g=i(M,g,N),S===null?x=M:S.sibling=M,S=M,k=A}if(T.done)return n(p,k),ge&&rs(p,N),x;if(k===null){for(;!T.done;N++,T=_.next())T=d(p,T.value,C),T!==null&&(g=i(T,g,N),S===null?x=T:S.sibling=T,S=T);return ge&&rs(p,N),x}for(k=s(p,k);!T.done;N++,T=_.next())T=y(k,p,N,T.value,C),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?N:T.key),g=i(T,g,N),S===null?x=T:S.sibling=T,S=T);return t&&k.forEach(function(E){return e(p,E)}),ge&&rs(p,N),x}function w(p,g,_,C){if(typeof _=="object"&&_!==null&&_.type===Ps&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Wi:e:{for(var x=_.key,S=g;S!==null;){if(S.key===x){if(x=_.type,x===Ps){if(S.tag===7){n(p,S.sibling),g=r(S,_.props.children),g.return=p,p=g;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Nn&&Yh(x)===S.type){n(p,S.sibling),g=r(S,_.props),g.ref=Ir(p,S,_),g.return=p,p=g;break e}n(p,S);break}else e(p,S);S=S.sibling}_.type===Ps?(g=fs(_.props.children,p.mode,C,_.key),g.return=p,p=g):(C=_o(_.type,_.key,_.props,null,p.mode,C),C.ref=Ir(p,g,_),C.return=p,p=C)}return o(p);case Rs:e:{for(S=_.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){n(p,g.sibling),g=r(g,_.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=pl(_,p.mode,C),g.return=p,p=g}return o(p);case Nn:return S=_._init,w(p,g,S(_._payload),C)}if(Pr(_))return m(p,g,_,C);if(Tr(_))return v(p,g,_,C);Ki(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(n(p,g.sibling),g=r(g,_),g.return=p,p=g):(n(p,g),g=fl(_,p.mode,C),g.return=p,p=g),o(p)):n(p,g)}return w}var lr=ap(!0),lp=ap(!1),Po=Kn(null),Fo=null,Us=null,Xc=null;function Zc(){Xc=Us=Fo=null}function Kc(t){var e=Po.current;fe(Po),t._currentValue=e}function Yl(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function tr(t,e){Fo=t,Xc=Us=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function At(t){var e=t._currentValue;if(Xc!==t)if(t={context:t,memoizedValue:e,next:null},Us===null){if(Fo===null)throw Error(D(308));Us=t,Fo.dependencies={lanes:0,firstContext:t}}else Us=Us.next=t;return e}var cs=null;function Jc(t){cs===null?cs=[t]:cs.push(t)}function cp(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Jc(e)):(n.next=r.next,r.next=n),e.interleaved=n,fn(t,s)}function fn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cn=!1;function eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function up(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ne&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,fn(t,n)}return r=s.interleaved,r===null?(e.next=e,Jc(s)):(e.next=r.next,r.next=e),s.interleaved=e,fn(t,n)}function fo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Vc(t,n)}}function Xh(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lo(t,e,n,s){var r=t.updateQueue;Cn=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=r.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,y=a.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(f=e,y=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,f=typeof m=="function"?m.call(y,d,f):m,f==null)break e;d=xe({},d,f);break e;case 2:Cn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=y,l=d):u=u.next=y,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);xs|=o,t.lanes=o,t.memoizedState=d}}function Zh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(D(191,r));r.call(s)}}}var Ni={},Xt=Kn(Ni),ci=Kn(Ni),ui=Kn(Ni);function us(t){if(t===Ni)throw Error(D(174));return t}function tu(t,e){switch(ce(ui,e),ce(ci,t),ce(Xt,Ni),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Al(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Al(e,t)}fe(Xt),ce(Xt,e)}function cr(){fe(Xt),fe(ci),fe(ui)}function hp(t){us(ui.current);var e=us(Xt.current),n=Al(e,t.type);e!==n&&(ce(ci,t),ce(Xt,n))}function nu(t){ci.current===t&&(fe(Xt),fe(ci))}var ve=Kn(0);function Vo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var al=[];function su(){for(var t=0;t<al.length;t++)al[t]._workInProgressVersionPrimary=null;al.length=0}var po=gn.ReactCurrentDispatcher,ll=gn.ReactCurrentBatchConfig,_s=0,_e=null,De=null,Fe=null,zo=!1,Ur=!1,hi=0,_y=0;function $e(){throw Error(D(321))}function ru(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zt(t[n],e[n]))return!1;return!0}function iu(t,e,n,s,r,i){if(_s=i,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,po.current=t===null||t.memoizedState===null?ky:Ny,t=n(s,r),Ur){i=0;do{if(Ur=!1,hi=0,25<=i)throw Error(D(301));i+=1,Fe=De=null,e.updateQueue=null,po.current=Cy,t=n(s,r)}while(Ur)}if(po.current=Wo,e=De!==null&&De.next!==null,_s=0,Fe=De=_e=null,zo=!1,e)throw Error(D(300));return t}function ou(){var t=hi!==0;return hi=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?_e.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Mt(){if(De===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=De.next;var e=Fe===null?_e.memoizedState:Fe.next;if(e!==null)Fe=e,De=t;else{if(t===null)throw Error(D(310));De=t,t={memoizedState:De.memoizedState,baseState:De.baseState,baseQueue:De.baseQueue,queue:De.queue,next:null},Fe===null?_e.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function di(t,e){return typeof e=="function"?e(t):e}function cl(t){var e=Mt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var s=De,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((_s&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=s):l=l.next=d,_e.lanes|=u,xs|=u}c=c.next}while(c!==null&&c!==i);l===null?o=s:l.next=a,zt(s,e.memoizedState)||(ot=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,_e.lanes|=i,xs|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ul(t){var e=Mt(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);zt(i,e.memoizedState)||(ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function dp(){}function fp(t,e){var n=_e,s=Mt(),r=e(),i=!zt(s.memoizedState,r);if(i&&(s.memoizedState=r,ot=!0),s=s.queue,au(gp.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,fi(9,mp.bind(null,n,s,r,e),void 0,null),Le===null)throw Error(D(349));_s&30||pp(n,e,r)}return r}function pp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mp(t,e,n,s){e.value=n,e.getSnapshot=s,yp(e)&&vp(t)}function gp(t,e,n){return n(function(){yp(e)&&vp(t)})}function yp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zt(t,n)}catch{return!0}}function vp(t){var e=fn(t,1);e!==null&&Lt(e,t,1,-1)}function Kh(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:t},e.queue=t,t=t.dispatch=Sy.bind(null,_e,t),[e.memoizedState,t]}function fi(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function _p(){return Mt().memoizedState}function mo(t,e,n,s){var r=Gt();_e.flags|=t,r.memoizedState=fi(1|e,n,void 0,s===void 0?null:s)}function ma(t,e,n,s){var r=Mt();s=s===void 0?null:s;var i=void 0;if(De!==null){var o=De.memoizedState;if(i=o.destroy,s!==null&&ru(s,o.deps)){r.memoizedState=fi(e,n,i,s);return}}_e.flags|=t,r.memoizedState=fi(1|e,n,i,s)}function Jh(t,e){return mo(8390656,8,t,e)}function au(t,e){return ma(2048,8,t,e)}function xp(t,e){return ma(4,2,t,e)}function wp(t,e){return ma(4,4,t,e)}function Sp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kp(t,e,n){return n=n!=null?n.concat([t]):null,ma(4,4,Sp.bind(null,e,t),n)}function lu(){}function Np(t,e){var n=Mt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ru(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function Cp(t,e){var n=Mt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&ru(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Tp(t,e,n){return _s&21?(zt(n,e)||(n=If(),_e.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=n)}function xy(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var s=ll.transition;ll.transition={};try{t(!1),e()}finally{ie=n,ll.transition=s}}function bp(){return Mt().memoizedState}function wy(t,e,n){var s=Ln(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ep(t))Ap(e,n);else if(n=cp(t,e,n,s),n!==null){var r=et();Lt(n,t,s,r),Mp(n,e,s)}}function Sy(t,e,n){var s=Ln(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ep(t))Ap(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(r.hasEagerState=!0,r.eagerState=a,zt(a,o)){var l=e.interleaved;l===null?(r.next=r,Jc(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=cp(t,e,r,s),n!==null&&(r=et(),Lt(n,t,s,r),Mp(n,e,s))}}function Ep(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function Ap(t,e){Ur=zo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Mp(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Vc(t,n)}}var Wo={readContext:At,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},ky={readContext:At,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:At,useEffect:Jh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,mo(4194308,4,Sp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return mo(4194308,4,t,e)},useInsertionEffect:function(t,e){return mo(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Gt();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=wy.bind(null,_e,t),[s.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:Kh,useDebugValue:lu,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=Kh(!1),e=t[0];return t=xy.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=_e,r=Gt();if(ge){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),Le===null)throw Error(D(349));_s&30||pp(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Jh(gp.bind(null,s,i,t),[t]),s.flags|=2048,fi(9,mp.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Le.identifierPrefix;if(ge){var n=an,s=on;n=(s&~(1<<32-Ft(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=hi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_y++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ny={readContext:At,useCallback:Np,useContext:At,useEffect:au,useImperativeHandle:kp,useInsertionEffect:xp,useLayoutEffect:wp,useMemo:Cp,useReducer:cl,useRef:_p,useState:function(){return cl(di)},useDebugValue:lu,useDeferredValue:function(t){var e=Mt();return Tp(e,De.memoizedState,t)},useTransition:function(){var t=cl(di)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:dp,useSyncExternalStore:fp,useId:bp,unstable_isNewReconciler:!1},Cy={readContext:At,useCallback:Np,useContext:At,useEffect:au,useImperativeHandle:kp,useInsertionEffect:xp,useLayoutEffect:wp,useMemo:Cp,useReducer:ul,useRef:_p,useState:function(){return ul(di)},useDebugValue:lu,useDeferredValue:function(t){var e=Mt();return De===null?e.memoizedState=t:Tp(e,De.memoizedState,t)},useTransition:function(){var t=ul(di)[0],e=Mt().memoizedState;return[t,e]},useMutableSource:dp,useSyncExternalStore:fp,useId:bp,unstable_isNewReconciler:!1};function jt(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xl(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ga={isMounted:function(t){return(t=t._reactInternals)?Cs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=et(),r=Ln(t),i=cn(s,r);i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,r),e!==null&&(Lt(e,t,r,s),fo(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=et(),r=Ln(t),i=cn(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Pn(t,i,r),e!==null&&(Lt(e,t,r,s),fo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=et(),s=Ln(t),r=cn(n,s);r.tag=2,e!=null&&(r.callback=e),e=Pn(t,r,s),e!==null&&(Lt(e,t,s,n),fo(e,t,s))}};function ed(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!ii(n,s)||!ii(r,i):!0}function Ip(t,e,n){var s=!1,r=Bn,i=e.contextType;return typeof i=="object"&&i!==null?i=At(i):(r=lt(e)?ys:Qe.current,s=e.contextTypes,i=(s=s!=null)?or(t,r):Bn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ga,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function td(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&ga.enqueueReplaceState(e,e.state,null)}function Zl(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},eu(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=At(i):(i=lt(e)?ys:Qe.current,r.context=or(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xl(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ga.enqueueReplaceState(r,r.state,null),Lo(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ur(t,e){try{var n="",s=e;do n+=Jg(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function hl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ty=typeof WeakMap=="function"?WeakMap:Map;function jp(t,e,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Bo||(Bo=!0,lc=s),Kl(t,e)},n}function Op(t,e,n){n=cn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){Kl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Kl(t,e),typeof s!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nd(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Ty;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=zy.bind(null,t,e,n),e.then(t,t))}function sd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rd(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cn(-1,1),e.tag=2,Pn(n,e,1))),n.lanes|=1),t)}var by=gn.ReactCurrentOwner,ot=!1;function Ze(t,e,n,s){e.child=t===null?lp(e,null,n,s):lr(e,t.child,n,s)}function id(t,e,n,s,r){n=n.render;var i=e.ref;return tr(e,r),s=iu(t,e,n,s,i,r),n=ou(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pn(t,e,r)):(ge&&n&&Gc(e),e.flags|=1,Ze(t,e,s,r),e.child)}function od(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!gu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Dp(t,e,i,s,r)):(t=_o(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ii,n(o,s)&&t.ref===e.ref)return pn(t,e,r)}return e.flags|=1,t=Vn(i,s),t.ref=e.ref,t.return=e,e.child=t}function Dp(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(ii(i,s)&&t.ref===e.ref)if(ot=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,pn(t,e,r)}return Jl(t,e,n,s,r)}function Rp(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ce(Hs,ft),ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ce(Hs,ft),ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,ce(Hs,ft),ft|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,ce(Hs,ft),ft|=s;return Ze(t,e,r,n),e.child}function Pp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jl(t,e,n,s,r){var i=lt(n)?ys:Qe.current;return i=or(e,i),tr(e,r),n=iu(t,e,n,s,i,r),s=ou(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,pn(t,e,r)):(ge&&s&&Gc(e),e.flags|=1,Ze(t,e,n,r),e.child)}function ad(t,e,n,s,r){if(lt(n)){var i=!0;Oo(e)}else i=!1;if(tr(e,r),e.stateNode===null)go(t,e),Ip(e,n,s),Zl(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=At(c):(c=lt(n)?ys:Qe.current,c=or(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&td(e,o,s,c),Cn=!1;var f=e.memoizedState;o.state=f,Lo(e,s,o,r),l=e.memoizedState,a!==s||f!==l||at.current||Cn?(typeof u=="function"&&(Xl(e,n,u,s),l=e.memoizedState),(a=Cn||ed(e,n,a,s,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,up(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jt(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=At(l):(l=lt(n)?ys:Qe.current,l=or(e,l));var y=n.getDerivedStateFromProps;(u=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&td(e,o,s,l),Cn=!1,f=e.memoizedState,o.state=f,Lo(e,s,o,r);var m=e.memoizedState;a!==d||f!==m||at.current||Cn?(typeof y=="function"&&(Xl(e,n,y,s),m=e.memoizedState),(c=Cn||ed(e,n,c,s,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),o.props=s,o.state=m,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return ec(t,e,n,s,i,r)}function ec(t,e,n,s,r,i){Pp(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Hh(e,n,!1),pn(t,e,i);s=e.stateNode,by.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=lr(e,t.child,null,i),e.child=lr(e,null,a,i)):Ze(t,e,a,i),e.memoizedState=s.state,r&&Hh(e,n,!0),e.child}function Fp(t){var e=t.stateNode;e.pendingContext?$h(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$h(t,e.context,!1),tu(t,e.containerInfo)}function ld(t,e,n,s,r){return ar(),Yc(r),e.flags|=256,Ze(t,e,n,s),e.child}var tc={dehydrated:null,treeContext:null,retryLane:0};function nc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lp(t,e,n){var s=e.pendingProps,r=ve.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ce(ve,r&1),t===null)return Ql(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_a(o,s,0,null),t=fs(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nc(n),e.memoizedState=tc,t):cu(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Ey(t,e,o,s,a,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Vn(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Vn(a,i):(i=fs(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?nc(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=tc,s}return i=t.child,t=i.sibling,s=Vn(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function cu(t,e){return e=_a({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ji(t,e,n,s){return s!==null&&Yc(s),lr(e,t.child,null,n),t=cu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ey(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=hl(Error(D(422))),Ji(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=_a({mode:"visible",children:s.children},r,0,null),i=fs(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&lr(e,t.child,null,o),e.child.memoizedState=nc(o),e.memoizedState=tc,i);if(!(e.mode&1))return Ji(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(D(419)),s=hl(i,s,void 0),Ji(t,e,o,s)}if(a=(o&t.childLanes)!==0,ot||a){if(s=Le,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,fn(t,r),Lt(s,t,r,-1))}return mu(),s=hl(Error(D(421))),Ji(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Wy.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,mt=Rn(r.nextSibling),gt=e,ge=!0,Dt=null,t!==null&&(wt[St++]=on,wt[St++]=an,wt[St++]=vs,on=t.id,an=t.overflow,vs=e),e=cu(e,s.children),e.flags|=4096,e)}function cd(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Yl(t.return,e,n)}function dl(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Vp(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Ze(t,e,s.children,n),s=ve.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cd(t,n,e);else if(t.tag===19)cd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(ce(ve,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Vo(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),dl(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Vo(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}dl(e,!0,n,null,i);break;case"together":dl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function go(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=Vn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ay(t,e,n){switch(e.tag){case 3:Fp(e),ar();break;case 5:hp(e);break;case 1:lt(e.type)&&Oo(e);break;case 4:tu(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;ce(Po,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(ce(ve,ve.current&1),e.flags|=128,null):n&e.child.childLanes?Lp(t,e,n):(ce(ve,ve.current&1),t=pn(t,e,n),t!==null?t.sibling:null);ce(ve,ve.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Vp(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ce(ve,ve.current),s)break;return null;case 22:case 23:return e.lanes=0,Rp(t,e,n)}return pn(t,e,n)}var zp,sc,Wp,qp;zp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sc=function(){};Wp=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,us(Xt.current);var i=null;switch(n){case"input":r=Cl(t,r),s=Cl(t,s),i=[];break;case"select":r=xe({},r,{value:void 0}),s=xe({},s,{value:void 0}),i=[];break;case"textarea":r=El(t,r),s=El(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Io)}Ml(n,s);var o;n=null;for(c in r)if(!s.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Kr.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in s){var l=s[c];if(a=r!=null?r[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Kr.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&de("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};qp=function(t,e,n,s){n!==s&&(e.flags|=4)};function jr(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function My(t,e,n){var s=e.pendingProps;switch(Qc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return lt(e.type)&&jo(),He(e),null;case 3:return s=e.stateNode,cr(),fe(at),fe(Qe),su(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Zi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dt!==null&&(hc(Dt),Dt=null))),sc(t,e),He(e),null;case 5:nu(e);var r=us(ui.current);if(n=e.type,t!==null&&e.stateNode!=null)Wp(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(D(166));return He(e),null}if(t=us(Xt.current),Zi(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[Qt]=e,s[li]=i,t=(e.mode&1)!==0,n){case"dialog":de("cancel",s),de("close",s);break;case"iframe":case"object":case"embed":de("load",s);break;case"video":case"audio":for(r=0;r<Lr.length;r++)de(Lr[r],s);break;case"source":de("error",s);break;case"img":case"image":case"link":de("error",s),de("load",s);break;case"details":de("toggle",s);break;case"input":vh(s,i),de("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},de("invalid",s);break;case"textarea":xh(s,i),de("invalid",s)}Ml(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Xi(s.textContent,a,t),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Xi(s.textContent,a,t),r=["children",""+a]):Kr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&de("scroll",s)}switch(n){case"input":qi(s),_h(s,i,!0);break;case"textarea":qi(s),wh(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Io)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Qt]=e,t[li]=s,zp(t,e,!1,!1),e.stateNode=t;e:{switch(o=Il(n,s),n){case"dialog":de("cancel",t),de("close",t),r=s;break;case"iframe":case"object":case"embed":de("load",t),r=s;break;case"video":case"audio":for(r=0;r<Lr.length;r++)de(Lr[r],t);r=s;break;case"source":de("error",t),r=s;break;case"img":case"image":case"link":de("error",t),de("load",t),r=s;break;case"details":de("toggle",t),r=s;break;case"input":vh(t,s),r=Cl(t,s),de("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=xe({},s,{value:void 0}),de("invalid",t);break;case"textarea":xh(t,s),r=El(t,s),de("invalid",t);break;default:r=s}Ml(n,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?_f(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&yf(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Jr(t,l):typeof l=="number"&&Jr(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Kr.hasOwnProperty(i)?l!=null&&i==="onScroll"&&de("scroll",t):l!=null&&Oc(t,i,l,o))}switch(n){case"input":qi(t),_h(t,s,!1);break;case"textarea":qi(t),wh(t);break;case"option":s.value!=null&&t.setAttribute("value",""+qn(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?Zs(t,!!s.multiple,i,!1):s.defaultValue!=null&&Zs(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Io)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)qp(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(D(166));if(n=us(ui.current),us(Xt.current),Zi(e)){if(s=e.stateNode,n=e.memoizedProps,s[Qt]=e,(i=s.nodeValue!==n)&&(t=gt,t!==null))switch(t.tag){case 3:Xi(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xi(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Qt]=e,e.stateNode=s}return He(e),null;case 13:if(fe(ve),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&mt!==null&&e.mode&1&&!(e.flags&128))op(),ar(),e.flags|=98560,i=!1;else if(i=Zi(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(D(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Qt]=e}else ar(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),i=!1}else Dt!==null&&(hc(Dt),Dt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ve.current&1?Re===0&&(Re=3):mu())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return cr(),sc(t,e),t===null&&oi(e.stateNode.containerInfo),He(e),null;case 10:return Kc(e.type._context),He(e),null;case 17:return lt(e.type)&&jo(),He(e),null;case 19:if(fe(ve),i=e.memoizedState,i===null)return He(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)jr(i,!1);else{if(Re!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vo(t),o!==null){for(e.flags|=128,jr(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ce(ve,ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Te()>hr&&(e.flags|=128,s=!0,jr(i,!1),e.lanes=4194304)}else{if(!s)if(t=Vo(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ge)return He(e),null}else 2*Te()-i.renderingStartTime>hr&&n!==1073741824&&(e.flags|=128,s=!0,jr(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Te(),e.sibling=null,n=ve.current,ce(ve,s?n&1|2:n&1),e):(He(e),null);case 22:case 23:return pu(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ft&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function Iy(t,e){switch(Qc(e),e.tag){case 1:return lt(e.type)&&jo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cr(),fe(at),fe(Qe),su(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nu(e),null;case 13:if(fe(ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));ar()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return fe(ve),null;case 4:return cr(),null;case 10:return Kc(e.type._context),null;case 22:case 23:return pu(),null;case 24:return null;default:return null}}var eo=!1,Ge=!1,jy=typeof WeakSet=="function"?WeakSet:Set,q=null;function $s(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ne(t,e,s)}else n.current=null}function rc(t,e,n){try{n()}catch(s){Ne(t,e,s)}}var ud=!1;function Oy(t,e){if(Wl=Eo,t=Gf(),Hc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var y;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==i||s!==0&&d.nodeType!==3||(l=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===i&&++u===s&&(l=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ql={focusedElem:t,selectionRange:n},Eo=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?v:jt(e.type,v),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(C){Ne(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return m=ud,ud=!1,m}function $r(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&rc(e,n,i)}r=r.next}while(r!==s)}}function ya(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function ic(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bp(t){var e=t.alternate;e!==null&&(t.alternate=null,Bp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qt],delete e[li],delete e[$l],delete e[my],delete e[gy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Up(t){return t.tag===5||t.tag===3||t.tag===4}function hd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Up(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oc(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Io));else if(s!==4&&(t=t.child,t!==null))for(oc(t,e,n),t=t.sibling;t!==null;)oc(t,e,n),t=t.sibling}function ac(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(ac(t,e,n),t=t.sibling;t!==null;)ac(t,e,n),t=t.sibling}var We=null,Ot=!1;function wn(t,e,n){for(n=n.child;n!==null;)$p(t,e,n),n=n.sibling}function $p(t,e,n){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(ca,n)}catch{}switch(n.tag){case 5:Ge||$s(n,e);case 6:var s=We,r=Ot;We=null,wn(t,e,n),We=s,Ot=r,We!==null&&(Ot?(t=We,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):We.removeChild(n.stateNode));break;case 18:We!==null&&(Ot?(t=We,n=n.stateNode,t.nodeType===8?il(t.parentNode,n):t.nodeType===1&&il(t,n),si(t)):il(We,n.stateNode));break;case 4:s=We,r=Ot,We=n.stateNode.containerInfo,Ot=!0,wn(t,e,n),We=s,Ot=r;break;case 0:case 11:case 14:case 15:if(!Ge&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&rc(n,e,o),r=r.next}while(r!==s)}wn(t,e,n);break;case 1:if(!Ge&&($s(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){Ne(n,e,a)}wn(t,e,n);break;case 21:wn(t,e,n);break;case 22:n.mode&1?(Ge=(s=Ge)||n.memoizedState!==null,wn(t,e,n),Ge=s):wn(t,e,n);break;default:wn(t,e,n)}}function dd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jy),e.forEach(function(s){var r=qy.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function It(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:We=a.stateNode,Ot=!1;break e;case 3:We=a.stateNode.containerInfo,Ot=!0;break e;case 4:We=a.stateNode.containerInfo,Ot=!0;break e}a=a.return}if(We===null)throw Error(D(160));$p(i,o,r),We=null,Ot=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ne(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hp(e,t),e=e.sibling}function Hp(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(It(e,t),Ht(t),s&4){try{$r(3,t,t.return),ya(3,t)}catch(v){Ne(t,t.return,v)}try{$r(5,t,t.return)}catch(v){Ne(t,t.return,v)}}break;case 1:It(e,t),Ht(t),s&512&&n!==null&&$s(n,n.return);break;case 5:if(It(e,t),Ht(t),s&512&&n!==null&&$s(n,n.return),t.flags&32){var r=t.stateNode;try{Jr(r,"")}catch(v){Ne(t,t.return,v)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&pf(r,i),Il(a,o);var c=Il(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?_f(r,d):u==="dangerouslySetInnerHTML"?yf(r,d):u==="children"?Jr(r,d):Oc(r,u,d,c)}switch(a){case"input":Tl(r,i);break;case"textarea":mf(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Zs(r,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?Zs(r,!!i.multiple,i.defaultValue,!0):Zs(r,!!i.multiple,i.multiple?[]:"",!1))}r[li]=i}catch(v){Ne(t,t.return,v)}}break;case 6:if(It(e,t),Ht(t),s&4){if(t.stateNode===null)throw Error(D(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Ne(t,t.return,v)}}break;case 3:if(It(e,t),Ht(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{si(e.containerInfo)}catch(v){Ne(t,t.return,v)}break;case 4:It(e,t),Ht(t);break;case 13:It(e,t),Ht(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(du=Te())),s&4&&dd(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ge=(c=Ge)||u,It(e,t),Ge=c):It(e,t),Ht(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(q=t,u=t.child;u!==null;){for(d=q=u;q!==null;){switch(f=q,y=f.child,f.tag){case 0:case 11:case 14:case 15:$r(4,f,f.return);break;case 1:$s(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Ne(s,n,v)}}break;case 5:$s(f,f.return);break;case 22:if(f.memoizedState!==null){pd(d);continue}}y!==null?(y.return=f,q=y):pd(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vf("display",o))}catch(v){Ne(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ne(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:It(e,t),Ht(t),s&4&&dd(t);break;case 21:break;default:It(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Up(n)){var s=n;break e}n=n.return}throw Error(D(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Jr(r,""),s.flags&=-33);var i=hd(t);ac(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=hd(t);oc(t,a,o);break;default:throw Error(D(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dy(t,e,n){q=t,Gp(t)}function Gp(t,e,n){for(var s=(t.mode&1)!==0;q!==null;){var r=q,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||eo;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ge;a=eo;var c=Ge;if(eo=o,(Ge=l)&&!c)for(q=r;q!==null;)o=q,l=o.child,o.tag===22&&o.memoizedState!==null?md(r):l!==null?(l.return=o,q=l):md(r);for(;i!==null;)q=i,Gp(i),i=i.sibling;q=r,eo=a,Ge=c}fd(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,q=i):fd(t)}}function fd(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ge||ya(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ge)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:jt(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zh(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zh(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&si(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ge||e.flags&512&&ic(e)}catch(f){Ne(e,e.return,f)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function pd(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function md(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ya(4,e)}catch(l){Ne(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){Ne(e,r,l)}}var i=e.return;try{ic(e)}catch(l){Ne(e,i,l)}break;case 5:var o=e.return;try{ic(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){q=null;break}var a=e.sibling;if(a!==null){a.return=e.return,q=a;break}q=e.return}}var Ry=Math.ceil,qo=gn.ReactCurrentDispatcher,uu=gn.ReactCurrentOwner,Tt=gn.ReactCurrentBatchConfig,ne=0,Le=null,Me=null,qe=0,ft=0,Hs=Kn(0),Re=0,pi=null,xs=0,va=0,hu=0,Hr=null,rt=null,du=0,hr=1/0,nn=null,Bo=!1,lc=null,Fn=null,to=!1,In=null,Uo=0,Gr=0,cc=null,yo=-1,vo=0;function et(){return ne&6?Te():yo!==-1?yo:yo=Te()}function Ln(t){return t.mode&1?ne&2&&qe!==0?qe&-qe:vy.transition!==null?(vo===0&&(vo=If()),vo):(t=ie,t!==0||(t=window.event,t=t===void 0?16:Lf(t.type)),t):1}function Lt(t,e,n,s){if(50<Gr)throw Gr=0,cc=null,Error(D(185));wi(t,n,s),(!(ne&2)||t!==Le)&&(t===Le&&(!(ne&2)&&(va|=n),Re===4&&En(t,qe)),ct(t,s),n===1&&ne===0&&!(e.mode&1)&&(hr=Te()+500,pa&&Jn()))}function ct(t,e){var n=t.callbackNode;v0(t,e);var s=bo(t,t===Le?qe:0);if(s===0)n!==null&&Nh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Nh(n),e===1)t.tag===0?yy(gd.bind(null,t)):sp(gd.bind(null,t)),fy(function(){!(ne&6)&&Jn()}),n=null;else{switch(jf(s)){case 1:n=Lc;break;case 4:n=Af;break;case 16:n=To;break;case 536870912:n=Mf;break;default:n=To}n=tm(n,Qp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qp(t,e){if(yo=-1,vo=0,ne&6)throw Error(D(327));var n=t.callbackNode;if(nr()&&t.callbackNode!==n)return null;var s=bo(t,t===Le?qe:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=$o(t,s);else{e=s;var r=ne;ne|=2;var i=Xp();(Le!==t||qe!==e)&&(nn=null,hr=Te()+500,ds(t,e));do try{Ly();break}catch(a){Yp(t,a)}while(!0);Zc(),qo.current=i,ne=r,Me!==null?e=0:(Le=null,qe=0,e=Re)}if(e!==0){if(e===2&&(r=Pl(t),r!==0&&(s=r,e=uc(t,r))),e===1)throw n=pi,ds(t,0),En(t,s),ct(t,Te()),n;if(e===6)En(t,s);else{if(r=t.current.alternate,!(s&30)&&!Py(r)&&(e=$o(t,s),e===2&&(i=Pl(t),i!==0&&(s=i,e=uc(t,i))),e===1))throw n=pi,ds(t,0),En(t,s),ct(t,Te()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(D(345));case 2:is(t,rt,nn);break;case 3:if(En(t,s),(s&130023424)===s&&(e=du+500-Te(),10<e)){if(bo(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){et(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Ul(is.bind(null,t,rt,nn),e);break}is(t,rt,nn);break;case 4:if(En(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-Ft(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Te()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Ry(s/1960))-s,10<s){t.timeoutHandle=Ul(is.bind(null,t,rt,nn),s);break}is(t,rt,nn);break;case 5:is(t,rt,nn);break;default:throw Error(D(329))}}}return ct(t,Te()),t.callbackNode===n?Qp.bind(null,t):null}function uc(t,e){var n=Hr;return t.current.memoizedState.isDehydrated&&(ds(t,e).flags|=256),t=$o(t,e),t!==2&&(e=rt,rt=n,e!==null&&hc(e)),t}function hc(t){rt===null?rt=t:rt.push.apply(rt,t)}function Py(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!zt(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function En(t,e){for(e&=~hu,e&=~va,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ft(e),s=1<<n;t[n]=-1,e&=~s}}function gd(t){if(ne&6)throw Error(D(327));nr();var e=bo(t,0);if(!(e&1))return ct(t,Te()),null;var n=$o(t,e);if(t.tag!==0&&n===2){var s=Pl(t);s!==0&&(e=s,n=uc(t,s))}if(n===1)throw n=pi,ds(t,0),En(t,e),ct(t,Te()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,is(t,rt,nn),ct(t,Te()),null}function fu(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(hr=Te()+500,pa&&Jn())}}function ws(t){In!==null&&In.tag===0&&!(ne&6)&&nr();var e=ne;ne|=1;var n=Tt.transition,s=ie;try{if(Tt.transition=null,ie=1,t)return t()}finally{ie=s,Tt.transition=n,ne=e,!(ne&6)&&Jn()}}function pu(){ft=Hs.current,fe(Hs)}function ds(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dy(n)),Me!==null)for(n=Me.return;n!==null;){var s=n;switch(Qc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&jo();break;case 3:cr(),fe(at),fe(Qe),su();break;case 5:nu(s);break;case 4:cr();break;case 13:fe(ve);break;case 19:fe(ve);break;case 10:Kc(s.type._context);break;case 22:case 23:pu()}n=n.return}if(Le=t,Me=t=Vn(t.current,null),qe=ft=e,Re=0,pi=null,hu=va=xs=0,rt=Hr=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}cs=null}return t}function Yp(t,e){do{var n=Me;try{if(Zc(),po.current=Wo,zo){for(var s=_e.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}zo=!1}if(_s=0,Fe=De=_e=null,Ur=!1,hi=0,uu.current=null,n===null||n.return===null){Re=1,pi=e,Me=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=sd(o);if(y!==null){y.flags&=-257,rd(y,o,a,i,e),y.mode&1&&nd(i,c,e),e=y,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){nd(i,c,e),mu();break e}l=Error(D(426))}}else if(ge&&a.mode&1){var w=sd(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),rd(w,o,a,i,e),Yc(ur(l,a));break e}}i=l=ur(l,a),Re!==4&&(Re=2),Hr===null?Hr=[i]:Hr.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var p=jp(i,l,e);Xh(i,p);break e;case 1:a=l;var g=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Fn===null||!Fn.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=Op(i,a,e);Xh(i,C);break e}}i=i.return}while(i!==null)}Kp(n)}catch(x){e=x,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function Xp(){var t=qo.current;return qo.current=Wo,t===null?Wo:t}function mu(){(Re===0||Re===3||Re===2)&&(Re=4),Le===null||!(xs&268435455)&&!(va&268435455)||En(Le,qe)}function $o(t,e){var n=ne;ne|=2;var s=Xp();(Le!==t||qe!==e)&&(nn=null,ds(t,e));do try{Fy();break}catch(r){Yp(t,r)}while(!0);if(Zc(),ne=n,qo.current=s,Me!==null)throw Error(D(261));return Le=null,qe=0,Re}function Fy(){for(;Me!==null;)Zp(Me)}function Ly(){for(;Me!==null&&!c0();)Zp(Me)}function Zp(t){var e=em(t.alternate,t,ft);t.memoizedProps=t.pendingProps,e===null?Kp(t):Me=e,uu.current=null}function Kp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Iy(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Re=6,Me=null;return}}else if(n=My(n,e,ft),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Re===0&&(Re=5)}function is(t,e,n){var s=ie,r=Tt.transition;try{Tt.transition=null,ie=1,Vy(t,e,n,s)}finally{Tt.transition=r,ie=s}return null}function Vy(t,e,n,s){do nr();while(In!==null);if(ne&6)throw Error(D(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(_0(t,i),t===Le&&(Me=Le=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||to||(to=!0,tm(To,function(){return nr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Tt.transition,Tt.transition=null;var o=ie;ie=1;var a=ne;ne|=4,uu.current=null,Oy(t,n),Hp(n,t),iy(ql),Eo=!!Wl,ql=Wl=null,t.current=n,Dy(n),u0(),ne=a,ie=o,Tt.transition=i}else t.current=n;if(to&&(to=!1,In=t,Uo=r),i=t.pendingLanes,i===0&&(Fn=null),f0(n.stateNode),ct(t,Te()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Bo)throw Bo=!1,t=lc,lc=null,t;return Uo&1&&t.tag!==0&&nr(),i=t.pendingLanes,i&1?t===cc?Gr++:(Gr=0,cc=t):Gr=0,Jn(),null}function nr(){if(In!==null){var t=jf(Uo),e=Tt.transition,n=ie;try{if(Tt.transition=null,ie=16>t?16:t,In===null)var s=!1;else{if(t=In,In=null,Uo=0,ne&6)throw Error(D(331));var r=ne;for(ne|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(q=c;q!==null;){var u=q;switch(u.tag){case 0:case 11:case 15:$r(8,u,i)}var d=u.child;if(d!==null)d.return=u,q=d;else for(;q!==null;){u=q;var f=u.sibling,y=u.return;if(Bp(u),u===c){q=null;break}if(f!==null){f.return=y,q=f;break}q=y}}}var m=i.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$r(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,q=p;break e}q=i.return}}var g=t.current;for(q=g;q!==null;){o=q;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,q=_;else e:for(o=g;q!==null;){if(a=q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ya(9,a)}}catch(x){Ne(a,a.return,x)}if(a===o){q=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,q=C;break e}q=a.return}}if(ne=r,Jn(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(ca,t)}catch{}s=!0}return s}finally{ie=n,Tt.transition=e}}return!1}function yd(t,e,n){e=ur(n,e),e=jp(t,e,1),t=Pn(t,e,1),e=et(),t!==null&&(wi(t,1,e),ct(t,e))}function Ne(t,e,n){if(t.tag===3)yd(t,t,n);else for(;e!==null;){if(e.tag===3){yd(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fn===null||!Fn.has(s))){t=ur(n,t),t=Op(e,t,1),e=Pn(e,t,1),t=et(),e!==null&&(wi(e,1,t),ct(e,t));break}}e=e.return}}function zy(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=et(),t.pingedLanes|=t.suspendedLanes&n,Le===t&&(qe&n)===n&&(Re===4||Re===3&&(qe&130023424)===qe&&500>Te()-du?ds(t,0):hu|=n),ct(t,e)}function Jp(t,e){e===0&&(t.mode&1?(e=$i,$i<<=1,!($i&130023424)&&($i=4194304)):e=1);var n=et();t=fn(t,e),t!==null&&(wi(t,e,n),ct(t,n))}function Wy(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jp(t,n)}function qy(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(D(314))}s!==null&&s.delete(e),Jp(t,n)}var em;em=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||at.current)ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ot=!1,Ay(t,e,n);ot=!!(t.flags&131072)}else ot=!1,ge&&e.flags&1048576&&rp(e,Ro,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;go(t,e),t=e.pendingProps;var r=or(e,Qe.current);tr(e,n),r=iu(null,e,s,t,r,n);var i=ou();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,lt(s)?(i=!0,Oo(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,eu(e),r.updater=ga,e.stateNode=r,r._reactInternals=e,Zl(e,s,t,n),e=ec(null,e,s,!0,i,n)):(e.tag=0,ge&&i&&Gc(e),Ze(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(go(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=Uy(s),t=jt(s,t),r){case 0:e=Jl(null,e,s,t,n);break e;case 1:e=ad(null,e,s,t,n);break e;case 11:e=id(null,e,s,t,n);break e;case 14:e=od(null,e,s,jt(s.type,t),n);break e}throw Error(D(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jt(s,r),Jl(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jt(s,r),ad(t,e,s,r,n);case 3:e:{if(Fp(e),t===null)throw Error(D(387));s=e.pendingProps,i=e.memoizedState,r=i.element,up(t,e),Lo(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=ur(Error(D(423)),e),e=ld(t,e,s,n,r);break e}else if(s!==r){r=ur(Error(D(424)),e),e=ld(t,e,s,n,r);break e}else for(mt=Rn(e.stateNode.containerInfo.firstChild),gt=e,ge=!0,Dt=null,n=lp(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ar(),s===r){e=pn(t,e,n);break e}Ze(t,e,s,n)}e=e.child}return e;case 5:return hp(e),t===null&&Ql(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Bl(s,r)?o=null:i!==null&&Bl(s,i)&&(e.flags|=32),Pp(t,e),Ze(t,e,o,n),e.child;case 6:return t===null&&Ql(e),null;case 13:return Lp(t,e,n);case 4:return tu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=lr(e,null,s,n):Ze(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jt(s,r),id(t,e,s,r,n);case 7:return Ze(t,e,e.pendingProps,n),e.child;case 8:return Ze(t,e,e.pendingProps.children,n),e.child;case 12:return Ze(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,ce(Po,s._currentValue),s._currentValue=o,i!==null)if(zt(i.value,o)){if(i.children===r.children&&!at.current){e=pn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=cn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Yl(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Yl(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ze(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,tr(e,n),r=At(r),s=s(r),e.flags|=1,Ze(t,e,s,n),e.child;case 14:return s=e.type,r=jt(s,e.pendingProps),r=jt(s.type,r),od(t,e,s,r,n);case 15:return Dp(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:jt(s,r),go(t,e),e.tag=1,lt(s)?(t=!0,Oo(e)):t=!1,tr(e,n),Ip(e,s,r),Zl(e,s,r,n),ec(null,e,s,!0,t,n);case 19:return Vp(t,e,n);case 22:return Rp(t,e,n)}throw Error(D(156,e.tag))};function tm(t,e){return Ef(t,e)}function By(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(t,e,n,s){return new By(t,e,n,s)}function gu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uy(t){if(typeof t=="function")return gu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rc)return 11;if(t===Pc)return 14}return 2}function Vn(t,e){var n=t.alternate;return n===null?(n=kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _o(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")gu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ps:return fs(n.children,r,i,e);case Dc:o=8,r|=8;break;case wl:return t=kt(12,n,e,r|2),t.elementType=wl,t.lanes=i,t;case Sl:return t=kt(13,n,e,r),t.elementType=Sl,t.lanes=i,t;case kl:return t=kt(19,n,e,r),t.elementType=kl,t.lanes=i,t;case hf:return _a(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cf:o=10;break e;case uf:o=9;break e;case Rc:o=11;break e;case Pc:o=14;break e;case Nn:o=16,s=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=kt(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function fs(t,e,n,s){return t=kt(7,t,s,e),t.lanes=n,t}function _a(t,e,n,s){return t=kt(22,t,s,e),t.elementType=hf,t.lanes=n,t.stateNode={isHidden:!1},t}function fl(t,e,n){return t=kt(6,t,null,e),t.lanes=n,t}function pl(t,e,n){return e=kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $y(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qa(0),this.expirationTimes=Qa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function yu(t,e,n,s,r,i,o,a,l){return t=new $y(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},eu(i),t}function Hy(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rs,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function nm(t){if(!t)return Bn;t=t._reactInternals;e:{if(Cs(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(lt(n))return np(t,n,e)}return e}function sm(t,e,n,s,r,i,o,a,l){return t=yu(n,s,!0,t,r,i,o,a,l),t.context=nm(null),n=t.current,s=et(),r=Ln(n),i=cn(s,r),i.callback=e??null,Pn(n,i,r),t.current.lanes=r,wi(t,r,s),ct(t,s),t}function xa(t,e,n,s){var r=e.current,i=et(),o=Ln(r);return n=nm(n),e.context===null?e.context=n:e.pendingContext=n,e=cn(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Pn(r,e,o),t!==null&&(Lt(t,r,o,i),fo(t,r,o)),o}function Ho(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vu(t,e){vd(t,e),(t=t.alternate)&&vd(t,e)}function Gy(){return null}var rm=typeof reportError=="function"?reportError:function(t){console.error(t)};function _u(t){this._internalRoot=t}wa.prototype.render=_u.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));xa(t,e,null,null)};wa.prototype.unmount=_u.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ws(function(){xa(null,t,null,null)}),e[dn]=null}};function wa(t){this._internalRoot=t}wa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Rf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bn.length&&e!==0&&e<bn[n].priority;n++);bn.splice(n,0,t),n===0&&Ff(t)}};function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _d(){}function Qy(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var c=Ho(o);i.call(c)}}var o=sm(e,s,t,0,null,!1,!1,"",_d);return t._reactRootContainer=o,t[dn]=o.current,oi(t.nodeType===8?t.parentNode:t),ws(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var c=Ho(l);a.call(c)}}var l=yu(t,0,!1,null,null,!1,!1,"",_d);return t._reactRootContainer=l,t[dn]=l.current,oi(t.nodeType===8?t.parentNode:t),ws(function(){xa(e,l,n,s)}),l}function ka(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Ho(o);a.call(l)}}xa(e,o,t,r)}else o=Qy(n,e,t,r,s);return Ho(o)}Of=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fr(e.pendingLanes);n!==0&&(Vc(e,n|1),ct(e,Te()),!(ne&6)&&(hr=Te()+500,Jn()))}break;case 13:ws(function(){var s=fn(t,1);if(s!==null){var r=et();Lt(s,t,1,r)}}),vu(t,1)}};zc=function(t){if(t.tag===13){var e=fn(t,134217728);if(e!==null){var n=et();Lt(e,t,134217728,n)}vu(t,134217728)}};Df=function(t){if(t.tag===13){var e=Ln(t),n=fn(t,e);if(n!==null){var s=et();Lt(n,t,e,s)}vu(t,e)}};Rf=function(){return ie};Pf=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};Ol=function(t,e,n){switch(e){case"input":if(Tl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=fa(s);if(!r)throw Error(D(90));ff(s),Tl(s,r)}}}break;case"textarea":mf(t,n);break;case"select":e=n.value,e!=null&&Zs(t,!!n.multiple,e,!1)}};Sf=fu;kf=ws;var Yy={usingClientEntryPoint:!1,Events:[ki,zs,fa,xf,wf,fu]},Or={findFiberByHostInstance:ls,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xy={bundleType:Or.bundleType,version:Or.version,rendererPackageName:Or.rendererPackageName,rendererConfig:Or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Tf(t),t===null?null:t.stateNode},findFiberByHostInstance:Or.findFiberByHostInstance||Gy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var no=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!no.isDisabled&&no.supportsFiber)try{ca=no.inject(Xy),Yt=no}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yy;vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xu(e))throw Error(D(200));return Hy(t,e,null,n)};vt.createRoot=function(t,e){if(!xu(t))throw Error(D(299));var n=!1,s="",r=rm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=yu(t,1,!1,null,null,n,!1,s,r),t[dn]=e.current,oi(t.nodeType===8?t.parentNode:t),new _u(e)};vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Tf(e),t=t===null?null:t.stateNode,t};vt.flushSync=function(t){return ws(t)};vt.hydrate=function(t,e,n){if(!Sa(e))throw Error(D(200));return ka(null,t,e,!0,n)};vt.hydrateRoot=function(t,e,n){if(!xu(t))throw Error(D(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=rm;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=sm(e,null,t,1,n??null,r,!1,i,o),t[dn]=e.current,oi(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new wa(e)};vt.render=function(t,e,n){if(!Sa(e))throw Error(D(200));return ka(null,t,e,!1,n)};vt.unmountComponentAtNode=function(t){if(!Sa(t))throw Error(D(40));return t._reactRootContainer?(ws(function(){ka(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};vt.unstable_batchedUpdates=fu;vt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Sa(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return ka(t,e,n,!1,s)};vt.version="18.3.1-next-f1338f8080-20240426";function im(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(im)}catch(t){console.error(t)}}im(),rf.exports=vt;var Zy=rf.exports,xd=Zy;_l.createRoot=xd.createRoot,_l.hydrateRoot=xd.hydrateRoot;/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ky={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=U.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>U.createElement("svg",{ref:u,...Ky,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:["lucide",`lucide-${Jy(t)}`,a].join(" "),...c},[...e.map(([d,f])=>U.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=Z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=Z("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=Z("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Z("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Z("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Z("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Z("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Z("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=Z("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=Z("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Z("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=Z("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Z("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=Z("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=Z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=Z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Z("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=Z("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Z("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=Z("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=Z("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),wv=({onStartJam:t,onJoinJam:e,onEducationMode:n})=>{const[s,r]=U.useState(""),[i,o]=U.useState(!1),a=l=>{l.preventDefault(),s.trim()&&e(s.trim().toUpperCase())};return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4 sm:p-6",children:h.jsxs("div",{className:"max-w-4xl w-full",children:[h.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[h.jsx("div",{className:"flex justify-center mb-6",children:h.jsxs("div",{className:"relative",children:[h.jsx(wu,{className:"w-16 h-16 sm:w-20 sm:h-20 text-primary-500"}),h.jsx(Sd,{className:"w-6 h-6 sm:w-8 sm:h-8 text-accent-400 absolute -top-2 -right-2 animate-pulse"})]})}),h.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 bg-gradient-to-r from-primary-400 to-accent-400 bg-clip-text text-transparent",children:"Audiolux Jam Session"}),h.jsx("p",{className:"text-lg sm:text-xl text-gray-300 mb-2",children:"Real-time collaborative music making with synchronized visuals"}),h.jsx("p",{className:"text-sm sm:text-base text-gray-400",children:"No account needed. Just open the app and start playing."})]}),h.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-8 sm:mb-12",children:[h.jsxs("div",{className:"bg-gray-800 p-4 sm:p-6 rounded-xl border border-gray-700 hover:border-primary-500 transition-colors",children:[h.jsx(Go,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary-500 mb-3 sm:mb-4"}),h.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:"Multi-User Jamming"}),h.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Sync with friends worldwide. Low-latency networking keeps everyone in perfect time."})]}),h.jsxs("div",{className:"bg-gray-800 p-4 sm:p-6 rounded-xl border border-gray-700 hover:border-accent-500 transition-colors",children:[h.jsx(Sd,{className:"w-10 h-10 sm:w-12 sm:h-12 text-accent-500 mb-3 sm:mb-4"}),h.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:"Music Visualization"}),h.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Watch your music come alive with colors. Connect LED matrices for physical light shows."})]}),h.jsxs("div",{className:"bg-gray-800 p-4 sm:p-6 rounded-xl border border-gray-700 hover:border-green-500 transition-colors sm:col-span-2 lg:col-span-1",children:[h.jsx(dc,{className:"w-10 h-10 sm:w-12 sm:h-12 text-green-500 mb-3 sm:mb-4"}),h.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2",children:"Educational Mode"}),h.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Learn rhythm and melody through interactive lessons designed for K-12 students."})]})]}),h.jsxs("div",{className:"flex flex-col gap-4 justify-center items-center",children:[h.jsxs("button",{onClick:t,className:"btn-primary text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 flex items-center gap-3 w-full sm:w-auto sm:min-w-[200px] justify-center touch-target",children:[h.jsx(Na,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Start a Jam"]}),h.jsxs("div",{className:"flex flex-col gap-4 items-center w-full sm:w-auto",children:[i?h.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[h.jsx("input",{type:"text",value:s,onChange:l=>r(l.target.value),placeholder:"Enter room code",className:"px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:border-primary-500 focus:outline-none w-full sm:w-auto touch-target",autoFocus:!0}),h.jsx("button",{type:"submit",className:"btn-primary px-6 py-3 w-full sm:w-auto touch-target",disabled:!s.trim(),children:"Join"})]}):h.jsxs("button",{onClick:()=>o(!0),className:"btn-secondary text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 flex items-center gap-3 w-full sm:w-auto sm:min-w-[200px] justify-center touch-target",children:[h.jsx(Go,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Join a Jam"]}),h.jsxs("button",{onClick:n,className:"btn-accent text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 flex items-center gap-3 w-full sm:w-auto sm:min-w-[200px] justify-center touch-target",children:[h.jsx(dc,{className:"w-5 h-5 sm:w-6 sm:h-6"}),"Education Mode"]})]}),h.jsxs("div",{className:"mt-4",children:[h.jsxs("a",{href:"/apc40-demo.html",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-3 px-6 sm:px-8 py-3 sm:py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-lg transition-all transform hover:scale-105 shadow-lg hover:shadow-xl",children:[h.jsx(av,{className:"w-5 h-5 sm:w-6 sm:h-6"}),h.jsx("span",{className:"text-base sm:text-lg",children:"Test APC40 Demo"}),h.jsx("span",{className:"text-xs sm:text-sm opacity-75",children:"(Beta)"})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Temporary link for testing APC40 MIDI controller integration"})]})]}),h.jsx("div",{className:"mt-8 sm:mt-12 text-center",children:h.jsx("p",{className:"text-gray-500 text-xs sm:text-sm",children:"Compatible with MIDI controllers  LED integration  Web Audio API"})})]})})};class Sv{constructor(){ze(this,"errors",[]);ze(this,"maxStoredErrors",50);ze(this,"listeners",new Map)}handleError(e,n){const s={type:(n==null?void 0:n.type)||"unknown",code:(n==null?void 0:n.code)||"UNKNOWN_ERROR",message:e instanceof Error?e.message:e,originalError:e instanceof Error?e:void 0,timestamp:Date.now(),context:{deviceId:n==null?void 0:n.deviceId,operation:n==null?void 0:n.operation,retryCount:n==null?void 0:n.retryCount,userAgent:navigator.userAgent,url:window.location.href}};return this.errors.push(s),this.errors.length>this.maxStoredErrors&&this.errors.shift(),this.logError(s),this.emit("error",s),s}handleConnectionError(e,n){return this.handleError(e,{type:"connection",code:"CONNECTION_ERROR",...n,retryCount:n==null?void 0:n.reconnectAttempt})}handleMidiError(e,n){return this.handleError(e,{type:"midi",code:"MIDI_ERROR",deviceId:n==null?void 0:n.deviceId,operation:`MIDI ${n==null?void 0:n.messageType}`,...n})}handleCompatibilityError(e,n){return this.handleError(e,{type:"compatibility",code:"COMPATIBILITY_ERROR",operation:`Browser compatibility check: ${n==null?void 0:n.feature}`,...n})}handleDeviceError(e,n){return this.handleError(e,{type:"device",code:"DEVICE_ERROR",...n})}getMetrics(){const e={};return this.errors.forEach(n=>{e[n.type]=(e[n.type]||0)+1}),{totalErrors:this.errors.length,errorsByType:e,recentErrors:this.errors.slice(-10),lastErrorTime:this.errors.length>0?this.errors[this.errors.length-1].timestamp:null}}getRecentErrorsByType(e,n=5){return this.errors.filter(s=>s.type===e).slice(-n)}requiresUserAction(e){switch(e.type){case"compatibility":return!0;case"connection":return e.code==="NO_DEVICES_AVAILABLE"||e.code==="HTTPS_REQUIRED";default:return!1}}getUserMessage(e){switch(e.type){case"compatibility":return e.message.includes("HTTPS")?"Hardware controllers require HTTPS. Please use a secure connection.":e.message.includes("not supported")?"Your browser doesn't support Web MIDI. Try Chrome, Firefox, or Edge.":"Browser compatibility issue detected.";case"connection":return e.message.includes("No MIDI devices")?"No hardware controllers detected. Check device connections.":e.message.includes("Failed to connect")?"Failed to connect to hardware controller.":"Hardware connection problem.";case"midi":return"MIDI communication error occurred.";case"device":return`Device error: ${e.message}`;default:return"Hardware system error occurred."}}clearErrors(){this.errors=[],this.emit("errorsCleared")}addEventListener(e,n){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(n)}removeEventListener(e,n){const s=this.listeners.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}logError(e){const n="[HardwareError]",s=new Date(e.timestamp).toISOString();console.error(`${n} ${e.type.toUpperCase()}: ${e.message}`,{code:e.code,timestamp:s,context:e.context,...e.originalError&&{originalError:{message:e.originalError.message,stack:e.originalError.stack}}}),typeof window<"u"&&window.__DEV__&&(console.group(` ${n} Development Details`),console.error("Full Error Object:",e),e.originalError&&console.error("Original Error:",e.originalError),console.error("Context:",e.context),console.groupEnd())}emit(e,n){const s=this.listeners.get(e);s&&s.forEach(r=>r(n))}getDebugInfo(){const e=this.getMetrics();return["=== Hardware Error Handler Debug Info ===",`Total Errors: ${e.totalErrors}`,`Error Types: ${Object.entries(e.errorsByType).map(([s,r])=>`${s}(${r})`).join(", ")}`,`Last Error: ${e.lastErrorTime?new Date(e.lastErrorTime).toISOString():"None"}`,"","Recent Errors:",...e.recentErrors.map((s,r)=>`${r+1}. [${s.type}] ${s.code}: ${s.message}`)].join(`
`)}}const An=new Sv;class Nu{constructor(){ze(this,"midiAccess",null);ze(this,"devices",new Map);ze(this,"eventListeners",new Map);ze(this,"initialized",!1)}static checkBrowserCompatibility(){const e=navigator.userAgent.toLowerCase(),n=window.isSecureContext;let s="unknown";e.includes("chrome")?s="chrome":e.includes("firefox")?s="firefox":e.includes("safari")&&!e.includes("chrome")?s="safari":e.includes("edge")&&(s="edge");const r="requestMIDIAccess"in navigator;return{webMidiSupported:r,browserName:s,requiresHttps:r&&!n,hasSecureContext:n}}async initialize(){const e=Nu.checkBrowserCompatibility();if(!e.webMidiSupported)throw new Error(`Web MIDI API not supported in ${e.browserName}`);if(e.requiresHttps)throw new Error("Web MIDI API requires HTTPS or localhost");try{this.midiAccess=await navigator.requestMIDIAccess({sysex:!0}),this.setupDeviceListeners(),this.enumerateAllDevices(),this.initialized=!0,console.log("[WebMIDIApi] Successfully initialized with SysEx support"),this.emit("initialized")}catch(n){this.initialized=!1;const s=`Failed to initialize MIDI access: ${n instanceof Error?n.message:"Unknown error"}`;throw An.handleConnectionError(n instanceof Error?n:s,{operation:"MIDI API initialization"}),new Error(s)}}isInitialized(){return this.initialized}getDevices(){return Array.from(this.devices.values())}async enumerateDevices(){if(!this.midiAccess)throw new Error("MIDI access not initialized");const e=[],n=[];return this.midiAccess.inputs.forEach(s=>{e.push(s)}),this.midiAccess.outputs.forEach(s=>{n.push(s)}),{inputs:e,outputs:n}}getDevice(e){return this.devices.get(e)}connectToDevice(e){if(!this.midiAccess)throw new Error("MIDI access not initialized");const n=this.devices.get(e);if(!n)throw new Error(`Device ${e} not found`);if(n.type==="input"){const s=this.midiAccess.inputs.get(e);if(s)return s.onmidimessage=r=>this.handleMidiMessage(r),this.emit("deviceConnected",n),!0}return!1}disconnectFromDevice(e){if(!this.midiAccess)return;const n=this.devices.get(e);if(n&&n.type==="input"){const s=this.midiAccess.inputs.get(e);s&&(s.onmidimessage=null,this.emit("deviceDisconnected",n))}}sendMessage(e,n){try{if(!this.midiAccess)throw new Error("MIDI access not initialized");const s=this.midiAccess.outputs.get(e);if(s)s.send(n);else throw new Error(`Output device ${e} not found`)}catch(s){throw An.handleMidiError(s instanceof Error?s:"MIDI output failed",{deviceId:e,messageType:"outgoing",data:new Uint8Array(n)}),s}}addEventListener(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(n)}removeEventListener(e,n){const s=this.eventListeners.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}emit(e,n){const s=this.eventListeners.get(e);s&&s.forEach(r=>r(n))}setupDeviceListeners(){this.midiAccess&&(this.midiAccess.onstatechange=e=>{const n=e.port;this.updateDevice(n),n.state==="connected"?this.emit("deviceAdded",this.devices.get(n.id)):n.state==="disconnected"&&this.emit("deviceRemoved",this.devices.get(n.id))})}enumerateAllDevices(){this.midiAccess&&(this.midiAccess.inputs.forEach(e=>{this.updateDevice(e)}),this.midiAccess.outputs.forEach(e=>{this.updateDevice(e)}))}updateDevice(e){const n={id:e.id,name:e.name||"Unknown Device",manufacturer:e.manufacturer||"Unknown",type:e.type,state:e.state};this.devices.set(e.id,n)}handleMidiMessage(e){try{const n=e.data,s=this.parseMidiMessage(n,e.timeStamp);this.emit("message",s)}catch(n){An.handleMidiError(n instanceof Error?n:"MIDI message parsing failed",{messageType:"incoming",data:e.data})}}parseMidiMessage(e,n){const s=e[0],r=(s&15)+1,i=s&240;let o="unknown",a,l,c,u;switch(i){case 144:o="noteon",a=e[1],l=e[2],l===0&&(o="noteoff");break;case 128:o="noteoff",a=e[1],l=e[2];break;case 176:o="controlchange",c=e[1],u=e[2];break}return{data:e,timeStamp:n,type:o,channel:r,note:a,velocity:l,controller:c,value:u}}dispose(){this.midiAccess&&this.midiAccess.inputs.forEach(e=>{e.onmidimessage=null}),this.eventListeners.clear(),this.devices.clear(),this.midiAccess=null,this.initialized=!1}}const dt=new Nu;class kv{constructor(e){ze(this,"state",{status:"disconnected",device:null,lastError:null,reconnectAttempts:0,compatibility:null});ze(this,"options",{maxReconnectAttempts:5,reconnectBaseDelay:1e3,reconnectMaxDelay:3e4});ze(this,"reconnectTimeout",null);ze(this,"eventListeners",new Map);this.options={...this.options,...e},this.setupWebMidiListeners(),this.checkInitialCompatibility()}getState(){return{...this.state}}async connect(e){this.clearReconnectTimeout();try{const n=dt.constructor.checkBrowserCompatibility();if(this.state.compatibility=n,!n.webMidiSupported){const i=`Web MIDI not supported in ${n.browserName}`;An.handleCompatibilityError(i,{browserName:n.browserName,feature:"Web MIDI API"}),this.updateState({status:"unsupported",lastError:i});return}if(n.requiresHttps){const i="Web MIDI requires HTTPS or localhost";An.handleCompatibilityError(i,{browserName:n.browserName,feature:"Secure Context"}),this.updateState({status:"requires_https",lastError:i});return}this.updateState({status:"connecting",lastError:null}),await dt.initialize();const s=e?dt.getDevice(e):dt.getDevices().find(i=>i.type==="input"&&i.state==="connected");if(!s){const i="No MIDI devices available";throw An.handleConnectionError(i,{operation:"Device enumeration",reconnectAttempt:this.state.reconnectAttempts}),new Error(i)}if(dt.connectToDevice(s.id))console.log(`[ConnectionManager] Successfully connected to ${s.name}`),this.updateState({status:"connected",device:s,reconnectAttempts:0,lastError:null});else{const i=`Failed to connect to device: ${s.name}`;throw An.handleConnectionError(i,{deviceId:s.id,operation:"Device connection",reconnectAttempt:this.state.reconnectAttempts}),new Error(i)}}catch(n){const s=n instanceof Error?n.message:"Unknown connection error";An.handleConnectionError(s,{deviceId:e,operation:"Connection attempt",reconnectAttempt:this.state.reconnectAttempts}),this.updateState({status:"error",lastError:s}),this.scheduleReconnect()}}disconnect(){this.clearReconnectTimeout(),this.state.device&&dt.disconnectFromDevice(this.state.device.id),this.updateState({status:"disconnected",device:null,lastError:null,reconnectAttempts:0})}async retry(e){this.state.reconnectAttempts=0,await this.connect(e)}addEventListener(e,n){this.eventListeners.has(e)||this.eventListeners.set(e,[]),this.eventListeners.get(e).push(n)}removeEventListener(e,n){const s=this.eventListeners.get(e);if(s){const r=s.indexOf(n);r>-1&&s.splice(r,1)}}setupWebMidiListeners(){dt.addEventListener("initialized",()=>{console.log("[ConnectionManager] Web MIDI API initialized")}),dt.addEventListener("deviceAdded",e=>{console.log("[ConnectionManager] Device added:",e.name),(this.state.status==="disconnected"||this.state.status==="error")&&this.connect(e.id)}),dt.addEventListener("deviceRemoved",e=>{console.log("[ConnectionManager] Device removed:",e.name),this.state.device&&this.state.device.id===e.id&&(this.updateState({status:"error",device:null,lastError:`Device ${e.name} was disconnected`}),this.scheduleReconnect())}),dt.addEventListener("deviceConnected",e=>{console.log("[ConnectionManager] Device connected:",e.name)}),dt.addEventListener("deviceDisconnected",e=>{console.log("[ConnectionManager] Device disconnected:",e.name)})}checkInitialCompatibility(){const e=dt.constructor.checkBrowserCompatibility();this.state.compatibility=e,e.webMidiSupported?e.requiresHttps&&this.updateState({status:"requires_https",lastError:"Web MIDI requires HTTPS or localhost"}):this.updateState({status:"unsupported",lastError:`Web MIDI not supported in ${e.browserName}`})}updateState(e){this.state={...this.state,...e},this.emit("stateChange",this.state)}scheduleReconnect(){if(this.state.reconnectAttempts>=this.options.maxReconnectAttempts){console.log("[ConnectionManager] Max reconnect attempts reached");return}this.state.reconnectAttempts++;const e=Math.min(this.options.reconnectBaseDelay*Math.pow(2,this.state.reconnectAttempts-1),this.options.reconnectMaxDelay);console.log(`[ConnectionManager] Scheduling reconnect attempt ${this.state.reconnectAttempts} in ${e}ms`),this.reconnectTimeout=window.setTimeout(()=>{console.log(`[ConnectionManager] Attempting reconnect ${this.state.reconnectAttempts}/${this.options.maxReconnectAttempts}`),this.connect()},e)}clearReconnectTimeout(){this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)}emit(e,n){const s=this.eventListeners.get(e);s&&s.forEach(r=>r(n))}dispose(){this.clearReconnectTimeout(),this.eventListeners.clear(),dt.dispose()}}const Dr=new kv,ml={chrome:{name:"Google Chrome",supportLevel:"full",limitations:[],recommendations:["Recommended browser for hardware integration"],downloadUrl:"https://www.google.com/chrome/"},edge:{name:"Microsoft Edge",supportLevel:"full",limitations:[],recommendations:["Full Web MIDI API support available"],downloadUrl:"https://www.microsoft.com/edge"},firefox:{name:"Mozilla Firefox",supportLevel:"partial",limitations:["Limited SysEx support","Some advanced MIDI features may not work"],recommendations:["Basic MIDI functionality available","Consider Chrome/Edge for full hardware features"],downloadUrl:"https://www.mozilla.org/firefox/"},safari:{name:"Safari",supportLevel:"none",limitations:["Web MIDI API not supported","Hardware controllers cannot connect"],recommendations:["Use Chrome, Firefox, or Edge for hardware support","Safari users can still use software features"],downloadUrl:"https://www.google.com/chrome/"},unknown:{name:"Unknown Browser",supportLevel:"none",limitations:["Browser compatibility unknown"],recommendations:["Use Chrome or Edge for guaranteed hardware support"]}},gl="centaurus_browser_compatibility";class zn{static detect(e=!0){if(e&&this.cachedResult)return this.cachedResult;if(e){const s=this.loadFromStorage();if(s)return this.cachedResult=s,s}const n=this.performDetection();return e&&(this.cachedResult=n,this.saveToStorage(n)),n}static detectFresh(){return this.detect(!1)}static getBrowserProfile(e){return ml[e]||ml.unknown}static getSupportedBrowsers(){return Object.values(ml).filter(e=>e.supportLevel!=="none")}static canUseMIDI(){const e=this.detect();return e.webMidiSupported&&e.hasSecureContext&&e.supportLevel!=="none"}static getCompatibilityMessage(){const e=this.detect(),n=this.getBrowserProfile(e.browserName);return e.supportLevel==="full"?` ${n.name} fully supports hardware controllers`:e.supportLevel==="partial"?` ${n.name} has limited hardware support`:e.webMidiSupported?e.requiresHttps?" HTTPS required for hardware features":" Hardware support unknown in current browser":` ${n.name} doesn't support Web MIDI API`}static performDetection(){const e=navigator.userAgent.toLowerCase(),n=window.isSecureContext,s="requestMIDIAccess"in navigator;let r="unknown",i="";const o=e.match(/chrome\/([0-9.]+)/),a=e.match(/firefox\/([0-9.]+)/),l=e.match(/version\/([0-9.]+).*safari/),c=e.match(/edg\/([0-9.]+)/);c?(r="edge",i=c[1]):o?(r="chrome",i=o[1]):a?(r="firefox",i=a[1]):l&&!e.includes("chrome")&&(r="safari",i=l[1]);const u=this.getBrowserProfile(r),d=s&&!n;return{webMidiSupported:s,browserName:r,browserVersion:i,requiresHttps:d,hasSecureContext:n,supportLevel:d?"none":s?u.supportLevel:"none",limitations:d?[...u.limitations,"HTTPS required for Web MIDI access"]:u.limitations,recommendations:u.recommendations}}static saveToStorage(e){try{const n={...e,timestamp:Date.now(),userAgent:navigator.userAgent};localStorage.setItem(gl,JSON.stringify(n))}catch(n){console.warn("[BrowserCompatibility] Failed to save to localStorage:",n)}}static loadFromStorage(){try{const e=localStorage.getItem(gl);if(!e)return null;const n=JSON.parse(e);if(!(n.userAgent===navigator.userAgent&&n.timestamp&&Date.now()-n.timestamp<24*60*60*1e3))return null;const{timestamp:r,userAgent:i,...o}=n;return o}catch(e){return console.warn("[BrowserCompatibility] Failed to load from localStorage:",e),null}}static clearCache(){this.cachedResult=null;try{localStorage.removeItem(gl)}catch(e){console.warn("[BrowserCompatibility] Failed to clear localStorage:",e)}}}ze(zn,"cachedResult",null);zn.detect;zn.canUseMIDI;zn.getCompatibilityMessage;const Nv=({compatibility:t=zn.detect(),showDetails:e=!1,className:n=""})=>{const s=zn.getBrowserProfile(t.browserName),r=()=>{switch(t.supportLevel){case"full":return h.jsx(cv,{className:"w-5 h-5 text-green-500"});case"partial":return h.jsx(Qr,{className:"w-5 h-5 text-yellow-500"});case"none":return h.jsx(Qr,{className:"w-5 h-5 text-red-500"});default:return h.jsx(Qr,{className:"w-5 h-5 text-gray-500"})}},i=()=>{switch(t.supportLevel){case"full":return"border-green-200 bg-green-50";case"partial":return"border-yellow-200 bg-yellow-50";case"none":return"border-red-200 bg-red-50";default:return"border-gray-200 bg-gray-50"}},a=(()=>{if(t.requiresHttps)return{title:"HTTPS Required",description:"Hardware controllers require HTTPS or localhost for security. Please use HTTPS to enable MIDI features.",showHttpsSetup:!0};switch(t.supportLevel){case"full":return{title:"Hardware Support Available",description:`${s.name} fully supports hardware controllers. Connect your MIDI device to get started.`};case"partial":return{title:"Limited Hardware Support",description:`${s.name} has basic MIDI support. Some advanced features may not work.`};case"none":return{title:"Hardware Not Supported",description:`${s.name} doesn't support Web MIDI API. You can still use all software features.`};default:return{title:"Hardware Support Unknown",description:"Unable to detect hardware support in your current browser."}}})(),l=()=>{const u=zn.getSupportedBrowsers();return h.jsxs("div",{className:"mt-4",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Supported Browsers:"}),h.jsx("div",{className:"space-y-2",children:u.map(d=>h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsxs("span",{className:"text-gray-600",children:[d.name," ",d.supportLevel==="full"?"(Full)":"(Basic)"]}),d.downloadUrl&&h.jsxs("a",{href:d.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-500 hover:text-blue-600",children:[h.jsx(sv,{className:"w-3 h-3 mr-1"}),"Download"]})]},d.name))})]})},c=()=>h.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx(gv,{className:"w-4 h-4 text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),h.jsxs("div",{className:"text-sm",children:[h.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"HTTPS Setup Options:"}),h.jsxs("ul",{className:"text-blue-800 space-y-1",children:[h.jsx("li",{children:" Access via HTTPS URL (e.g., https://yourdomain.com)"}),h.jsx("li",{children:" Use localhost for development (localhost is considered secure)"}),h.jsx("li",{children:" Deploy to a secure hosting provider"})]})]})]})});return h.jsx("div",{className:`border rounded-lg p-4 ${i()} ${n}`,children:h.jsxs("div",{className:"flex items-start",children:[r(),h.jsxs("div",{className:"ml-3 flex-1",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-900",children:a.title}),h.jsx("p",{className:"mt-1 text-sm text-gray-700",children:a.description}),e&&h.jsxs("div",{className:"mt-3",children:[t.limitations.length>0&&h.jsxs("div",{className:"mb-3",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Limitations:"}),h.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:t.limitations.map((u,d)=>h.jsxs("li",{children:[" ",u]},d))})]}),t.recommendations.length>0&&h.jsxs("div",{className:"mb-3",children:[h.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Recommendations:"}),h.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:t.recommendations.map((u,d)=>h.jsxs("li",{children:[" ",u]},d))})]}),t.supportLevel==="none"&&h.jsx(l,{}),a.showHttpsSetup&&h.jsx(c,{}),h.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Detected: ",s.name," ",t.browserVersion,t.hasSecureContext?" (Secure)":" (Insecure)"]})]})]})]})})},Cv=({showDeviceInfo:t=!0,showCompatibilityInfo:e=!0,className:n=""})=>{const[s,r]=U.useState(Dr.getState()),[i,o]=U.useState(!1);U.useEffect(()=>{const y=m=>{r(m)};return Dr.addEventListener("stateChange",y),()=>{Dr.removeEventListener("stateChange",y)}},[]);const a=()=>{switch(s.status){case"connected":return{icon:h.jsx(pc,{className:"w-4 h-4 text-green-500"}),label:"Connected",color:"text-green-700",bgColor:"bg-green-50",borderColor:"border-green-200"};case"connecting":return{icon:h.jsx(hv,{className:"w-4 h-4 text-blue-500 animate-spin"}),label:"Connecting...",color:"text-blue-700",bgColor:"bg-blue-50",borderColor:"border-blue-200"};case"error":return{icon:h.jsx(Qr,{className:"w-4 h-4 text-red-500"}),label:"Error",color:"text-red-700",bgColor:"bg-red-50",borderColor:"border-red-200"};case"unsupported":return{icon:h.jsx(fc,{className:"w-4 h-4 text-gray-500"}),label:"Unsupported",color:"text-gray-700",bgColor:"bg-gray-50",borderColor:"border-gray-200"};case"requires_https":return{icon:h.jsx(Qr,{className:"w-4 h-4 text-orange-500"}),label:"HTTPS Required",color:"text-orange-700",bgColor:"bg-orange-50",borderColor:"border-orange-200"};case"disconnected":default:return{icon:h.jsx(fc,{className:"w-4 h-4 text-gray-500"}),label:"Disconnected",color:"text-gray-700",bgColor:"bg-gray-50",borderColor:"border-gray-200"}}},l=async()=>{(s.status==="error"||s.status==="disconnected")&&await Dr.retry()},c=async()=>{s.status==="disconnected"&&await Dr.connect()},u=a(),d=s.status==="error"||s.status==="disconnected",f=s.status==="disconnected"&&zn.canUseMIDI();return h.jsxs("div",{className:n,children:[h.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-medium cursor-pointer transition-colors ${u.bgColor} ${u.borderColor} ${u.color} border`,onClick:()=>o(!i),children:[u.icon,h.jsxs("span",{className:"ml-2",children:["Hardware: ",u.label]}),h.jsx(Ci,{className:"w-3 h-3 ml-2 opacity-50"})]}),i&&h.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4 z-50",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center",children:[u.icon,h.jsx("span",{className:"ml-2 font-medium text-gray-900",children:u.label})]}),d&&h.jsxs("button",{onClick:l,className:"flex items-center px-2 py-1 text-sm bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",disabled:s.status==="connecting",children:[h.jsx(ku,{className:"w-3 h-3 mr-1"}),"Retry"]}),f&&h.jsxs("button",{onClick:c,className:"flex items-center px-2 py-1 text-sm bg-green-50 text-green-600 hover:bg-green-100 rounded-lg transition-colors",children:[h.jsx(pc,{className:"w-3 h-3 mr-1"}),"Connect"]})]}),t&&s.device&&h.jsxs("div",{className:"mb-3 p-2 bg-gray-50 rounded",children:[h.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-1",children:"Connected Device:"}),h.jsx("p",{className:"text-sm text-gray-900",children:s.device.name}),h.jsxs("p",{className:"text-xs text-gray-500",children:[s.device.manufacturer,"  ",s.device.type]})]}),s.lastError&&h.jsxs("div",{className:"mb-3 p-2 bg-red-50 rounded border border-red-200",children:[h.jsx("h4",{className:"text-xs font-medium text-red-700 mb-1",children:"Error:"}),h.jsx("p",{className:"text-sm text-red-800",children:s.lastError}),s.reconnectAttempts>0&&h.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Reconnect attempts: ",s.reconnectAttempts]})]}),e&&s.compatibility&&h.jsx("div",{className:"mb-3",children:h.jsx(Nv,{compatibility:{...s.compatibility,browserVersion:"",supportLevel:s.compatibility.webMidiSupported?"full":"none",limitations:[],recommendations:[]},showDetails:!1})}),h.jsxs("div",{className:"flex justify-between items-center text-xs border-t pt-2",children:[h.jsx("button",{onClick:()=>o(!1),className:"px-2 py-1 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Close"}),h.jsx("div",{className:"flex space-x-3",children:(s.status==="requires_https"||s.status==="unsupported")&&h.jsxs("a",{href:"#setup-guide",className:"flex items-center text-blue-500 hover:text-blue-600",onClick:()=>{console.log("Open HTTPS setup guide")},children:[h.jsx(iv,{className:"w-3 h-3 mr-1"}),"Setup Guide"]})})]})]})]})},Tv=({sessionCode:t,userCount:e=0,isConnected:n,onSettingsClick:s})=>h.jsx("header",{className:"bg-gray-800 border-b border-gray-700 px-4 sm:px-6 py-3 sm:py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(wu,{className:"w-6 h-6 sm:w-8 sm:h-8 text-primary-500"}),h.jsx("h1",{className:"text-lg sm:text-xl font-bold hidden sm:block",children:"Audiolux Jam Session"}),h.jsx("h1",{className:"text-lg font-bold sm:hidden",children:"Audiolux Jam"})]}),t&&h.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 bg-gray-700 px-2 sm:px-3 py-1 rounded-lg",children:[h.jsx("span",{className:"text-xs sm:text-sm text-gray-300 hidden sm:inline",children:"Room:"}),h.jsx("span",{className:"font-mono text-primary-400 font-semibold text-sm",children:t})]})]}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[h.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[n?h.jsx(pc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500"}):h.jsx(fc,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500"}),h.jsx("span",{className:"text-xs sm:text-sm text-gray-300 hidden sm:inline",children:n?"Connected":"Disconnected"})]}),h.jsx("div",{className:"relative",children:h.jsx(Cv,{showDeviceInfo:!0,showCompatibilityInfo:!0,className:"hidden sm:block"})}),h.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[h.jsx(Go,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}),h.jsx("span",{className:"text-xs sm:text-sm text-gray-300",children:e})]}),h.jsx("button",{onClick:s,className:"p-1 sm:p-2 hover:bg-gray-700 rounded-lg transition-colors touch-target",children:h.jsx(Ci,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"})})]})]})}),sr=(t,e,n)=>{t/=360,e/=100,n/=100;const s=(1-Math.abs(2*n-1))*e,r=s*(1-Math.abs(t*6%2-1)),i=n-s/2;let o=0,a=0,l=0;return 0<=t&&t<1/6?(o=s,a=r,l=0):1/6<=t&&t<2/6?(o=r,a=s,l=0):2/6<=t&&t<3/6?(o=0,a=s,l=r):3/6<=t&&t<4/6?(o=0,a=r,l=s):4/6<=t&&t<5/6?(o=r,a=0,l=s):5/6<=t&&t<1&&(o=s,a=0,l=r),{r:Math.round((o+i)*255),g:Math.round((a+i)*255),b:Math.round((l+i)*255)}},bv=t=>{const e=n=>n.toString(16).padStart(2,"0");return`#${e(t.r)}${e(t.g)}${e(t.b)}`},Cu=(t,e)=>{switch(e){case"spectrum":const n=t/127*270;return sr(n,85,55);case"chromatic":const r=t%12/12*360;return sr(r,80,60);case"harmonic":const i=[0,7,2,9,4,11,6,1,8,3,10,5],o=t%12,l=i.indexOf(o)/12*360;return sr(l,70,55);default:return{r:255,g:255,b:255}}},xo=(t,e)=>{const s={Kick:36,Snare:38,"Hi-Hat":42,Perc:39,Crash:49,Ride:51,Tom:45,Clap:39}[t]||60,r=Cu(s,e);return bv(r)},Ev=(t,e)=>{switch(e){case"spectrum":const n=t*270;return sr(n,85,55);case"chromatic":const s=t*360;return sr(s,70,55);case"harmonic":const r=t*240;return sr(r,65,50);default:return{r:255,g:255,b:255}}},Av=({track:t,currentStep:e,isPlaying:n,colorMode:s,onStepToggle:r,onVelocityChange:i,onMute:o,onSolo:a,onVolumeChange:l,onClear:c,onRemove:u,canRemove:d})=>{const[f,y]=U.useState(!1),m=xo(t.name,s);return h.jsxs("div",{className:"track-row",children:[h.jsxs("div",{className:"w-32 flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:m}}),h.jsx("span",{className:"font-medium text-sm",children:t.name})]}),h.jsx("span",{className:"text-xs text-gray-400",children:t.instrument})]}),h.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[h.jsx("button",{onClick:o,className:`p-1 rounded transition-colors ${t.muted?"text-red-400 bg-red-400/20":"text-gray-400 hover:text-white"}`,title:"Mute",children:t.muted?h.jsx(xv,{className:"w-4 h-4"}):h.jsx(hm,{className:"w-4 h-4"})}),h.jsx("button",{onClick:a,className:`p-1 rounded transition-colors ${t.solo?"text-yellow-400 bg-yellow-400/20":"text-gray-400 hover:text-white"}`,title:"Solo",children:h.jsx(lv,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>y(!f),className:"p-1 text-gray-400 hover:text-white rounded transition-colors",title:"Show velocity",children:h.jsx(mv,{className:"w-4 h-4"})}),h.jsx("button",{onClick:c,className:"p-1 text-gray-400 hover:text-red-400 rounded transition-colors",title:"Clear track",children:h.jsx(rv,{className:"w-4 h-4"})}),d&&h.jsx("button",{onClick:u,className:"p-1 text-gray-400 hover:text-red-500 rounded transition-colors",title:"Remove track",children:h.jsx(vv,{className:"w-4 h-4"})})]}),h.jsx("div",{className:"flex gap-2 flex-1",children:t.steps.map((v,w)=>h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>r(w),className:`step-button ${v?"active":""} ${n&&e===w?"playing":""}`,style:{backgroundColor:v?`${m}${Math.round(t.velocities[w]*255).toString(16).padStart(2,"0")}`:void 0},children:v&&h.jsx("div",{className:"w-2 h-2 rounded-full bg-white",style:{opacity:t.velocities[w]}})}),f&&v&&h.jsx("div",{className:"absolute top-full mt-1 left-1/2 transform -translate-x-1/2",children:h.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.velocities[w],onChange:p=>i(w,parseFloat(p.target.value)),className:"w-12 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer"})})]},w))}),h.jsx("div",{className:"w-20 ml-4",children:h.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.volume,onChange:v=>l(parseFloat(v.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})})]})},Mv=({isPlaying:t,tempo:e,onPlay:n,onStop:s,onTempoChange:r})=>h.jsxs("div",{className:"flex items-center gap-4 mb-6 p-4 bg-gray-700 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:t?s:n,className:`p-3 rounded-lg transition-colors ${t?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:t?h.jsx(Su,{className:"w-6 h-6"}):h.jsx(Na,{className:"w-6 h-6"})}),h.jsx("button",{onClick:s,className:"p-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:h.jsx(um,{className:"w-6 h-6"})}),h.jsx("button",{onClick:()=>{},className:"p-3 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:h.jsx(cm,{className:"w-6 h-6"})})]}),h.jsxs("div",{className:"flex items-center gap-3 ml-8",children:[h.jsx("label",{className:"text-sm font-medium text-gray-300",children:"BPM:"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>r(Math.max(60,e-5)),className:"w-8 h-8 bg-gray-600 hover:bg-gray-500 rounded text-white text-sm",children:"-"}),h.jsx("input",{type:"number",value:e,onChange:i=>r(parseInt(i.target.value)||120),min:"60",max:"200",className:"w-16 px-2 py-1 bg-gray-600 border border-gray-500 rounded text-center text-white focus:border-primary-500 focus:outline-none"}),h.jsx("button",{onClick:()=>r(Math.min(200,e+5)),className:"w-8 h-8 bg-gray-600 hover:bg-gray-500 rounded text-white text-sm",children:"+"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 ml-8",children:[h.jsx("input",{type:"checkbox",id:"metronome",className:"w-4 h-4 text-primary-600 bg-gray-600 border-gray-500 rounded focus:ring-primary-500"}),h.jsx("label",{htmlFor:"metronome",className:"text-sm text-gray-300",children:"Metronome"})]}),h.jsxs("div",{className:"flex items-center gap-2 ml-8",children:[h.jsx("label",{className:"text-sm text-gray-300",children:"Swing:"}),h.jsx("input",{type:"range",min:"0",max:"0.3",step:"0.05",defaultValue:"0",className:"w-20 h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]}),mc=[{id:"kick",name:"Kick",instrument:"Bass Drum",midiNote:36},{id:"snare",name:"Snare",instrument:"Snare Drum",midiNote:38},{id:"hihat-closed",name:"Hi-Hat",instrument:"Closed Hi-Hat",midiNote:42},{id:"hihat-open",name:"Open Hat",instrument:"Open Hi-Hat",midiNote:46},{id:"clap",name:"Clap",instrument:"Hand Clap",midiNote:39},{id:"crash",name:"Crash",instrument:"Crash Cymbal",midiNote:49},{id:"ride",name:"Ride",instrument:"Ride Cymbal",midiNote:51},{id:"tom-high",name:"Hi Tom",instrument:"High Tom",midiNote:50},{id:"tom-mid",name:"Mid Tom",instrument:"Mid Tom",midiNote:47},{id:"tom-low",name:"Lo Tom",instrument:"Low Tom",midiNote:45},{id:"cowbell",name:"Cowbell",instrument:"Cowbell",midiNote:56},{id:"shaker",name:"Shaker",instrument:"Shaker",midiNote:70}],Gs=t=>{const e=mc.find(n=>n.id===t);if(!e)throw new Error(`Unknown instrument: ${t}`);return{id:`track-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.name,instrument:e.instrument,steps:new Array(16).fill(!1),velocities:new Array(16).fill(.8),muted:!1,solo:!1,volume:.8,color:"#ffffff"}},kd=()=>{const t=Gs("kick");t.steps=[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],t.velocities=[.9,.8,.8,.8,.8,.8,.8,.8,.9,.8,.8,.8,.8,.8,.8,.8];const e=Gs("snare");e.steps=[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],e.velocities=[.8,.8,.8,.8,.9,.8,.8,.8,.8,.8,.8,.8,.9,.8,.8,.8];const n=Gs("hihat-closed");n.steps=[!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1,!0,!1],n.velocities=[.6,.8,.4,.8,.6,.8,.4,.8,.6,.8,.4,.8,.6,.8,.4,.8];const s=Gs("clap");return[t,e,n,s]},dm=t=>{const e=t.map(n=>{var s;return(s=mc.find(r=>r.name===n.name))==null?void 0:s.id}).filter(Boolean);return mc.filter(n=>!e.includes(n.id))},Iv=({tracks:t,onAddTrack:e,maxTracks:n=8})=>{const[s,r]=U.useState(!1),i=dm(t),o=t.length<n,a=l=>{try{const c=Gs(l);e(c),r(!1)}catch(c){console.error("Failed to add track:",c)}};return h.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"text-sm text-gray-400",children:["Tracks: ",t.length,"/",n]}),o&&i.length>0&&h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>r(!s),className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg transition-colors",children:[h.jsx(lm,{className:"w-4 h-4"}),"Add Track",h.jsx(om,{className:"w-3 h-3"})]}),s&&h.jsx("div",{className:"absolute top-full mt-1 left-0 bg-gray-700 border border-gray-600 rounded-lg shadow-lg z-10 min-w-[160px]",children:h.jsxs("div",{className:"p-2",children:[h.jsx("div",{className:"text-xs text-gray-400 mb-2 px-2",children:"Add Instrument:"}),i.map(l=>h.jsxs("button",{onClick:()=>a(l.id),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-600 rounded transition-colors",children:[h.jsx("div",{className:"font-medium",children:l.name}),h.jsx("div",{className:"text-xs text-gray-400",children:l.instrument})]},l.id))]})})]})]}),t.length>1&&h.jsx("div",{className:"text-xs text-gray-500",children:"Click the trash icon on any track to remove it"}),s&&h.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>r(!1)})]})},fm="15.1.22",Nd=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Cd=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),gc=(t,e)=>({startTime:e,type:"setValue",value:t}),pm=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),mm=(t,e,{startTime:n,target:s,timeConstant:r})=>s+(e-s)*Math.exp((n-t)/r),Qs=t=>t.type==="exponentialRampToValue",Qo=t=>t.type==="linearRampToValue",Tn=t=>Qs(t)||Qo(t),Tu=t=>t.type==="setValue",sn=t=>t.type==="setValueCurve",Yo=(t,e,n,s)=>{const r=t[e];return r===void 0?s:Tn(r)||Tu(r)?r.value:sn(r)?r.values[r.values.length-1]:mm(n,Yo(t,e-1,r.startTime,s),r)},Td=(t,e,n,s,r)=>n===void 0?[s.insertTime,r]:Tn(n)?[n.endTime,n.value]:Tu(n)?[n.startTime,n.value]:sn(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Yo(t,e-1,n.startTime,r)],yc=t=>t.type==="cancelAndHold",vc=t=>t.type==="cancelScheduledValues",Sn=t=>yc(t)||vc(t)?t.cancelTime:Qs(t)||Qo(t)?t.endTime:t.startTime,bd=(t,e,n,{endTime:s,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((t-e)/(s-e)):0,Ed=(t,e,n,{endTime:s,value:r})=>n+(t-e)/(s-e)*(r-n),jv=(t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},Ov=(t,{duration:e,startTime:n,values:s})=>{const r=(t-n)/e*(s.length-1);return jv(s,r)},so=t=>t.type==="setTarget";class Dv{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Sn(e);if(yc(e)||vc(e)){const s=this._automationEvents.findIndex(i=>vc(e)&&sn(i)?i.startTime+i.duration>=n:Sn(i)>=n),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),yc(e)){const i=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Tn(r)){if(i!==void 0&&so(i))throw new Error("The internal list is malformed.");const o=i===void 0?r.insertTime:sn(i)?i.startTime+i.duration:Sn(i),a=i===void 0?this._defaultValue:sn(i)?i.values[i.values.length-1]:i.value,l=Qs(r)?bd(n,o,a,r):Ed(n,o,a,r),c=Qs(r)?Nd(l,n,this._currenTime):Cd(l,n,this._currenTime);this._automationEvents.push(c)}if(i!==void 0&&so(i)&&this._automationEvents.push(gc(this.getValue(n),n)),i!==void 0&&sn(i)&&i.startTime+i.duration>n){const o=n-i.startTime,a=(i.values.length-1)/i.duration,l=Math.max(2,1+Math.ceil(o*a)),c=o/(l-1)*a,u=i.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const f=c*d%1;u[d]=i.values[d-1]*(1-f)+i.values[d]*f}this._automationEvents[this._automationEvents.length-1]=pm(u,i.startTime,o)}}}else{const s=this._automationEvents.findIndex(o=>Sn(o)>n),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&sn(r)&&Sn(r)+r.duration>n)return!1;const i=Qs(e)?Nd(e.value,e.endTime,this._currenTime):Qo(e)?Cd(e.value,n,this._currenTime):e;if(s===-1)this._automationEvents.push(i);else{if(sn(e)&&n+e.duration>Sn(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,i)}}return!0}flush(e){const n=this._automationEvents.findIndex(s=>Sn(s)>e);if(n>1){const s=this._automationEvents.slice(n-1),r=s[0];so(r)&&s.unshift(gc(Yo(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Sn(o)>e),s=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,i=this._automationEvents[r];if(i!==void 0&&so(i)&&(s===void 0||!Tn(s)||s.insertTime>e))return mm(e,Yo(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(i!==void 0&&Tu(i)&&(s===void 0||!Tn(s)))return i.value;if(i!==void 0&&sn(i)&&(s===void 0||!Tn(s)||i.startTime+i.duration>e))return e<i.startTime+i.duration?Ov(e,i):i.values[i.values.length-1];if(i!==void 0&&Tn(i)&&(s===void 0||!Tn(s)))return i.value;if(s!==void 0&&Qs(s)){const[o,a]=Td(this._automationEvents,r,i,s,this._defaultValue);return bd(e,o,a,s)}if(s!==void 0&&Qo(s)){const[o,a]=Td(this._automationEvents,r,i,s,this._defaultValue);return Ed(e,o,a,s)}return this._defaultValue}}const Rv=t=>({cancelTime:t,type:"cancelAndHold"}),Pv=t=>({cancelTime:t,type:"cancelScheduledValues"}),Fv=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),Lv=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),Vv=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),zv=()=>new DOMException("","AbortError"),Wv=t=>(e,n,[s,r,i],o)=>{t(e[r],[n,s,i],a=>a[0]===n&&a[1]===s,o)},qv=t=>(e,n,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);t.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},Bv=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},dr=new WeakSet,gm=new WeakMap,bu=new WeakMap,ym=new WeakMap,Eu=new WeakMap,Ca=new WeakMap,vm=new WeakMap,_c=new WeakMap,xc=new WeakMap,wc=new WeakMap,_m={construct(){return _m}},Uv=t=>{try{const e=new Proxy(t,_m);new e}catch{return!1}return!0},Ad=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Md=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),r=s.match(Ad);for(;r!==null;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Ad)}return[n.join(";"),s]},Id=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},jd=t=>{if(!Uv(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},$v=(t,e,n,s,r,i,o,a,l,c,u,d,f)=>{let y=0;return(m,v,w={credentials:"omit"})=>{const p=u.get(m);if(p!==void 0&&p.has(v))return Promise.resolve();const g=c.get(m);if(g!==void 0){const x=g.get(v);if(x!==void 0)return x}const _=i(m),C=_.audioWorklet===void 0?r(v).then(([x,S])=>{const[k,N]=Md(x,S),A=`${k};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${N}
})})(window,'_AWGS')`;return n(A)}).then(()=>{const x=f._AWGS.pop();if(x===void 0)throw new SyntaxError;s(_.currentTime,_.sampleRate,()=>x(class{},void 0,(S,k)=>{if(S.trim()==="")throw e();const N=xc.get(_);if(N!==void 0){if(N.has(S))throw e();jd(k),Id(k.parameterDescriptors),N.set(S,k)}else jd(k),Id(k.parameterDescriptors),xc.set(_,new Map([[S,k]]))},_.sampleRate,void 0,void 0))}):Promise.all([r(v),Promise.resolve(t(d,d))]).then(([[x,S],k])=>{const N=y+1;y=N;const[A,T]=Md(x,S),b=`${A};((AudioWorkletProcessor,registerProcessor)=>{${T}
})(${k?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${k?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${k?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${N}',class extends AudioWorkletProcessor{process(){return !1}})`,P=new Blob([b],{type:"application/javascript; charset=utf-8"}),L=URL.createObjectURL(P);return _.audioWorklet.addModule(L,w).then(()=>{if(a(_))return _;const z=o(_);return z.audioWorklet.addModule(L,w).then(()=>z)}).then(z=>{if(l===null)throw new SyntaxError;try{new l(z,`__sac${N}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(L))});return g===void 0?c.set(m,new Map([[v,C]])):g.set(v,C),C.then(()=>{const x=u.get(m);x===void 0?u.set(m,new Set([v])):x.add(v)}).finally(()=>{const x=c.get(m);x!==void 0&&x.delete(v)}),C}},Wt=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Ta=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return t.delete(s),s},xm=(t,e,n,s)=>{const r=Wt(t,e),i=Ta(r,o=>o[0]===n&&o[1]===s);return r.size===0&&t.delete(e),i},Ti=t=>Wt(vm,t),fr=t=>{if(dr.has(t))throw new Error("The AudioNode is already stored.");dr.add(t),Ti(t).forEach(e=>e(!0))},wm=t=>"port"in t,bi=t=>{if(!dr.has(t))throw new Error("The AudioNode is not stored.");dr.delete(t),Ti(t).forEach(e=>e(!1))},Sc=(t,e)=>{!wm(t)&&e.every(n=>n.size===0)&&bi(t)},Hv=(t,e,n,s,r,i,o,a,l,c,u,d,f)=>{const y=new WeakMap;return(m,v,w,p,g)=>{const{activeInputs:_,passiveInputs:C}=i(v),{outputs:x}=i(m),S=a(m),k=N=>{const A=l(v),T=l(m);if(N){const M=xm(C,m,w,p);t(_,m,M,!1),!g&&!d(m)&&n(T,A,w,p),f(v)&&fr(v)}else{const M=s(_,m,w,p);e(C,p,M,!1),!g&&!d(m)&&r(T,A,w,p);const E=o(v);if(E===0)u(v)&&Sc(v,_);else{const F=y.get(v);F!==void 0&&clearTimeout(F),y.set(v,setTimeout(()=>{u(v)&&Sc(v,_)},E*1e3))}}};return c(x,[v,w,p],N=>N[0]===v&&N[1]===w&&N[2]===p,!0)?(S.add(k),u(m)?t(_,m,[w,p,k],!0):e(C,p,[m,w,k],!0),!0):!1}},Gv=t=>(e,n,[s,r,i],o)=>{const a=e.get(s);a===void 0?e.set(s,new Set([[r,n,i]])):t(a,[r,n,i],l=>l[0]===r&&l[1]===n,o)},Qv=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(s),s.disconnect()};n.addEventListener("ended",r)},Yv=t=>(e,n)=>{t(e).add(n)},Xv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Zv=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=r(a),u={...Xv,...l},d=s(c,u),f=i(c)?e():null;super(a,!1,d,f),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Xe=(t,e)=>t.context===e,Kv=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,c)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},Xo=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Kt=()=>new DOMException("","IndexSizeError"),Au=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){throw s.code===12?Kt():s}})(t.getChannelData)},Jv={numberOfChannels:1},e_=(t,e,n,s,r,i,o,a)=>{let l=null;return class Sm{constructor(u){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:f,sampleRate:y}={...Jv,...u};l===null&&(l=new r(1,1,44100));const m=s!==null&&e(i,i)?new s({length:d,numberOfChannels:f,sampleRate:y}):l.createBuffer(f,d,y);if(m.numberOfChannels===0)throw n();return typeof m.copyFromChannel!="function"?(o(m),Au(m)):e(Xo,()=>Xo(m))||a(m),t.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===Sm.prototype||t.has(u)}}},it=-34028234663852886e22,Ke=-it,un=t=>dr.has(t),t_={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},n_=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const d=i(c),f={...t_,...u},y=r(d,f),m=o(d),v=m?e():null;super(c,!1,y,v),this._audioBufferSourceNodeRenderer=v,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=y,this._onended=null,this._playbackRate=n(this,m,y.playbackRate,Ke,it)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?c:d}get playbackRate(){return this._playbackRate}start(c=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(c,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,u]:[c,u,d]),this.context.state!=="closed"){fr(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),un(this)&&bi(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},s_=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=n(c);const f=Xe(d,u);if(!f){const y={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,y),o!==null&&d.start(...o),a!==null&&d.stop(a)}return i.set(u,d),f?await t(u,c.playbackRate,d.playbackRate):await s(u,c.playbackRate,d.playbackRate),await r(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},r_=t=>"playbackRate"in t,i_=t=>"frequency"in t&&"gain"in t,o_=t=>"offset"in t,a_=t=>!("frequency"in t)&&"gain"in t,l_=t=>"detune"in t&&"frequency"in t&&!("gain"in t),c_=t=>"pan"in t,Je=t=>Wt(gm,t),Ei=t=>Wt(ym,t),kc=(t,e)=>{const{activeInputs:n}=Je(t);n.forEach(r=>r.forEach(([i])=>{e.includes(t)||kc(i,[...e,t])}));const s=r_(t)?[t.playbackRate]:wm(t)?Array.from(t.parameters.values()):i_(t)?[t.Q,t.detune,t.frequency,t.gain]:o_(t)?[t.offset]:a_(t)?[t.gain]:l_(t)?[t.detune,t.frequency]:c_(t)?[t.pan]:[];for(const r of s){const i=Ei(r);i!==void 0&&i.activeInputs.forEach(([o])=>kc(o,e))}un(t)&&bi(t)},km=t=>{kc(t.destination,[])},u_=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),h_=(t,e,n,s,r,i,o,a,l)=>class extends t{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(u)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?n():m}if(d===null)throw s();if(!u_(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:f}=u,{sampleRate:y}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:f==="balanced"?512/y:f==="interactive"||f===void 0?256/y:f==="playback"?1024/y:Math.max(2,Math.min(128,Math.round(f*y/128)))*128/y,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",m)};d.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),km(this)}))}createMediaElementSource(u){return new r(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},d_=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const d=i(c),f=o(d),y=r(d,u,f),m=f?e(a):null;super(c,!1,y,m),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=y}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},f_=t=>{const e=new WeakMap,n=async(s,r)=>{const i=r.destination;return e.set(r,i),await t(s,r,i),i};return{render(s,r){const i=e.get(r);return i!==void 0?Promise.resolve(i):n(s,r)}}},p_=(t,e,n,s,r,i,o,a)=>(l,c)=>{const u=c.listener,d=()=>{const x=new Float32Array(1),S=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),k=o(c);let N=!1,A=[0,0,-1,0,1,0],T=[0,0,0];const M=()=>{if(N)return;N=!0;const P=s(c,256,9,0);P.onaudioprocess=({inputBuffer:L})=>{const z=[i(L,x,0),i(L,x,1),i(L,x,2),i(L,x,3),i(L,x,4),i(L,x,5)];z.some((O,R)=>O!==A[R])&&(u.setOrientation(...z),A=z);const I=[i(L,x,6),i(L,x,7),i(L,x,8)];I.some((O,R)=>O!==T[R])&&(u.setPosition(...I),T=I)},S.connect(P)},E=P=>L=>{L!==A[P]&&(A[P]=L,u.setOrientation(...A))},F=P=>L=>{L!==T[P]&&(T[P]=L,u.setPosition(...T))},b=(P,L,z)=>{const I=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:L});I.connect(S,0,P),I.start(),Object.defineProperty(I.offset,"defaultValue",{get(){return L}});const O=t({context:l},k,I.offset,Ke,it);return a(O,"value",R=>()=>R.call(O),R=>j=>{try{R.call(O,j)}catch(V){if(V.code!==9)throw V}M(),k&&z(j)}),O.cancelAndHoldAtTime=(R=>k?()=>{throw r()}:(...j)=>{const V=R.apply(O,j);return M(),V})(O.cancelAndHoldAtTime),O.cancelScheduledValues=(R=>k?()=>{throw r()}:(...j)=>{const V=R.apply(O,j);return M(),V})(O.cancelScheduledValues),O.exponentialRampToValueAtTime=(R=>k?()=>{throw r()}:(...j)=>{const V=R.apply(O,j);return M(),V})(O.exponentialRampToValueAtTime),O.linearRampToValueAtTime=(R=>k?()=>{throw r()}:(...j)=>{const V=R.apply(O,j);return M(),V})(O.linearRampToValueAtTime),O.setTargetAtTime=(R=>k?()=>{throw r()}:(...j)=>{const V=R.apply(O,j);return M(),V})(O.setTargetAtTime),O.setValueAtTime=(R=>k?()=>{throw r()}:(...j)=>{const V=R.apply(O,j);return M(),V})(O.setValueAtTime),O.setValueCurveAtTime=(R=>k?()=>{throw r()}:(...j)=>{const V=R.apply(O,j);return M(),V})(O.setValueCurveAtTime),O};return{forwardX:b(0,0,E(0)),forwardY:b(1,0,E(1)),forwardZ:b(2,-1,E(2)),positionX:b(6,0,F(0)),positionY:b(7,0,F(1)),positionZ:b(8,0,F(2)),upX:b(3,0,E(3)),upY:b(4,1,E(4)),upZ:b(5,0,E(5))}},{forwardX:f,forwardY:y,forwardZ:m,positionX:v,positionY:w,positionZ:p,upX:g,upY:_,upZ:C}=u.forwardX===void 0?d():u;return{get forwardX(){return f},get forwardY(){return y},get forwardZ(){return m},get positionX(){return v},get positionY(){return w},get positionZ(){return p},get upX(){return g},get upY(){return _},get upZ(){return C}}},Zo=t=>"context"in t,Ai=t=>Zo(t[0]),Ts=(t,e,n,s)=>{for(const r of t)if(n(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},Od=(t,e,[n,s],r)=>{Ts(t,[e,n,s],i=>i[0]===e&&i[1]===n,r)},Dd=(t,[e,n,s],r)=>{const i=t.get(e);i===void 0?t.set(e,new Set([[n,s]])):Ts(i,[n,s],o=>o[0]===n,r)},_r=t=>"inputs"in t,Ko=(t,e,n,s)=>{if(_r(e)){const r=e.inputs[s];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,s),[e,n,s]},Nm=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},m_=(t,e,n)=>Ta(t,s=>s[0]===e&&s[1]===n),Cm=(t,e)=>{if(!Ti(t).delete(e))throw new Error("Missing the expected event listener.")},Tm=(t,e,n)=>{const s=Wt(t,e),r=Ta(s,i=>i[0]===n);return s.size===0&&t.delete(e),r},Jo=(t,e,n,s)=>{_r(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},pe=t=>Wt(bu,t),mi=t=>Wt(Eu,t),Ss=t=>_c.has(t),wo=t=>!dr.has(t),Rd=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const s=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(t.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?n(!0):n(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(t.destination)},a.start()}}),yl=(t,e)=>{const n=new Map;for(const s of t)for(const r of s){const i=n.get(r);n.set(r,i===void 0?1:i+1)}n.forEach((s,r)=>e(r,s))},ea=t=>"context"in t,g_=t=>{const e=new Map;t.connect=(n=>(s,r=0,i=0)=>{const o=ea(s)?n(s,r,i):n(s,r),a=e.get(s);return a===void 0?e.set(s,[{input:i,output:r}]):a.every(l=>l.input!==i||l.output!==r)&&a.push({input:i,output:r}),o})(t.connect.bind(t)),t.disconnect=(n=>(s,r,i)=>{if(n.apply(t),s===void 0)e.clear();else if(typeof s=="number")for(const[o,a]of e){const l=a.filter(c=>c.output!==s);l.length===0?e.delete(o):e.set(o,l)}else if(e.has(s))if(r===void 0)e.delete(s);else{const o=e.get(s);if(o!==void 0){const a=o.filter(l=>l.output!==r&&(l.input!==i||i===void 0));a.length===0?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(l=>{ea(o)?t.connect(o,l.output,l.input):t.connect(o,l.output)})})(t.disconnect)},y_=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=Ei(e),{outputs:o}=Je(t),a=Ti(t),l=c=>{const u=pe(t),d=mi(e);if(c){const f=Tm(i,t,n);Od(r,t,f,!1),!s&&!Ss(t)&&u.connect(d,n)}else{const f=m_(r,t,n);Dd(i,f,!1),!s&&!Ss(t)&&u.disconnect(d,n)}};return Ts(o,[e,n],c=>c[0]===e&&c[1]===n,!0)?(a.add(l),un(t)?Od(r,t,[n,l],!0):Dd(i,[t,n,l],!0),!0):!1},v_=(t,e,n,s)=>{const{activeInputs:r,passiveInputs:i}=Je(e),o=Nm(r[s],t,n);return o===null?[xm(i,t,n,s)[2],!1]:[o[2],!0]},__=(t,e,n)=>{const{activeInputs:s,passiveInputs:r}=Ei(e),i=Nm(s,t,n);return i===null?[Tm(r,t,n)[1],!1]:[i[2],!0]},Mu=(t,e,n,s,r)=>{const[i,o]=v_(t,n,s,r);if(i!==null&&(Cm(t,i),o&&!e&&!Ss(t)&&Jo(pe(t),pe(n),s,r)),un(n)){const{activeInputs:a}=Je(n);Sc(n,a)}},Iu=(t,e,n,s)=>{const[r,i]=__(t,n,s);r!==null&&(Cm(t,r),i&&!e&&!Ss(t)&&pe(t).disconnect(mi(n),s))},x_=(t,e)=>{const n=Je(t),s=[];for(const r of n.outputs)Ai(r)?Mu(t,e,...r):Iu(t,e,...r),s.push(r[0]);return n.outputs.clear(),s},w_=(t,e,n)=>{const s=Je(t),r=[];for(const i of s.outputs)i[1]===n&&(Ai(i)?Mu(t,e,...i):Iu(t,e,...i),r.push(i[0]),s.outputs.delete(i));return r},S_=(t,e,n,s,r)=>{const i=Je(t);return Array.from(i.outputs).filter(o=>o[0]===n&&(s===void 0||o[1]===s)&&(r===void 0||o[2]===r)).map(o=>(Ai(o)?Mu(t,e,...o):Iu(t,e,...o),i.outputs.delete(o),o[0]))},k_=(t,e,n,s,r,i,o,a,l,c,u,d,f,y,m,v)=>class extends c{constructor(p,g,_,C){super(_),this._context=p,this._nativeAudioNode=_;const x=u(p);d(x)&&n(Rd,()=>Rd(x,v))!==!0&&g_(_),bu.set(this,_),vm.set(this,new Set),p.state!=="closed"&&g&&fr(this),t(this,C,_)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(p){this._nativeAudioNode.channelCount=p}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(p){this._nativeAudioNode.channelCountMode=p}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(p){this._nativeAudioNode.channelInterpretation=p}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(p,g=0,_=0){if(g<0||g>=this._nativeAudioNode.numberOfOutputs)throw r();const C=u(this._context),x=m(C);if(f(p)||y(p))throw i();if(Zo(p)){const N=pe(p);try{const T=Ko(this._nativeAudioNode,N,g,_),M=wo(this);(x||M)&&this._nativeAudioNode.disconnect(...T),this.context.state!=="closed"&&!M&&wo(p)&&fr(p)}catch(T){throw T.code===12?i():T}if(e(this,p,g,_,x)){const T=l([this],p);yl(T,s(x))}return p}const S=mi(p);if(S.name==="playbackRate"&&S.maxValue===1024)throw o();try{this._nativeAudioNode.connect(S,g),(x||wo(this))&&this._nativeAudioNode.disconnect(S,g)}catch(N){throw N.code===12?i():N}if(y_(this,p,g,x)){const N=l([this],p);yl(N,s(x))}}disconnect(p,g,_){let C;const x=u(this._context),S=m(x);if(p===void 0)C=x_(this,S);else if(typeof p=="number"){if(p<0||p>=this.numberOfOutputs)throw r();C=w_(this,S,p)}else{if(g!==void 0&&(g<0||g>=this.numberOfOutputs)||Zo(p)&&_!==void 0&&(_<0||_>=p.numberOfInputs))throw r();if(C=S_(this,S,p,g,_),C.length===0)throw i()}for(const k of C){const N=l([this],k);yl(N,a)}}},N_=(t,e,n,s,r,i,o,a,l,c,u,d,f)=>(y,m,v,w=null,p=null)=>{const g=v.value,_=new Dv(g),C=m?s(_):null,x={get defaultValue(){return g},get maxValue(){return w===null?v.maxValue:w},get minValue(){return p===null?v.minValue:p},get value(){return v.value},set value(S){v.value=S,x.setValueAtTime(S,y.context.currentTime)},cancelAndHoldAtTime(S){if(typeof v.cancelAndHoldAtTime=="function")C===null&&_.flush(y.context.currentTime),_.add(r(S)),v.cancelAndHoldAtTime(S);else{const k=Array.from(_).pop();C===null&&_.flush(y.context.currentTime),_.add(r(S));const N=Array.from(_).pop();v.cancelScheduledValues(S),k!==N&&N!==void 0&&(N.type==="exponentialRampToValue"?v.exponentialRampToValueAtTime(N.value,N.endTime):N.type==="linearRampToValue"?v.linearRampToValueAtTime(N.value,N.endTime):N.type==="setValue"?v.setValueAtTime(N.value,N.startTime):N.type==="setValueCurve"&&v.setValueCurveAtTime(N.values,N.startTime,N.duration))}return x},cancelScheduledValues(S){return C===null&&_.flush(y.context.currentTime),_.add(i(S)),v.cancelScheduledValues(S),x},exponentialRampToValueAtTime(S,k){if(S===0)throw new RangeError;if(!Number.isFinite(k)||k<0)throw new RangeError;const N=y.context.currentTime;return C===null&&_.flush(N),Array.from(_).length===0&&(_.add(c(g,N)),v.setValueAtTime(g,N)),_.add(o(S,k)),v.exponentialRampToValueAtTime(S,k),x},linearRampToValueAtTime(S,k){const N=y.context.currentTime;return C===null&&_.flush(N),Array.from(_).length===0&&(_.add(c(g,N)),v.setValueAtTime(g,N)),_.add(a(S,k)),v.linearRampToValueAtTime(S,k),x},setTargetAtTime(S,k,N){return C===null&&_.flush(y.context.currentTime),_.add(l(S,k,N)),v.setTargetAtTime(S,k,N),x},setValueAtTime(S,k){return C===null&&_.flush(y.context.currentTime),_.add(c(S,k)),v.setValueAtTime(S,k),x},setValueCurveAtTime(S,k,N){const A=S instanceof Float32Array?S:new Float32Array(S);if(d!==null&&d.name==="webkitAudioContext"){const T=k+N,M=y.context.sampleRate,E=Math.ceil(k*M),F=Math.floor(T*M),b=F-E,P=new Float32Array(b);for(let z=0;z<b;z+=1){const I=(A.length-1)/N*((E+z)/M-k),O=Math.floor(I),R=Math.ceil(I);P[z]=O===R?A[O]:(1-(I-O))*A[O]+(1-(R-I))*A[R]}C===null&&_.flush(y.context.currentTime),_.add(u(P,k,N)),v.setValueCurveAtTime(P,k,N);const L=F/M;L<T&&f(x,P[P.length-1],L),f(x,A[A.length-1],T)}else C===null&&_.flush(y.context.currentTime),_.add(u(A,k,N)),v.setValueCurveAtTime(A,k,N);return x}};return n.set(x,v),e.set(x,y),t(x,C),x},C_=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:s,value:r}=n;e.exponentialRampToValueAtTime(r,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:r}=n;e.linearRampToValueAtTime(r,s)}else if(n.type==="setTarget"){const{startTime:s,target:r,timeConstant:i}=n;e.setTargetAtTime(r,s,i)}else if(n.type==="setValue"){const{startTime:s,value:r}=n;e.setValueAtTime(r,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:r,values:i}=n;e.setValueCurveAtTime(i,r,s)}else throw new Error("Can't apply an unknown automation.")}});class bm{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((s,r)=>e.call(n,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const T_={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},b_=(t,e,n,s,r,i,o,a,l,c,u,d,f,y)=>class extends e{constructor(v,w,p){var g;const _=a(v),C=l(_),x=u({...T_,...p});f(x);const S=xc.get(_),k=S==null?void 0:S.get(w),N=C||_.state!=="closed"?_:(g=o(_))!==null&&g!==void 0?g:_,A=r(N,C?null:v.baseLatency,c,w,k,x),T=C?s(w,x,k):null;super(v,!0,A,T);const M=[];A.parameters.forEach((F,b)=>{const P=n(this,C,F);M.push([b,P])}),this._nativeAudioWorkletNode=A,this._onprocessorerror=null,this._parameters=new bm(M),C&&t(_,this);const{activeInputs:E}=i(this);d(A,E)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(v){const w=typeof v=="function"?y(this,v):null;this._nativeAudioWorkletNode.onprocessorerror=w;const p=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=p!==null&&p===w?v:p}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ta(t,e,n,s,r){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,r);else{const i=t.getChannelData(s);if(e[n].byteLength===0)e[n]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const Em=(t,e,n,s,r)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],s,r):e[n].byteLength!==0&&t.getChannelData(s).set(e[n],r)},na=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const r=[],i=typeof e=="number"?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));n.push(r)}return n},E_=(t,e)=>{const n=Wt(wc,t),s=pe(e);return Wt(n,s)},A_=async(t,e,n,s,r,i,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=s.channelCount*s.numberOfInputs,c=r.reduce((w,p)=>w+p,0),u=c===0?null:n.createBuffer(c,a,n.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");const d=Je(t),f=await E_(n,t),y=na(s.numberOfInputs,s.channelCount),m=na(s.numberOfOutputs,r),v=Array.from(t.parameters.keys()).reduce((w,p)=>({...w,[p]:new Float32Array(128)}),{});for(let w=0;w<a;w+=128){if(s.numberOfInputs>0&&e!==null)for(let p=0;p<s.numberOfInputs;p+=1)for(let g=0;g<s.channelCount;g+=1)ta(e,y[p],g,g,w);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:p},g)=>{ta(e,v,p,l+g,w)});for(let p=0;p<s.numberOfInputs;p+=1)for(let g=0;g<r[p];g+=1)m[p][g].byteLength===0&&(m[p][g]=new Float32Array(128));try{const p=y.map((_,C)=>d.activeInputs[C].size===0?[]:_),g=o(w/n.sampleRate,n.sampleRate,()=>f.process(p,m,v));if(u!==null)for(let _=0,C=0;_<s.numberOfOutputs;_+=1){for(let x=0;x<r[_];x+=1)Em(u,m[_],x,C+x,w);C+=r[_]}if(!g)break}catch(p){t.dispatchEvent(new ErrorEvent("processorerror",{colno:p.colno,filename:p.filename,lineno:p.lineno,message:p.message}));break}}return u},M_=(t,e,n,s,r,i,o,a,l,c,u,d,f,y,m,v)=>(w,p,g)=>{const _=new WeakMap;let C=null;const x=async(S,k)=>{let N=u(S),A=null;const T=Xe(N,k),M=Array.isArray(p.outputChannelCount)?p.outputChannelCount:Array.from(p.outputChannelCount);if(d===null){const E=M.reduce((L,z)=>L+z,0),F=r(k,{channelCount:Math.max(1,E),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,E)}),b=[];for(let L=0;L<S.numberOfOutputs;L+=1)b.push(s(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[L]}));const P=o(k,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1});P.connect=e.bind(null,b),P.disconnect=l.bind(null,b),A=[F,b,P]}else T||(N=new d(k,w));if(_.set(k,A===null?N:A[2]),A!==null){if(C===null){if(g===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const z=S.channelCount*S.numberOfInputs,I=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length,O=z+I;C=A_(S,O===0?null:await(async()=>{const j=new f(O,Math.ceil(S.context.length/128)*128,k.sampleRate),V=[],Q=[];for(let J=0;J<p.numberOfInputs;J+=1)V.push(o(j,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),Q.push(r(j,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));const te=await Promise.all(Array.from(S.parameters.values()).map(async J=>{const Se=i(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:J.value});return await y(j,J,Se.offset),Se})),$=s(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,z+I)});for(let J=0;J<p.numberOfInputs;J+=1){V[J].connect(Q[J]);for(let Se=0;Se<p.channelCount;Se+=1)Q[J].connect($,Se,J*p.channelCount+Se)}for(const[J,Se]of te.entries())Se.connect($,0,z+J),Se.start(0);return $.connect(j.destination),await Promise.all(V.map(J=>m(S,j,J))),v(j)})(),k,p,M,g,c)}const E=await C,F=n(k,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[b,P,L]=A;E!==null&&(F.buffer=E,F.start(0)),F.connect(b);for(let z=0,I=0;z<S.numberOfOutputs;z+=1){const O=P[z];for(let R=0;R<M[z];R+=1)b.connect(O,I+R,R);I+=M[z]}return L}if(T)for(const[E,F]of S.parameters.entries())await t(k,F,N.parameters.get(E));else for(const[E,F]of S.parameters.entries())await y(k,F,N.parameters.get(E));return await m(S,k,N),N};return{render(S,k){a(k,S);const N=_.get(k);return N!==void 0?Promise.resolve(N):x(S,k)}}},I_=(t,e,n,s,r,i,o,a,l,c,u,d,f,y,m,v,w,p,g,_)=>class extends m{constructor(x,S){super(x,S),this._nativeContext=x,this._audioWorklet=t===void 0?void 0:{addModule:(k,N)=>t(this,k,N)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(x,S,k){return new n({length:S,numberOfChannels:x,sampleRate:k})}createBufferSource(){return new s(this)}createChannelMerger(x=6){return new i(this,{numberOfInputs:x})}createChannelSplitter(x=6){return new o(this,{numberOfOutputs:x})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(x=1){return new u(this,{maxDelayTime:x})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(x,S){return new y(this,{feedback:S,feedforward:x})}createOscillator(){return new v(this)}createPanner(){return new w(this)}createPeriodicWave(x,S,k={disableNormalization:!1}){return new p(this,{...k,imag:S,real:x})}createStereoPanner(){return new g(this)}createWaveShaper(){return new _(this)}decodeAudioData(x,S,k){return c(this._nativeContext,x).then(N=>(typeof S=="function"&&S(N),N),N=>{throw typeof k=="function"&&k(N),N})}},j_={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},O_=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const d=i(c),f={...j_,...u},y=r(d,f),m=o(d),v=m?n():null;super(c,!1,y,v),this._Q=e(this,m,y.Q,Ke,it),this._detune=e(this,m,y.detune,1200*Math.log2(Ke),-1200*Math.log2(Ke)),this._frequency=e(this,m,y.frequency,c.sampleRate/2,0),this._gain=e(this,m,y.gain,40*Math.log10(Ke),it),this._nativeBiquadFilterNode=y,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,d)}catch(f){throw f.code===11?s():f}if(c.length!==u.length||u.length!==d.length)throw s()}},D_=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=Xe(c,l);if(!u){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return i.set(l,c),u?(await t(l,a.Q,c.Q),await t(l,a.detune,c.detune),await t(l,a.frequency,c.frequency),await t(l,a.gain,c.gain)):(await s(l,a.Q,c.Q),await s(l,a.detune,c.detune),await s(l,a.frequency,c.frequency),await s(l,a.gain,c.gain)),await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},R_=(t,e)=>(n,s)=>{const r=e.get(n);if(r!==void 0)return r;const i=t.get(n);if(i!==void 0)return i;try{const o=s();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},P_={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},F_=(t,e,n,s,r)=>class extends t{constructor(o,a){const l=s(o),c={...P_,...a},u=n(l,c),d=r(l)?e():null;super(o,!1,u,d)}},L_=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,c)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},V_={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},z_=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=s(a),u=i({...V_,...l}),d=n(c,u),f=r(c)?e():null;super(a,!1,d,f)}},W_=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,c)}return s.set(o,a),await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},q_=t=>(e,n,s)=>t(n,e,s),B_=t=>(e,n,s=0,r=0)=>{const i=e[s];if(i===void 0)throw t();return ea(n)?i.connect(n,0,r):i.connect(n,0)},U_=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},$_={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},H_=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),d={...$_,...c},f=s(u,d),y=i(u),m=y?n():null;super(l,!1,f,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=f,this._offset=e(this,y,f.offset,Ke,it),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){fr(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),un(this)&&bi(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},G_=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const l=async(c,u)=>{let d=n(c);const f=Xe(d,u);if(!f){const y={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,y),o!==null&&d.start(o),a!==null&&d.stop(a)}return i.set(u,d),f?await t(u,c.offset,d.offset):await s(u,c.offset,d.offset),await r(c,u,d),d};return{set start(c){o=c},set stop(c){a=c},render(c,u){const d=i.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},Q_=t=>e=>(t[0]=e,t[0]),Y_={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},X_=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=s(a),u={...Y_,...l},d=n(c,u),y=r(c)?e():null;super(a,!1,d,y),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},Z_=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,c)}return s.set(o,a),_r(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},K_=(t,e)=>(n,s,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,r)}catch(i){throw i.name==="SyntaxError"?t():i}},J_=()=>new DOMException("","DataCloneError"),Pd=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const r=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>r();try{e.postMessage(t,[t])}catch{}finally{r()}})},e1=(t,e,n,s,r,i,o,a,l,c,u)=>(d,f)=>{const y=o(d)?d:i(d);if(r.has(f)){const m=n();return Promise.reject(m)}try{r.add(f)}catch{}return e(l,()=>l(y))?y.decodeAudioData(f).then(m=>(Pd(f).catch(()=>{}),e(a,()=>a(m))||u(m),t.add(m),m)):new Promise((m,v)=>{const w=async()=>{try{await Pd(f)}catch{}},p=g=>{v(g),w()};try{y.decodeAudioData(f,g=>{typeof g.copyFromChannel!="function"&&(c(g),Au(g)),t.add(g),w().then(()=>m(g))},g=>{p(g===null?s():g)})}catch(g){p(g)}})},t1=(t,e,n,s,r,i,o,a)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=i(l.context),f=a(d);if(u===c){if(e.delete(l),!f&&o(l)){const y=s(l),{outputs:m}=n(l);for(const v of m)if(Ai(v)){const w=s(v[0]);t(y,w,v[1],v[2])}else{const w=r(v[0]);y.connect(w,v[1])}}}else e.set(l,u-c)},n1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},s1=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),d={...n1,...c},f=s(u,d),y=i(u),m=y?n(d.maxDelayTime):null;super(l,!1,f,m),this._delayTime=e(this,y,f.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},r1=(t,e,n,s,r)=>i=>{const o=new WeakMap,a=async(l,c)=>{let u=n(l);const d=Xe(u,c);if(!d){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(c,f)}return o.set(c,u),d?await t(c,l.delayTime,u.delayTime):await s(c,l.delayTime,u.delayTime),await r(l,c,u),u};return{render(l,c){const u=o.get(c);return u!==void 0?Promise.resolve(u):a(l,c)}}},i1=t=>(e,n,s,r)=>t(e[r],i=>i[0]===n&&i[1]===s),o1=t=>(e,n)=>{t(e).delete(n)},a1=t=>"delayTime"in t,l1=(t,e,n)=>function s(r,i){const o=Zo(i)?i:n(t,i);if(a1(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(l=>s([...r,o],l[0])).reduce((l,c)=>l.concat(c),[])},ro=(t,e,n)=>{const s=e[n];if(s===void 0)throw t();return s},c1=t=>(e,n=void 0,s=void 0,r=0)=>n===void 0?e.forEach(i=>i.disconnect()):typeof n=="number"?ro(t,e,n).disconnect():ea(n)?s===void 0?e.forEach(i=>i.disconnect(n)):r===void 0?ro(t,e,s).disconnect(n,0):ro(t,e,s).disconnect(n,0,r):s===void 0?e.forEach(i=>i.disconnect(n)):ro(t,e,s).disconnect(n,0),u1={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},h1=(t,e,n,s,r,i,o,a)=>class extends t{constructor(c,u){const d=i(c),f={...u1,...u},y=s(d,f),m=o(d),v=m?n():null;super(c,!1,y,v),this._attack=e(this,m,y.attack),this._knee=e(this,m,y.knee),this._nativeDynamicsCompressorNode=y,this._ratio=e(this,m,y.ratio),this._release=e(this,m,y.release),this._threshold=e(this,m,y.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},d1=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=Xe(c,l);if(!u){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return i.set(l,c),u?(await t(l,a.attack,c.attack),await t(l,a.knee,c.knee),await t(l,a.ratio,c.ratio),await t(l,a.release,c.release),await t(l,a.threshold,c.threshold)):(await s(l,a.attack,c.attack),await s(l,a.knee,c.knee),await s(l,a.ratio,c.ratio),await s(l,a.release,c.release),await s(l,a.threshold,c.threshold)),await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},f1=()=>new DOMException("","EncodingError"),p1=t=>e=>new Promise((n,s)=>{if(t===null){s(new SyntaxError);return}const r=t.document.head;if(r===null)s(new SyntaxError);else{const i=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(u,d,f,y,m)=>{if(d===a||d===t.location.href&&f===1&&y===1)return c(),s(m),!1;if(l!==null)return l(u,d,f,y,m)},i.onerror=()=>{c(),s(new SyntaxError)},i.onload=()=>{c(),n()},i.src=a,i.type="module",r.appendChild(i)}}),m1=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,r){if(s!==null){let i=this._listeners.get(s);i===void 0&&(i=t(this,s),typeof s=="function"&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(n,i,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,r){const i=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,i===void 0?null:i,r)}},g1=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},y1=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},v1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},_1=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=r(a),u={...v1,...l},d=s(c,u),f=i(c),y=f?n():null;super(a,!1,d,y),this._gain=e(this,f,d.gain,Ke,it)}get gain(){return this._gain}},x1=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=Xe(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return i.set(l,c),u?await t(l,a.gain,c.gain):await s(l,a.gain,c.gain),await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},w1=(t,e)=>n=>e(t,n),S1=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},k1=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},N1=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},C1=t=>e=>t.get(e),Ve=()=>new DOMException("","InvalidStateError"),T1=t=>e=>{const n=t.get(e);if(n===void 0)throw Ve();return n},b1=(t,e)=>n=>{let s=t.get(n);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},E1=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},ba=()=>new DOMException("","InvalidAccessError"),A1=t=>{t.getFrequencyResponse=(e=>(n,s,r)=>{if(n.length!==s.length||s.length!==r.length)throw ba();return e.call(t,n,s,r)})(t.getFrequencyResponse)},M1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},I1=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=s(a),u=r(c),d={...M1,...l},f=e(c,u?null:a.baseLatency,d),y=u?n(d.feedback,d.feedforward):null;super(a,!1,f,y),A1(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},Am=(t,e,n,s,r,i,o,a,l,c,u)=>{const d=c.length;let f=a;for(let y=0;y<d;y+=1){let m=n[0]*c[y];for(let v=1;v<r;v+=1){const w=f-v&l-1;m+=n[v]*i[w],m-=t[v]*o[w]}for(let v=r;v<s;v+=1)m+=n[v]*i[f-v&l-1];for(let v=r;v<e;v+=1)m-=t[v]*o[f-v&l-1];i[f]=c[y],o[f]=m,f=f+1&l-1,u[y]=m}return f},j1=(t,e,n,s)=>{const r=n instanceof Float64Array?n:new Float64Array(n),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,l=Math.min(o,a);if(r[0]!==1){for(let m=0;m<o;m+=1)i[m]/=r[0];for(let m=1;m<a;m+=1)r[m]/=r[0]}const c=32,u=new Float32Array(c),d=new Float32Array(c),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),y=t.numberOfChannels;for(let m=0;m<y;m+=1){const v=t.getChannelData(m),w=f.getChannelData(m);u.fill(0),d.fill(0),Am(r,o,i,a,l,u,d,0,c,v,w)}return f},O1=(t,e,n,s,r)=>(i,o)=>{const a=new WeakMap;let l=null;const c=async(u,d)=>{let f=null,y=e(u);const m=Xe(y,d);if(d.createIIRFilter===void 0?f=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(y=d.createIIRFilter(o,i)),a.set(d,f===null?y:f),f!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const w=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);l=(async()=>{await s(u,w,w.destination);const p=await r(w);return j1(p,d,i,o)})()}const v=await l;return f.buffer=v,f.start(0),f}return await s(u,d,y),y};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):c(u,d)}}},D1=(t,e,n,s,r,i)=>o=>(a,l)=>{const c=t.get(a);if(c===void 0){if(!o&&i(a)){const u=s(a),{outputs:d}=n(a);for(const f of d)if(Ai(f)){const y=s(f[0]);e(u,y,f[1],f[2])}else{const y=r(f[0]);u.disconnect(y,f[1])}}t.set(a,l)}else t.set(a,c+l)},R1=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},P1=(t,e)=>n=>t.has(n)||e(n),F1=(t,e)=>n=>t.has(n)||e(n),L1=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},V1=t=>e=>t!==null&&e instanceof t,z1=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,W1=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,q1=(t,e)=>n=>t(n)||e(n),B1=t=>e=>t!==null&&e instanceof t,U1=t=>t!==null&&t.isSecureContext,$1=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(s(a))throw TypeError();super(i,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},H1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},G1=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i);if(s(a))throw new TypeError;const l={...H1,...o},c=e(a,l);super(i,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Q1=(t,e,n,s)=>class extends t{constructor(i,o){const a=n(i),l=e(a,o);if(s(a))throw new TypeError;super(i,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Y1=(t,e,n)=>class extends t{constructor(r,i){const o=n(r),a=e(o,i);super(r,!0,a,null)}},X1=(t,e,n,s,r,i)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,Ca.set(this,a),s(a)&&r.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},gi=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},Z1=(t,e)=>(n,s,r)=>{const i=new Set;return n.connect=(o=>(a,l=0,c=0)=>{const u=i.size===0;if(e(a))return o.call(n,a,l,c),t(i,[a,l,c],d=>d[0]===a&&d[1]===l&&d[2]===c,!0),u&&s(),a;o.call(n,a,l),t(i,[a,l],d=>d[0]===a&&d[1]===l,!0),u&&s()})(n.connect),n.disconnect=(o=>(a,l,c)=>{const u=i.size>0;if(a===void 0)o.apply(n),i.clear();else if(typeof a=="number"){o.call(n,a);for(const f of i)f[1]===a&&i.delete(f)}else{e(a)?o.call(n,a,l,c):o.call(n,a,l);for(const f of i)f[0]===a&&(l===void 0||f[1]===l)&&(c===void 0||f[2]===c)&&i.delete(f)}const d=i.size===0;u&&d&&r()})(n.disconnect),n},me=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n]&&(t[n]=s)},Pe=(t,e)=>{me(t,e,"channelCount"),me(t,e,"channelCountMode"),me(t,e,"channelInterpretation")},Fd=t=>typeof t.getFloatTimeDomainData=="function",K1=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let r=0;r<s;r+=1)e[r]=(n[r]-128)*.0078125;return e}},J1=(t,e)=>(n,s)=>{const r=n.createAnalyser();if(Pe(r,s),!(s.maxDecibels>s.minDecibels))throw e();return me(r,s,"fftSize"),me(r,s,"maxDecibels"),me(r,s,"minDecibels"),me(r,s,"smoothingTimeConstant"),t(Fd,()=>Fd(r))||K1(r),r},ex=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Ce=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n].value&&(t[n].value=s)},tx=t=>{t.start=(e=>{let n=!1;return(s=0,r=0,i)=>{if(n)throw Ve();e.call(t,s,r,i),n=!0}})(t.start)},ju=t=>{t.start=(e=>(n=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,r)})(t.start)},Ou=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},nx=(t,e,n,s,r,i,o,a,l,c,u)=>(d,f)=>{const y=d.createBufferSource();return Pe(y,f),Ce(y,f,"playbackRate"),me(y,f,"buffer"),me(y,f,"loop"),me(y,f,"loopEnd"),me(y,f,"loopStart"),e(n,()=>n(d))||tx(y),e(s,()=>s(d))||l(y),e(r,()=>r(d))||c(y,d),e(i,()=>i(d))||ju(y),e(o,()=>o(d))||u(y,d),e(a,()=>a(d))||Ou(y),t(d,y),y},sx=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,rx=(t,e)=>(n,s,r)=>{const i=n.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=t(n,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>l=>{a.call(o,l);try{i.channelCount=l}catch(c){if(l>i.maxChannelCount)throw c}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelCountMode=l}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>l=>{a.call(o,l),i.channelInterpretation=l}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o},ix=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,ox=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},ax=(t,e,n,s,r)=>(i,o,a,l,c,u)=>{if(a!==null)try{const d=new a(i,l,u),f=new Map;let y=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>y,set:m=>{typeof y=="function"&&d.removeEventListener("processorerror",y),y=typeof m=="function"?m:null,typeof y=="function"&&d.addEventListener("processorerror",y)}}}),d.addEventListener=(m=>(...v)=>{if(v[0]==="processorerror"){const w=typeof v[1]=="function"?v[1]:typeof v[1]=="object"&&v[1]!==null&&typeof v[1].handleEvent=="function"?v[1].handleEvent:null;if(w!==null){const p=f.get(v[1]);p!==void 0?v[1]=p:(v[1]=g=>{g.type==="error"?(Object.defineProperties(g,{type:{value:"processorerror"}}),w(g)):w(new ErrorEvent(v[0],{...g}))},f.set(w,v[1]))}}return m.call(d,"error",v[1],v[2]),m.call(d,...v)})(d.addEventListener),d.removeEventListener=(m=>(...v)=>{if(v[0]==="processorerror"){const w=f.get(v[1]);w!==void 0&&(f.delete(v[1]),v[1]=w)}return m.call(d,"error",v[1],v[2]),m.call(d,v[0],v[1],v[2])})(d.removeEventListener),u.numberOfOutputs!==0){const m=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(m).connect(i.destination),r(d,()=>m.disconnect(),()=>m.connect(i.destination))}return d}catch(d){throw d.code===11?s():d}if(c===void 0)throw s();return ox(u),e(i,o,c,u)},Mm=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),lx=t=>new Promise((e,n)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),n(i)},r.postMessage(t)}),cx=async(t,e)=>{const n=await lx(e);return new t(n)},ux=(t,e,n,s)=>{let r=wc.get(t);r===void 0&&(r=new WeakMap,wc.set(t,r));const i=cx(n,s);return r.set(e,i),i},hx=(t,e,n,s,r,i,o,a,l,c,u,d,f)=>(y,m,v,w)=>{if(w.numberOfInputs===0&&w.numberOfOutputs===0)throw l();const p=Array.isArray(w.outputChannelCount)?w.outputChannelCount:Array.from(w.outputChannelCount);if(p.some(W=>W<1))throw l();if(p.length!==w.numberOfOutputs)throw e();if(w.channelCountMode!=="explicit")throw l();const g=w.channelCount*w.numberOfInputs,_=p.reduce((W,G)=>W+G,0),C=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length;if(g+C>6||_>6)throw l();const x=new MessageChannel,S=[],k=[];for(let W=0;W<w.numberOfInputs;W+=1)S.push(o(y,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),k.push(r(y,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const N=[];if(v.parameterDescriptors!==void 0)for(const{defaultValue:W,maxValue:G,minValue:Oe,name:ye}of v.parameterDescriptors){const se=i(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:w.parameterData[ye]!==void 0?w.parameterData[ye]:W===void 0?0:W});Object.defineProperties(se.offset,{defaultValue:{get:()=>W===void 0?0:W},maxValue:{get:()=>G===void 0?Ke:G},minValue:{get:()=>Oe===void 0?it:Oe}}),N.push(se)}const A=s(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,g+C)}),T=Mm(m,y.sampleRate),M=a(y,T,g+C,Math.max(1,_)),E=r(y,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),F=[];for(let W=0;W<w.numberOfOutputs;W+=1)F.push(s(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:p[W]}));for(let W=0;W<w.numberOfInputs;W+=1){S[W].connect(k[W]);for(let G=0;G<w.channelCount;G+=1)k[W].connect(A,G,W*w.channelCount+G)}const b=new bm(v.parameterDescriptors===void 0?[]:v.parameterDescriptors.map(({name:W},G)=>{const Oe=N[G];return Oe.connect(A,0,g+G),Oe.start(0),[W,Oe.offset]}));A.connect(M);let P=w.channelInterpretation,L=null;const z=w.numberOfOutputs===0?[M]:F,I={get bufferSize(){return T},get channelCount(){return w.channelCount},set channelCount(W){throw n()},get channelCountMode(){return w.channelCountMode},set channelCountMode(W){throw n()},get channelInterpretation(){return P},set channelInterpretation(W){for(const G of S)G.channelInterpretation=W;P=W},get context(){return M.context},get inputs(){return S},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get onprocessorerror(){return L},set onprocessorerror(W){typeof L=="function"&&I.removeEventListener("processorerror",L),L=typeof W=="function"?W:null,typeof L=="function"&&I.addEventListener("processorerror",L)},get parameters(){return b},get port(){return x.port2},addEventListener(...W){return M.addEventListener(W[0],W[1],W[2])},connect:t.bind(null,z),disconnect:c.bind(null,z),dispatchEvent(...W){return M.dispatchEvent(W[0])},removeEventListener(...W){return M.removeEventListener(W[0],W[1],W[2])}},O=new Map;x.port1.addEventListener=(W=>(...G)=>{if(G[0]==="message"){const Oe=typeof G[1]=="function"?G[1]:typeof G[1]=="object"&&G[1]!==null&&typeof G[1].handleEvent=="function"?G[1].handleEvent:null;if(Oe!==null){const ye=O.get(G[1]);ye!==void 0?G[1]=ye:(G[1]=se=>{u(y.currentTime,y.sampleRate,()=>Oe(se))},O.set(Oe,G[1]))}}return W.call(x.port1,G[0],G[1],G[2])})(x.port1.addEventListener),x.port1.removeEventListener=(W=>(...G)=>{if(G[0]==="message"){const Oe=O.get(G[1]);Oe!==void 0&&(O.delete(G[1]),G[1]=Oe)}return W.call(x.port1,G[0],G[1],G[2])})(x.port1.removeEventListener);let R=null;Object.defineProperty(x.port1,"onmessage",{get:()=>R,set:W=>{typeof R=="function"&&x.port1.removeEventListener("message",R),R=typeof W=="function"?W:null,typeof R=="function"&&(x.port1.addEventListener("message",R),x.port1.start())}}),v.prototype.port=x.port1;let j=null;ux(y,I,v,w).then(W=>j=W);const Q=na(w.numberOfInputs,w.channelCount),te=na(w.numberOfOutputs,p),$=v.parameterDescriptors===void 0?[]:v.parameterDescriptors.reduce((W,{name:G})=>({...W,[G]:new Float32Array(128)}),{});let J=!0;const Se=()=>{w.numberOfOutputs>0&&M.disconnect(E);for(let W=0,G=0;W<w.numberOfOutputs;W+=1){const Oe=F[W];for(let ye=0;ye<p[W];ye+=1)E.disconnect(Oe,G+ye,ye);G+=p[W]}},B=new Map;M.onaudioprocess=({inputBuffer:W,outputBuffer:G})=>{if(j!==null){const Oe=d(I);for(let ye=0;ye<T;ye+=128){for(let se=0;se<w.numberOfInputs;se+=1)for(let ke=0;ke<w.channelCount;ke+=1)ta(W,Q[se],ke,ke,ye);v.parameterDescriptors!==void 0&&v.parameterDescriptors.forEach(({name:se},ke)=>{ta(W,$,se,g+ke,ye)});for(let se=0;se<w.numberOfInputs;se+=1)for(let ke=0;ke<p[se];ke+=1)te[se][ke].byteLength===0&&(te[se][ke]=new Float32Array(128));try{const se=Q.map((xt,xn)=>{if(Oe[xn].size>0)return B.set(xn,T/128),xt;const qa=B.get(xn);return qa===void 0?[]:(xt.every(wg=>wg.every(Sg=>Sg===0))&&(qa===1?B.delete(xn):B.set(xn,qa-1)),xt)});J=u(y.currentTime+ye/y.sampleRate,y.sampleRate,()=>j.process(se,te,$));for(let xt=0,xn=0;xt<w.numberOfOutputs;xt+=1){for(let Cr=0;Cr<p[xt];Cr+=1)Em(G,te[xt],Cr,xn+Cr,ye);xn+=p[xt]}}catch(se){J=!1,I.dispatchEvent(new ErrorEvent("processorerror",{colno:se.colno,filename:se.filename,lineno:se.lineno,message:se.message}))}if(!J){for(let se=0;se<w.numberOfInputs;se+=1){S[se].disconnect(k[se]);for(let ke=0;ke<w.channelCount;ke+=1)k[ye].disconnect(A,ke,se*w.channelCount+ke)}if(v.parameterDescriptors!==void 0){const se=v.parameterDescriptors.length;for(let ke=0;ke<se;ke+=1){const xt=N[ke];xt.disconnect(A,0,g+ke),xt.stop()}}A.disconnect(M),M.onaudioprocess=null,ns?Se():Is();break}}}};let ns=!1;const ss=o(y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ms=()=>M.connect(ss).connect(y.destination),Is=()=>{M.disconnect(ss),ss.disconnect()},_g=()=>{if(J){Is(),w.numberOfOutputs>0&&M.connect(E);for(let W=0,G=0;W<w.numberOfOutputs;W+=1){const Oe=F[W];for(let ye=0;ye<p[W];ye+=1)E.connect(Oe,G+ye,ye);G+=p[W]}}ns=!0},xg=()=>{J&&(Ms(),Se()),ns=!1};return Ms(),f(I,_g,xg)},Im=(t,e)=>{const n=t.createBiquadFilter();return Pe(n,e),Ce(n,e,"Q"),Ce(n,e,"detune"),Ce(n,e,"frequency"),Ce(n,e,"gain"),me(n,e,"type"),n},dx=(t,e)=>(n,s)=>{const r=n.createChannelMerger(s.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,r),Pe(r,s),r},fx=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Ve()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Ve()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Ve()}})},Mi=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Pe(n,e),fx(n),n},px=(t,e,n,s,r)=>(i,o)=>{if(i.createConstantSource===void 0)return n(i,o);const a=i.createConstantSource();return Pe(a,o),Ce(a,o,"offset"),e(s,()=>s(i))||ju(a),e(r,()=>r(i))||Ou(a),t(i,a),a},xr=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),mx=(t,e,n,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),l=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(r,{...o,gain:i}),u=a.getChannelData(0);u[0]=1,u[1]=1,l.buffer=a,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(m){c.channelCount=m},get channelCountMode(){return c.channelCountMode},set channelCountMode(m){c.channelCountMode=m},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(m){c.channelInterpretation=m},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(m){l.onended=m},addEventListener(...m){return l.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return l.dispatchEvent(m[0])},removeEventListener(...m){return l.removeEventListener(m[0],m[1],m[2])},start(m=0){l.start.call(l,m)},stop(m=0){l.stop.call(l,m)}},f=()=>l.connect(c),y=()=>l.disconnect(c);return t(r,l),s(xr(d,c),f,y)},gx=(t,e)=>(n,s)=>{const r=n.createConvolver();if(Pe(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),me(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw t();return i.call(r,o)}),s.channelCountMode==="max"))throw t();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if(o==="max")throw t();return i.call(r,o)}),r},jm=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Pe(n,e),Ce(n,e,"delayTime"),n},yx=t=>(e,n)=>{const s=e.createDynamicsCompressor();if(Pe(s,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Ce(s,n,"attack"),Ce(s,n,"knee"),Ce(s,n,"ratio"),Ce(s,n,"release"),Ce(s,n,"threshold"),s},ht=(t,e)=>{const n=t.createGain();return Pe(n,e),Ce(n,e,"gain"),n},vx=t=>(e,n,s)=>{if(e.createIIRFilter===void 0)return t(e,n,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return Pe(r,s),r};function _x(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function xx(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function Ld(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=xx(n,e),n[0]+=t[s];return n}const wx=(t,e,n,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=Mm(i,r.sampleRate),f=c instanceof Float64Array?c:new Float64Array(c),y=u instanceof Float64Array?u:new Float64Array(u),m=f.length,v=y.length,w=Math.min(m,v);if(m===0||m>20)throw s();if(f[0]===0)throw e();if(v===0||v>20)throw s();if(y[0]===0)throw e();if(f[0]!==1){for(let N=0;N<v;N+=1)y[N]/=f[0];for(let N=1;N<m;N+=1)f[N]/=f[0]}const p=n(r,d,o,o);p.channelCount=o,p.channelCountMode=a,p.channelInterpretation=l;const g=32,_=[],C=[],x=[];for(let N=0;N<o;N+=1){_.push(0);const A=new Float32Array(g),T=new Float32Array(g);A.fill(0),T.fill(0),C.push(A),x.push(T)}p.onaudioprocess=N=>{const A=N.inputBuffer,T=N.outputBuffer,M=A.numberOfChannels;for(let E=0;E<M;E+=1){const F=A.getChannelData(E),b=T.getChannelData(E);_[E]=Am(f,m,y,v,w,C[E],x[E],_[E],g,F,b)}};const S=r.sampleRate/2;return xr({get bufferSize(){return d},get channelCount(){return p.channelCount},set channelCount(N){p.channelCount=N},get channelCountMode(){return p.channelCountMode},set channelCountMode(N){p.channelCountMode=N},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(N){p.channelInterpretation=N},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},addEventListener(...N){return p.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return p.dispatchEvent(N[0])},getFrequencyResponse(N,A,T){if(N.length!==A.length||A.length!==T.length)throw t();const M=N.length;for(let E=0;E<M;E+=1){const F=-Math.PI*(N[E]/S),b=[Math.cos(F),Math.sin(F)],P=Ld(y,b),L=Ld(f,b),z=_x(P,L);A[E]=Math.sqrt(z[0]*z[0]+z[1]*z[1]),T[E]=Math.atan2(z[1],z[0])}},removeEventListener(...N){return p.removeEventListener(N[0],N[1],N[2])}},p)},Sx=(t,e)=>t.createMediaElementSource(e.mediaElement),kx=(t,e)=>{const n=t.createMediaStreamDestination();return Pe(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Nx=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r},Cx=(t,e)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=n.createMediaStreamSource(r);if(s.kind!=="audio")throw t();if(e(n))throw new TypeError;return i},Tx=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,bx=(t,e,n,s,r,i)=>(o,a)=>{const l=o.createOscillator();return Pe(l,a),Ce(l,a,"detune"),Ce(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):me(l,a,"type"),e(n,()=>n(o))||ju(l),e(s,()=>s(o))||i(l,o),e(r,()=>r(o))||Ou(l),t(o,l),l},Ex=t=>(e,n)=>{const s=e.createPanner();return s.orientationX===void 0?t(e,n):(Pe(s,n),Ce(s,n,"orientationX"),Ce(s,n,"orientationY"),Ce(s,n,"orientationZ"),Ce(s,n,"positionX"),Ce(s,n,"positionY"),Ce(s,n,"positionZ"),me(s,n,"coneInnerAngle"),me(s,n,"coneOuterAngle"),me(s,n,"coneOuterGain"),me(s,n,"distanceModel"),me(s,n,"maxDistance"),me(s,n,"panningModel"),me(s,n,"refDistance"),me(s,n,"rolloffFactor"),s)},Ax=(t,e,n,s,r,i,o,a,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:f,coneOuterGain:y,distanceModel:m,maxDistance:v,orientationX:w,orientationY:p,orientationZ:g,panningModel:_,positionX:C,positionY:x,positionZ:S,refDistance:k,rolloffFactor:N,...A})=>{const T=u.createPanner();if(A.channelCount>2||A.channelCountMode==="max")throw o();Pe(T,A);const M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=n(u,{...M,channelInterpretation:"speakers",numberOfInputs:6}),F=s(u,{...A,gain:1}),b=s(u,{...M,gain:1}),P=s(u,{...M,gain:0}),L=s(u,{...M,gain:0}),z=s(u,{...M,gain:0}),I=s(u,{...M,gain:0}),O=s(u,{...M,gain:0}),R=r(u,256,6,1),j=i(u,{...M,curve:new Float32Array([1,1]),oversample:"none"});let V=[w,p,g],Q=[C,x,S];const te=new Float32Array(1);R.onaudioprocess=({inputBuffer:B})=>{const ns=[l(B,te,0),l(B,te,1),l(B,te,2)];ns.some((Ms,Is)=>Ms!==V[Is])&&(T.setOrientation(...ns),V=ns);const ss=[l(B,te,3),l(B,te,4),l(B,te,5)];ss.some((Ms,Is)=>Ms!==Q[Is])&&(T.setPosition(...ss),Q=ss)},Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0});const $={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(B){if(B>2)throw o();F.channelCount=B,T.channelCount=B},get channelCountMode(){return T.channelCountMode},set channelCountMode(B){if(B==="max")throw o();F.channelCountMode=B,T.channelCountMode=B},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(B){F.channelInterpretation=B,T.channelInterpretation=B},get coneInnerAngle(){return T.coneInnerAngle},set coneInnerAngle(B){T.coneInnerAngle=B},get coneOuterAngle(){return T.coneOuterAngle},set coneOuterAngle(B){T.coneOuterAngle=B},get coneOuterGain(){return T.coneOuterGain},set coneOuterGain(B){if(B<0||B>1)throw e();T.coneOuterGain=B},get context(){return T.context},get distanceModel(){return T.distanceModel},set distanceModel(B){T.distanceModel=B},get inputs(){return[F]},get maxDistance(){return T.maxDistance},set maxDistance(B){if(B<0)throw new RangeError;T.maxDistance=B},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get orientationX(){return b.gain},get orientationY(){return P.gain},get orientationZ(){return L.gain},get panningModel(){return T.panningModel},set panningModel(B){T.panningModel=B},get positionX(){return z.gain},get positionY(){return I.gain},get positionZ(){return O.gain},get refDistance(){return T.refDistance},set refDistance(B){if(B<0)throw new RangeError;T.refDistance=B},get rolloffFactor(){return T.rolloffFactor},set rolloffFactor(B){if(B<0)throw new RangeError;T.rolloffFactor=B},addEventListener(...B){return F.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return F.dispatchEvent(B[0])},removeEventListener(...B){return F.removeEventListener(B[0],B[1],B[2])}};d!==$.coneInnerAngle&&($.coneInnerAngle=d),f!==$.coneOuterAngle&&($.coneOuterAngle=f),y!==$.coneOuterGain&&($.coneOuterGain=y),m!==$.distanceModel&&($.distanceModel=m),v!==$.maxDistance&&($.maxDistance=v),w!==$.orientationX.value&&($.orientationX.value=w),p!==$.orientationY.value&&($.orientationY.value=p),g!==$.orientationZ.value&&($.orientationZ.value=g),_!==$.panningModel&&($.panningModel=_),C!==$.positionX.value&&($.positionX.value=C),x!==$.positionY.value&&($.positionY.value=x),S!==$.positionZ.value&&($.positionZ.value=S),k!==$.refDistance&&($.refDistance=k),N!==$.rolloffFactor&&($.rolloffFactor=N),(V[0]!==1||V[1]!==0||V[2]!==0)&&T.setOrientation(...V),(Q[0]!==0||Q[1]!==0||Q[2]!==0)&&T.setPosition(...Q);const J=()=>{F.connect(T),t(F,j,0,0),j.connect(b).connect(E,0,0),j.connect(P).connect(E,0,1),j.connect(L).connect(E,0,2),j.connect(z).connect(E,0,3),j.connect(I).connect(E,0,4),j.connect(O).connect(E,0,5),E.connect(R).connect(u.destination)},Se=()=>{F.disconnect(T),a(F,j,0,0),j.disconnect(b),b.disconnect(E),j.disconnect(P),P.disconnect(E),j.disconnect(L),L.disconnect(E),j.disconnect(z),z.disconnect(E),j.disconnect(I),I.disconnect(E),j.disconnect(O),O.disconnect(E),E.disconnect(R),R.disconnect(u.destination)};return c(xr($,T),J,Se)},Mx=t=>(e,{disableNormalization:n,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:n});if(Array.from(s).length<2)throw t();return a},Ii=(t,e,n,s)=>t.createScriptProcessor(e,n,s),Ix=(t,e)=>(n,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,s);const i=n.createStereoPanner();return Pe(i,s),Ce(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i},jx=(t,e,n,s,r,i)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(m,v,w,p)=>{const g=new Float32Array(16385),_=new Float32Array(16385);for(let A=0;A<16385;A+=1){const T=A/16384*l;g[A]=Math.cos(T),_[A]=Math.sin(T)}const C=n(m,{...c,gain:0}),x=s(m,{...u,curve:g}),S=s(m,{...u,curve:a}),k=n(m,{...c,gain:0}),N=s(m,{...u,curve:_});return{connectGraph(){v.connect(C),v.connect(S.inputs===void 0?S:S.inputs[0]),v.connect(k),S.connect(w),w.connect(x.inputs===void 0?x:x.inputs[0]),w.connect(N.inputs===void 0?N:N.inputs[0]),x.connect(C.gain),N.connect(k.gain),C.connect(p,0,0),k.connect(p,0,1)},disconnectGraph(){v.disconnect(C),v.disconnect(S.inputs===void 0?S:S.inputs[0]),v.disconnect(k),S.disconnect(w),w.disconnect(x.inputs===void 0?x:x.inputs[0]),w.disconnect(N.inputs===void 0?N:N.inputs[0]),x.disconnect(C.gain),N.disconnect(k.gain),C.disconnect(p,0,0),k.disconnect(p,0,1)}}},f=(m,v,w,p)=>{const g=new Float32Array(16385),_=new Float32Array(16385),C=new Float32Array(16385),x=new Float32Array(16385),S=Math.floor(16385/2);for(let z=0;z<16385;z+=1)if(z>S){const I=(z-S)/(16384-S)*l;g[z]=Math.cos(I),_[z]=Math.sin(I),C[z]=0,x[z]=1}else{const I=z/(16384-S)*l;g[z]=1,_[z]=0,C[z]=Math.cos(I),x[z]=Math.sin(I)}const k=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),N=n(m,{...c,gain:0}),A=s(m,{...u,curve:g}),T=n(m,{...c,gain:0}),M=s(m,{...u,curve:_}),E=s(m,{...u,curve:a}),F=n(m,{...c,gain:0}),b=s(m,{...u,curve:C}),P=n(m,{...c,gain:0}),L=s(m,{...u,curve:x});return{connectGraph(){v.connect(k),v.connect(E.inputs===void 0?E:E.inputs[0]),k.connect(N,0),k.connect(T,0),k.connect(F,1),k.connect(P,1),E.connect(w),w.connect(A.inputs===void 0?A:A.inputs[0]),w.connect(M.inputs===void 0?M:M.inputs[0]),w.connect(b.inputs===void 0?b:b.inputs[0]),w.connect(L.inputs===void 0?L:L.inputs[0]),A.connect(N.gain),M.connect(T.gain),b.connect(F.gain),L.connect(P.gain),N.connect(p,0,0),F.connect(p,0,0),T.connect(p,0,1),P.connect(p,0,1)},disconnectGraph(){v.disconnect(k),v.disconnect(E.inputs===void 0?E:E.inputs[0]),k.disconnect(N,0),k.disconnect(T,0),k.disconnect(F,1),k.disconnect(P,1),E.disconnect(w),w.disconnect(A.inputs===void 0?A:A.inputs[0]),w.disconnect(M.inputs===void 0?M:M.inputs[0]),w.disconnect(b.inputs===void 0?b:b.inputs[0]),w.disconnect(L.inputs===void 0?L:L.inputs[0]),A.disconnect(N.gain),M.disconnect(T.gain),b.disconnect(F.gain),L.disconnect(P.gain),N.disconnect(p,0,0),F.disconnect(p,0,0),T.disconnect(p,0,1),P.disconnect(p,0,1)}}},y=(m,v,w,p,g)=>{if(v===1)return d(m,w,p,g);if(v===2)return f(m,w,p,g);throw r()};return(m,{channelCount:v,channelCountMode:w,pan:p,...g})=>{if(w==="max")throw r();const _=t(m,{...g,channelCount:1,channelCountMode:w,numberOfInputs:2}),C=n(m,{...g,channelCount:v,channelCountMode:w,gain:1}),x=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:p});let{connectGraph:S,disconnectGraph:k}=y(m,v,C,x,_);Object.defineProperty(x.gain,"defaultValue",{get:()=>0}),Object.defineProperty(x.gain,"maxValue",{get:()=>1}),Object.defineProperty(x.gain,"minValue",{get:()=>-1});const N={get bufferSize(){},get channelCount(){return C.channelCount},set channelCount(E){C.channelCount!==E&&(A&&k(),{connectGraph:S,disconnectGraph:k}=y(m,E,C,x,_),A&&S()),C.channelCount=E},get channelCountMode(){return C.channelCountMode},set channelCountMode(E){if(E==="clamped-max"||E==="max")throw r();C.channelCountMode=E},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(E){C.channelInterpretation=E},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get pan(){return x.gain},addEventListener(...E){return C.addEventListener(E[0],E[1],E[2])},dispatchEvent(...E){return C.dispatchEvent(E[0])},removeEventListener(...E){return C.removeEventListener(E[0],E[1],E[2])}};let A=!1;const T=()=>{S(),A=!0},M=()=>{k(),A=!1};return i(xr(N,_),T,M)}},Ox=(t,e,n,s,r,i,o)=>(a,l)=>{const c=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);Pe(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();me(c,{curve:u},"curve"),me(c,l,"oversample");let d=null,f=!1;return o(c,"curve",v=>()=>v.call(c),v=>w=>(v.call(c,w),f&&(s(w)&&d===null?d=t(a,c):!s(w)&&d!==null&&(d(),d=null)),w)),r(c,()=>{f=!0,s(c.curve)&&(d=t(a,c))},()=>{f=!1,d!==null&&(d(),d=null)})},Dx=(t,e,n,s,r)=>(i,{curve:o,oversample:a,...l})=>{const c=i.createWaveShaper(),u=i.createWaveShaper();Pe(c,l),Pe(u,l);const d=n(i,{...l,gain:1}),f=n(i,{...l,gain:-1}),y=n(i,{...l,gain:1}),m=n(i,{...l,gain:-1});let v=null,w=!1,p=null;const g={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(x){d.channelCount=x,f.channelCount=x,c.channelCount=x,y.channelCount=x,u.channelCount=x,m.channelCount=x},get channelCountMode(){return c.channelCountMode},set channelCountMode(x){d.channelCountMode=x,f.channelCountMode=x,c.channelCountMode=x,y.channelCountMode=x,u.channelCountMode=x,m.channelCountMode=x},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(x){d.channelInterpretation=x,f.channelInterpretation=x,c.channelInterpretation=x,y.channelInterpretation=x,u.channelInterpretation=x,m.channelInterpretation=x},get context(){return c.context},get curve(){return p},set curve(x){if(x!==null&&x.length<2)throw e();if(x===null)c.curve=x,u.curve=x;else{const S=x.length,k=new Float32Array(S+2-S%2),N=new Float32Array(S+2-S%2);k[0]=x[0],N[0]=-x[S-1];const A=Math.ceil((S+1)/2),T=(S+1)/2-1;for(let M=1;M<A;M+=1){const E=M/A*T,F=Math.floor(E),b=Math.ceil(E);k[M]=F===b?x[F]:(1-(E-F))*x[F]+(1-(b-E))*x[b],N[M]=F===b?-x[S-1-F]:-((1-(E-F))*x[S-1-F])-(1-(b-E))*x[S-1-b]}k[A]=S%2===1?x[A-1]:(x[A-2]+x[A-1])/2,c.curve=k,u.curve=N}p=x,w&&(s(p)&&v===null?v=t(i,d):v!==null&&(v(),v=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(x){c.oversample=x,u.oversample=x},addEventListener(...x){return d.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return d.dispatchEvent(x[0])},removeEventListener(...x){return d.removeEventListener(x[0],x[1],x[2])}};o!==null&&(g.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==g.oversample&&(g.oversample=a);const _=()=>{d.connect(c).connect(y),d.connect(f).connect(u).connect(m).connect(y),w=!0,s(p)&&(v=t(i,d))},C=()=>{d.disconnect(c),c.disconnect(y),d.disconnect(f),f.disconnect(u),u.disconnect(m),m.disconnect(y),w=!1,v!==null&&(v(),v=null)};return r(xr(g,y),_,C)},st=()=>new DOMException("","NotSupportedError"),Rx={numberOfChannels:1},Px=(t,e,n,s,r)=>class extends t{constructor(o,a,l){let c;if(typeof o=="number"&&a!==void 0&&l!==void 0)c={length:a,numberOfChannels:o,sampleRate:l};else if(typeof o=="object")c=o;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:d,sampleRate:f}={...Rx,...c},y=s(d,u,f);e(gi,()=>gi(y))||y.addEventListener("statechange",(()=>{let m=0;const v=w=>{this._state==="running"&&(m>0?(y.removeEventListener("statechange",v),w.stopImmediatePropagation(),this._waitForThePromiseToSettle(w)):m+=1)};return v})()),super(y,d),this._length=u,this._nativeOfflineAudioContext=y,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,km(this)}))}_waitForThePromiseToSettle(o){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}},Fx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Lx=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),d={...Fx,...c},f=n(u,d),y=i(u),m=y?s():null,v=l.sampleRate/2;super(l,!1,f,m),this._detune=e(this,y,f.detune,153600,-153600),this._frequency=e(this,y,f.frequency,v,-v),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?o(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){fr(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),un(this)&&bi(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},Vx=(t,e,n,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,l=null;const c=async(u,d)=>{let f=n(u);const y=Xe(f,d);if(!y){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=e(d,m),a!==null&&f.start(a),l!==null&&f.stop(l)}return i.set(d,f),y?(await t(d,u.detune,f.detune),await t(d,u.frequency,f.frequency)):(await s(d,u.detune,f.detune),await s(d,u.frequency,f.frequency)),await r(u,d,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){l=u},render(u,d){const f=i.get(d);return f!==void 0?Promise.resolve(f):c(u,d)}}},zx={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Wx=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),d={...zx,...c},f=n(u,d),y=i(u),m=y?s():null;super(l,!1,f,m),this._nativePannerNode=f,this._orientationX=e(this,y,f.orientationX,Ke,it),this._orientationY=e(this,y,f.orientationY,Ke,it),this._orientationZ=e(this,y,f.orientationZ,Ke,it),this._positionX=e(this,y,f.positionX,Ke,it),this._positionY=e(this,y,f.positionY,Ke,it),this._positionZ=e(this,y,f.positionZ,Ke,it),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},qx=(t,e,n,s,r,i,o,a,l,c)=>()=>{const u=new WeakMap;let d=null;const f=async(y,m)=>{let v=null,w=i(y);const p={channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation},g={...p,coneInnerAngle:w.coneInnerAngle,coneOuterAngle:w.coneOuterAngle,coneOuterGain:w.coneOuterGain,distanceModel:w.distanceModel,maxDistance:w.maxDistance,panningModel:w.panningModel,refDistance:w.refDistance,rolloffFactor:w.rolloffFactor},_=Xe(w,m);if("bufferSize"in w)v=s(m,{...p,gain:1});else if(!_){const C={...g,orientationX:w.orientationX.value,orientationY:w.orientationY.value,orientationZ:w.orientationZ.value,positionX:w.positionX.value,positionY:w.positionY.value,positionZ:w.positionZ.value};w=r(m,C)}if(u.set(m,v===null?w:v),v!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const M=new o(6,y.context.length,m.sampleRate),E=e(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});E.connect(M.destination),d=(async()=>{const F=await Promise.all([y.orientationX,y.orientationY,y.orientationZ,y.positionX,y.positionY,y.positionZ].map(async(b,P)=>{const L=n(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:P===0?1:0});return await a(M,b,L.offset),L}));for(let b=0;b<6;b+=1)F[b].connect(E,0,b),F[b].start(0);return c(M)})()}const C=await d,x=s(m,{...p,gain:1});await l(y,m,x);const S=[];for(let M=0;M<C.numberOfChannels;M+=1)S.push(C.getChannelData(M));let k=[S[0][0],S[1][0],S[2][0]],N=[S[3][0],S[4][0],S[5][0]],A=s(m,{...p,gain:1}),T=r(m,{...g,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:N[0],positionY:N[1],positionZ:N[2]});x.connect(A).connect(T.inputs[0]),T.connect(v);for(let M=128;M<C.length;M+=128){const E=[S[0][M],S[1][M],S[2][M]],F=[S[3][M],S[4][M],S[5][M]];if(E.some((b,P)=>b!==k[P])||F.some((b,P)=>b!==N[P])){k=E,N=F;const b=M/m.sampleRate;A.gain.setValueAtTime(0,b),A=s(m,{...p,gain:0}),T=r(m,{...g,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:N[0],positionY:N[1],positionZ:N[2]}),A.gain.setValueAtTime(1,b),x.connect(A).connect(T.inputs[0]),T.connect(v)}}return v}return _?(await t(m,y.orientationX,w.orientationX),await t(m,y.orientationY,w.orientationY),await t(m,y.orientationZ,w.orientationZ),await t(m,y.positionX,w.positionX),await t(m,y.positionY,w.positionY),await t(m,y.positionZ,w.positionZ)):(await a(m,y.orientationX,w.orientationX),await a(m,y.orientationY,w.orientationY),await a(m,y.orientationZ,w.orientationZ),await a(m,y.positionX,w.positionX),await a(m,y.positionY,w.positionY),await a(m,y.positionZ,w.positionZ)),_r(w)?await l(y,m,w.inputs[0]):await l(y,m,w),w};return{render(y,m){const v=u.get(m);return v!==void 0?Promise.resolve(v):f(y,m)}}},Bx={disableNormalization:!1},Ux=(t,e,n,s)=>class Om{constructor(i,o){const a=e(i),l=s({...Bx,...o}),c=t(a,l);return n.add(c),c}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Om.prototype||n.has(i)}},$x=(t,e)=>(n,s,r)=>(t(s).replay(r),e(s,n,r)),Hx=(t,e,n)=>async(s,r,i)=>{const o=t(s);await Promise.all(o.activeInputs.map((a,l)=>Array.from(a).map(async([c,u])=>{const f=await e(c).render(c,r),y=s.context.destination;!n(c)&&(s!==y||!n(s))&&f.connect(i,u,l)})).reduce((a,l)=>[...a,...l],[]))},Gx=(t,e,n)=>async(s,r,i)=>{const o=e(s);await Promise.all(Array.from(o.activeInputs).map(async([a,l])=>{const u=await t(a).render(a,r);n(a)||u.connect(i,l)}))},Qx=(t,e,n,s)=>r=>t(gi,()=>gi(r))?Promise.resolve(t(s,s)).then(i=>{if(!i){const o=n(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}),Yx=t=>(e,n)=>{t.set(e,n)},Xx=t=>(e,n)=>t.set(e,n),Zx=(t,e,n,s,r,i,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(s(c)).map(u=>n(u).render(u,c)))).then(()=>r(c)).then(u=>(typeof u.copyFromChannel!="function"?(o(u),Au(u)):e(i,()=>i(u))||a(u),t.add(u),u)),Kx={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Jx=(t,e,n,s,r,i)=>class extends t{constructor(a,l){const c=r(a),u={...Kx,...l},d=n(c,u),f=i(c),y=f?s():null;super(a,!1,d,y),this._pan=e(this,f,d.pan)}get pan(){return this._pan}},ew=(t,e,n,s,r)=>()=>{const i=new WeakMap,o=async(a,l)=>{let c=n(a);const u=Xe(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return i.set(l,c),u?await t(l,a.pan,c.pan):await s(l,a.pan,c.pan),_r(c)?await r(a,l,c.inputs[0]):await r(a,l,c),c};return{render(a,l){const c=i.get(l);return c!==void 0?Promise.resolve(c):o(a,l)}}},tw=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},nw=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(n);let i=!1,o=!1;try{await s.audioWorklet.addModule(r);const a=new t(s,"a",{numberOfOutputs:0}),l=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,l.connect(a),l.start(0),await s.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(r)}return i&&!o},sw=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{s.disconnect(),r(n.currentTime!==0)},n.startRendering()})},rw=()=>new DOMException("","UnknownError"),iw={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ow=(t,e,n,s,r,i,o)=>class extends t{constructor(l,c){const u=r(l),d={...iw,...c},f=n(u,d),m=i(u)?s():null;super(l,!0,f,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},aw=(t,e,n)=>()=>{const s=new WeakMap,r=async(i,o)=>{let a=e(i);if(!Xe(a,o)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,c)}return s.set(o,a),_r(a)?await n(i,o,a.inputs[0]):await n(i,o,a),a};return{render(i,o){const a=s.get(o);return a!==void 0?Promise.resolve(a):r(i,o)}}},lw=()=>typeof window>"u"?null:window,cw=(t,e)=>n=>{n.copyFromChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=s.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)s[d]=c[d+o]},n.copyToChannel=(s,r,i=0)=>{const o=t(i),a=t(r);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=s.length;for(let d=o<0?-o:0;d+o<l&&d<u;d+=1)c[d+o]=s[d]}},uw=t=>e=>{e.copyFromChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(s,r,i=0)=>{const o=t(i),a=t(r);if(o<e.length)return n.call(e,s,a,o)})(e.copyToChannel)},hw=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),t(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,i===null?s:i))},dw=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let l=0;l<a;l+=1)r.connect(s,0,l)},()=>r.disconnect(s))},Dm=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),Rm=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},ji=(t,e,n,s)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(i),set:s(o)})},fw=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),pw=t=>({...t,channelCount:t.numberOfOutputs}),mw=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},Pm=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(s.code!==9)throw s;Pm(t,e,n+1e-7)}},gw=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},yw=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},vw=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Du=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Fm=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Ru=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},_w=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},xw=t=>{t.start=(e=>(n=0,s=0,r)=>{const i=t.buffer,o=i===null?s:Math.min(i.duration,s);i!==null&&o>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)},Lm=(t,e)=>{const n=e.createGain();t.connect(n);const s=(r=>()=>{r.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),xr(t,n),t.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else r.call(t,o),i=!0}})(t.stop)},wr=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},ww=Wv(Ts),Sw=Gv(Ts),kw=i1(Ta),Vm=new WeakMap,Nw=k1(Vm),Bt=R_(new Map,new WeakMap),Zt=lw(),zm=J1(Bt,Kt),Pu=S1(Je),Ue=Hx(Je,Pu,Ss),Cw=Kv(zm,pe,Ue),he=T1(Ca),yn=Tx(Zt),oe=B1(yn),Wm=new WeakMap,qm=m1(wr),Oi=sx(Zt),Fu=V1(Oi),Lu=z1(Zt),Bm=W1(Zt),yi=ix(Zt),be=k_(qv(gm),Hv(ww,Sw,Ko,kw,Jo,Je,Nw,Ti,pe,Ts,un,Ss,wo),Bt,D1(_c,Jo,Je,pe,mi,un),Kt,ba,st,t1(Ko,_c,Je,pe,mi,he,un,oe),l1(Wm,Je,Wt),qm,he,Fu,Lu,Bm,oe,yi),Tw=Zv(be,Cw,Kt,zm,he,oe),Vu=new WeakSet,Vd=ex(Zt),Um=Q_(new Uint32Array(1)),zu=cw(Um,Kt),Wu=uw(Um),$m=e_(Vu,Bt,st,Vd,yn,tw(Vd),zu,Wu),Ea=Qv(ht),Hm=Gx(Pu,Ei,Ss),Jt=q_(Hm),Sr=nx(Ea,Bt,gw,yw,vw,Du,Fm,Ru,xw,hw(ji),Lm),en=$x(N1(Ei),Hm),bw=s_(Jt,Sr,pe,en,Ue),Ut=N_(Bv(ym),Wm,Eu,C_,Rv,Pv,Fv,Lv,Vv,gc,pm,Oi,Pm),Ew=n_(be,bw,Ut,Ve,Sr,he,oe,wr),Aw=d_(be,f_,Kt,Ve,rx(ht,ji),he,oe,Ue),Mw=D_(Jt,Im,pe,en,Ue),bs=Xx(Vm),Iw=O_(be,Ut,Mw,ba,Im,he,oe,bs),es=Z1(Ts,Lu),jw=dw(Ve,es),ts=dx(Oi,jw),Ow=L_(ts,pe,Ue),Dw=F_(be,Ow,ts,he,oe),Rw=W_(Mi,pe,Ue),Pw=z_(be,Rw,Mi,he,oe,pw),Fw=mx(Ea,Sr,ht,es),kr=px(Ea,Bt,Fw,Du,Ru),Lw=G_(Jt,kr,pe,en,Ue),Vw=H_(be,Ut,Lw,kr,he,oe,wr),Gm=gx(st,ji),zw=Z_(Gm,pe,Ue),Ww=X_(be,zw,Gm,he,oe,bs),qw=r1(Jt,jm,pe,en,Ue),Bw=s1(be,Ut,qw,jm,he,oe,bs),Qm=yx(st),Uw=d1(Jt,Qm,pe,en,Ue),$w=h1(be,Ut,Uw,Qm,st,he,oe,bs),Hw=x1(Jt,ht,pe,en,Ue),Gw=_1(be,Ut,Hw,ht,he,oe),Qw=wx(ba,Ve,Ii,st),Aa=Qx(Bt,ht,Ii,sw(ht,yn)),Yw=O1(Sr,pe,yn,Ue,Aa),Xw=vx(Qw),Zw=I1(be,Xw,Yw,he,oe,bs),Kw=p_(Ut,ts,kr,Ii,st,Dm,oe,ji),Ym=new WeakMap,Jw=X1(Aw,Kw,qm,oe,Ym,wr),Xm=bx(Ea,Bt,Du,Fm,Ru,Lm),eS=Vx(Jt,Xm,pe,en,Ue),tS=Lx(be,Ut,Xm,eS,he,oe,wr),Zm=U_(Sr),nS=Dx(Zm,Ve,ht,Rm,es),Ma=Ox(Zm,Ve,nS,Rm,es,Oi,ji),sS=Ax(Ko,Ve,ts,ht,Ii,Ma,st,Jo,Dm,es),Km=Ex(sS),rS=qx(Jt,ts,kr,ht,Km,pe,yn,en,Ue,Aa),iS=Wx(be,Ut,Km,rS,he,oe,bs),oS=Mx(Kt),aS=Ux(oS,he,new WeakSet,mw),lS=jx(ts,Mi,ht,Ma,st,es),Jm=Ix(lS,st),cS=ew(Jt,Jm,pe,en,Ue),uS=Jx(be,Ut,Jm,cS,he,oe),hS=aw(Ma,pe,Ue),dS=ow(be,Ve,Ma,hS,he,oe,bs),eg=U1(Zt),qu=g1(Zt),tg=new WeakMap,fS=b1(tg,yn),pS=eg?$v(Bt,st,p1(Zt),qu,y1(zv),he,fS,oe,yi,new WeakMap,new WeakMap,nw(yi,yn),Zt):void 0,mS=q1(Fu,oe),gS=e1(Vu,Bt,J_,f1,new WeakSet,he,mS,Xo,gi,zu,Wu),ng=I_(pS,Tw,$m,Ew,Iw,Dw,Pw,Vw,Ww,gS,Bw,$w,Gw,Zw,Jw,tS,iS,aS,uS,dS),yS=$1(be,Sx,he,oe),vS=G1(be,kx,he,oe),_S=Q1(be,Nx,he,oe),xS=Cx(Ve,oe),wS=Y1(be,xS,he),SS=h_(ng,Ve,st,rw,yS,vS,_S,wS,Oi),Bu=E1(Ym),kS=Yv(Bu),sg=B_(Kt),NS=o1(Bu),rg=c1(Kt),ig=new WeakMap,CS=w1(ig,Wt),TS=hx(sg,Kt,Ve,ts,Mi,kr,ht,Ii,st,rg,qu,CS,es),bS=ax(Ve,TS,ht,st,es),ES=M_(Jt,sg,Sr,ts,Mi,kr,ht,NS,rg,qu,pe,yi,yn,en,Ue,Aa),AS=C1(tg),MS=Yx(ig),zd=eg?b_(kS,be,Ut,ES,bS,Je,AS,he,oe,yi,fw,MS,_w,wr):void 0,IS=K_(st,yn),jS=Zx(Vu,Bt,Pu,Bu,Aa,Xo,zu,Wu),OS=Px(ng,Bt,Ve,IS,jS),DS=R1(Ca,Fu),RS=P1(bu,Lu),PS=F1(Eu,Bm),FS=L1(Ca,oe);function bt(t){return t===void 0}function ee(t){return t!==void 0}function LS(t){return typeof t=="function"}function Un(t){return typeof t=="number"}function ps(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function VS(t){return typeof t=="boolean"}function Vt(t){return Array.isArray(t)}function mn(t){return typeof t=="string"}function io(t){return mn(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function Y(t,e){if(!t)throw new Error(e)}function $n(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function og(t){!t.isOffline&&t.state!=="running"&&Uu('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ag=!1,Wd=!1;function qd(t){ag=t}function zS(t){bt(t)&&ag&&!Wd&&(Wd=!0,Uu("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let lg=console;function WS(...t){lg.log(...t)}function Uu(...t){lg.warn(...t)}function qS(t){return new SS(t)}function BS(t,e,n){return new OS(t,e,n)}const pt=typeof self=="object"?self:null,US=pt&&(pt.hasOwnProperty("AudioContext")||pt.hasOwnProperty("webkitAudioContext"));function $S(t,e,n){return Y(ee(zd),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(pt==null?void 0:pt.BaseAudioContext)?pt==null?void 0:pt.AudioWorkletNode:zd)(t,e,n)}function $t(t,e,n,s){var r=arguments.length,i=r<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,n,i):o(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i}function Ie(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(d){o(d)}}function l(u){try{c(s.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})}class HS{constructor(e,n,s,r){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function ks(t){return PS(t)}function Wn(t){return RS(t)}function So(t){return FS(t)}function Ds(t){return DS(t)}function GS(t){return t instanceof $m}function QS(t,e){return t==="value"||ks(e)||Wn(e)||GS(e)}function ms(t,...e){if(!e.length)return t;const n=e.shift();if(ps(t)&&ps(n))for(const s in n)QS(s,n[s])?t[s]=n[s]:ps(n[s])?(t[s]||Object.assign(t,{[s]:{}}),ms(t[s],n[s])):Object.assign(t,{[s]:n[s]});return ms(t,...e)}function YS(t,e){return t.length===e.length&&t.every((n,s)=>e[s]===n)}function H(t,e,n=[],s){const r={},i=Array.from(e);if(ps(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(t,a))||(ms(r,{[s]:i[0]}),n.splice(n.indexOf(s),1),i.shift())),i.length===1&&ps(i[0]))ms(r,i[0]);else for(let o=0;o<n.length;o++)ee(i[o])&&(r[n[o]]=i[o]);return ms(t,r)}function XS(t){return t.constructor.getDefaults()}function rr(t,e){return bt(t)?e:t}function vi(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class vn{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||pt&&this.toString()===pt.TONE_DEBUG_CLASS)&&WS(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}vn.version=fm;const $u=1e-6;function pr(t,e){return t>e+$u}function Nc(t,e){return pr(t,e)||Rt(t,e)}function sa(t,e){return t+$u<e}function Rt(t,e){return Math.abs(t-e)<$u}function ZS(t,e,n){return Math.max(Math.min(t,n),e)}class Et extends vn{constructor(){super(),this.name="Timeline",this._timeline=[];const e=H(Et.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(Y(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];Y(Nc(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const s=this._search(e,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const s=this._search(e,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Rt(this._timeline[n].time,e)){for(let s=n;s>=0&&Rt(this._timeline[s].time,e);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Nc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],l=this._timeline[o+1];if(Rt(a[n],e)){for(let c=o;c<this._timeline.length;c++){const u=this._timeline[c];if(Rt(u[n],e))o=c;else break}return o}else{if(sa(a[n],e)&&pr(l[n],e))return o;pr(a[n],e)?i=o:s=o+1}}return-1}_iterate(e,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const s=this._search(e);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(e,n){const s=this._search(e);return this._iterate(n,s+1),this}forEachBetween(e,n,s){let r=this._search(e),i=this._search(n);return r!==-1&&i!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===n&&(i-=1),this._iterate(s,r,i)):r===-1&&this._iterate(s,0,i),this}forEachFrom(e,n){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(n,s+1),this}forEachAtTime(e,n){const s=this._search(e);if(s!==-1&&Rt(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Rt(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{n(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const cg=[];function Ia(t){cg.push(t)}function KS(t){cg.forEach(e=>e(t))}const ug=[];function ja(t){ug.push(t)}function JS(t){ug.forEach(e=>e(t))}class Di extends vn{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(r=>{bt(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(e,n){const s=(...r)=>{n(...r),this.off(e,s)};return this.on(e,s),this}off(e,n){return e.split(/\W+/).forEach(r=>{if(bt(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(bt(n))this._events[r]=[];else{const i=this._events[r];for(let o=i.length-1;o>=0;o--)i[o]===n&&i.splice(o,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(Di.prototype,n);Object.defineProperty(e.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class hg extends Di{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ri extends hg{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Et,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=H(Ri.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=qS({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new HS(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(KS(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,s){return this._context.createBuffer(e,n,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,s){return this._context.createPeriodicWave(e,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return Y(Ds(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return Y(Ds(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return Y(Ds(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){Y(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){Y(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){Y(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){Y(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return $S(this.rawContext,e,n)}addAudioWorkletModule(e){return Ie(this,void 0,void 0,function*(){Y(ee(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return Ie(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Ds(this._context)?this._context.resume():Promise.resolve()}close(){return Ie(this,void 0,void 0,function*(){Ds(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&JS(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+n})};return r(),s}}class ek extends hg{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return Ie(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function we(t,e){Vt(e)?e.forEach(n=>we(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Hu(t,e){Vt(e)?e.forEach(n=>Hu(t,n)):Object.defineProperty(t,e,{writable:!0})}const re=()=>{};class ae extends vn{constructor(){super(),this.name="ToneAudioBuffer",this.onload=re;const e=H(ae.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,mn(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:re,onload:re,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Nt().sampleRate}set(e){return e instanceof ae?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return Ie(this,void 0,void 0,function*(){const n=ae.load(e).then(s=>{this.set(s),this.onload(this)});ae.downloads.push(n);try{yield n}finally{const s=ae.downloads.indexOf(n);ae.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=Vt(e)&&e[0].length>0,s=n?e.length:1,r=n?e[0].length:e.length,i=Nt(),o=i.createBuffer(s,r,i.sampleRate),a=!n&&s===1?[e]:e;for(let l=0;l<s;l++)o.copyToChannel(a[l],l);return this._buffer=o,this}toMono(e){if(Un(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const i=this.toArray(r);for(let o=0;o<i.length;o++)n[o]+=i[o]}n=n.map(r=>r/s),this.fromArray(n)}return this}toArray(e){if(Un(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){Y(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),r=Math.floor(n*this.sampleRate);Y(s<r,"The start time must be less than the end time");const i=r-s,o=Nt().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)o.copyToChannel(this.getChannelData(a).subarray(s,r),a);return new ae(o)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ae().fromArray(e)}static fromUrl(e){return Ie(this,void 0,void 0,function*(){return yield new ae().load(e)})}static load(e){return Ie(this,void 0,void 0,function*(){const n=ae.baseUrl===""||ae.baseUrl.endsWith("/")?ae.baseUrl:ae.baseUrl+"/",s=yield fetch(n+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const r=yield s.arrayBuffer();return yield Nt().decodeAudioData(r)})}static supportsType(e){const n=e.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return Ie(this,void 0,void 0,function*(){for(yield Promise.resolve();ae.downloads.length;)yield ae.downloads[0]})}}ae.baseUrl="";ae.downloads=[];class Gu extends Ri{constructor(){super({clockSource:"offline",context:So(arguments[0])?arguments[0]:BS(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:So(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=So(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return Ie(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);e&&n%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return Ie(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new ae(n)})}close(){return Promise.resolve()}}const dg=new ek;let hs=dg;function Nt(){return hs===dg&&US&&tk(new Ri),hs}function tk(t,e=!1){e&&hs.dispose(),Ds(t)?hs=new Ri(t):So(t)?hs=new Gu(t):hs=t}function nk(){return hs.resume()}if(pt&&!pt.TONE_SILENCE_LOGGING){const e=` * Tone.js v${fm} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function sk(t){return Math.pow(10,t/20)}function rk(t){return 20*(Math.log(t)/Math.LN10)}function fg(t){return Math.pow(2,t/12)}let Oa=440;function ik(){return Oa}function ok(t){Oa=t}function Cc(t){return Math.round(pg(t))}function pg(t){return 69+12*Math.log2(t/Oa)}function ak(t){return Oa*Math.pow(2,(t-69)/12)}class Qu extends vn{constructor(e,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const s=parseInt(e,10),r=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,s)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Qu&&this.fromType(this._val),bt(this._val))return this._noArg();if(mn(this._val)&&bt(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(ps(this._val)){let e=0;for(const n in this._val)if(ee(this._val[n])){const s=this._val[n],r=new this.constructor(this.context,n).valueOf()*s;e+=r}return e}if(ee(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return mn(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Pt extends Qu{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new Pt(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),a=Math.round(r/s)*s-r;return r+a*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);n.push(o+"n."),n.push(o+"n"),n.push(o+"t")}n.push("0");let s=n[0],r=new Pt(this.context,n[0]).toSeconds();return n.forEach(i=>{const o=new Pt(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,n,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Cc(this.toFrequency())}_now(){return this.context.now()}}class Ct extends Pt{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ik()}static set A4(e){ok(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Ct.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const r=lk[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:Ct.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,s){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new Ct(this.context,this.valueOf()*fg(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Cc(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Ct.A4);let s=Math.round(12*n)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),ck[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return ak(e)}static ftom(e){return Cc(e)}}const lk={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},ck=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Yr extends Pt{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ut extends vn{constructor(){super();const e=H(ut.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Nt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return zS(e),new Pt(this.context,e).toSeconds()}toFrequency(e){return new Ct(this.context,e).toFrequency()}toTicks(e){return new Yr(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(s=>{bt(e[s])&&delete n[s]}),n}get(){const e=XS(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];ee(s)&&ee(s.value)&&ee(s.setValueAtTime)?e[n]=s.value:s instanceof ut?e[n]=s._getPartialProperties(e[n]):Vt(s)||Un(s)||mn(s)||VS(s)?e[n]=s:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&ee(this[n])&&(this[n]&&ee(this[n].value)&&ee(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof ut?this[n].set(e[n]):this[n]=e[n])}),this}}class Yu extends Et{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,s){return $n(n,0),this.add(Object.assign({},s,{state:e,time:n})),this}getLastState(e,n){const s=this._search(n);for(let r=s;r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,n){const s=this._search(n);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class le extends ut{constructor(){const e=H(le.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,Y(ee(e.param)&&(ks(e.param)||e.param instanceof le),"param must be an AudioParam");!ks(e.param);)e.param=e.param._param;this._swappable=ee(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Et(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,ee(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ut.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return ee(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return ee(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return ee(this.maxValue)&&ee(this.minValue)&&$n(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?sk(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?rk(e):e}setValueAtTime(e,n){const s=this.toSeconds(n),r=this._fromType(e);return Y(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),s=this._events.getAfter(n),r=this._events.get(n);let i=this._initialValue;if(r===null)i=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const o=this._events.getBefore(r.time);let a;o===null?a=this._initialValue:a=o.value,r.type==="setTargetAtTime"&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,n))}else if(s===null)i=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let o=r.value;if(r.type==="setTargetAtTime"){const a=this._events.getBefore(r.time);a===null?o=this._initialValue:o=a.value}s.type==="linearRampToValueAtTime"?i=this._linearInterpolate(r.time,o,s.time,s.value,n):i=this._exponentialInterpolate(r.time,o,s.time,s.value,n)}else i=r.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const s=this._fromType(e),r=this.toSeconds(n);return Y(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,n){let s=this._fromType(e);s=Rt(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(n);return Y(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(n)),this}linearRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(n)),this}targetRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,n),this}exponentialApproachValueAtTime(e,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,n,r),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(e,n+s),this}setTargetAtTime(e,n,s){const r=this._fromType(e);Y(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(n);return this._assertRange(r),Y(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,n,s,r=1){s=this.toSeconds(s),n=this.toSeconds(n);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),n);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const l=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(l),n+a*o)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return Y(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),s=this._fromType(this.getValueAtTime(n));Y(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const r=this._events.get(n),i=this._events.getAfter(n);return r&&Rt(r.time,n)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(e,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,s):this.linearRampTo(e,n,s),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),i=r?r.time:n+2,o=(i-n)/10;for(let a=n;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){Y(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,s,r,i){return s+(n-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,n,s,r,i){return n+(r-n)*((i-e)/(s-e))}_exponentialInterpolate(e,n,s,r,i){return n*Math.pow(r/n,(i-e)/(s-e))}}class X extends ut{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return ee(this.input)?ks(this.input)||this.input instanceof le?1:this.input.numberOfInputs:0}get numberOfOutputs(){return ee(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return ee(e)&&(e instanceof X||Wn(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();Y(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,s=0){return Nr(this,e,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Uu("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,s=0){return uk(this,e,n,s),this}chain(...e){return _i(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),ee(this.input)&&(this.input instanceof X?this.input.dispose():Wn(this.input)&&this.input.disconnect()),ee(this.output)&&(this.output instanceof X?this.output.dispose():Wn(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function _i(...t){const e=t.shift();t.reduce((n,s)=>(n instanceof X?n.connect(s):Wn(n)&&Nr(n,s),s),e)}function Nr(t,e,n=0,s=0){for(Y(ee(t),"Cannot connect from undefined node"),Y(ee(e),"Cannot connect to undefined node"),(e instanceof X||Wn(e))&&Y(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Y(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof X||e instanceof le;)ee(e.input)&&(e=e.input);for(;t instanceof X;)ee(t.output)&&(t=t.output);ks(e)?t.connect(e,n):t.connect(e,n,s)}function uk(t,e,n=0,s=0){if(ee(e))for(;e instanceof X;)e=e.input;for(;!Wn(t);)ee(t.output)&&(t=t.output);ks(e)?t.disconnect(e,n):Wn(e)?t.disconnect(e,n,s):t.disconnect()}class je extends X{constructor(){const e=H(je.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new le({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),we(this,"gain")}static getDefaults(){return Object.assign(X.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class mr extends X{constructor(e){super(e),this.onended=re,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new je({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(X.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:re})}_startGain(e,n=1){Y(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+s):this._gainNode.gain.exponentialApproachValueAtTime(n,e,s)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){Y(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==re&&(this.onended(this),this.onended=re,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Y(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=re,this}}class Xu extends mr{constructor(){const e=H(Xu.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),Nr(this._source,this._gainNode),this.offset=new le({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(mr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ue extends X{constructor(){const e=H(ue.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Xu({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(X.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,s=0){return Zu(this,e,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,s){return this._param.exponentialRampTo(e,n,s),this}linearRampTo(e,n,s){return this._param.linearRampTo(e,n,s),this}targetRampTo(e,n,s){return this._param.targetRampTo(e,n,s),this}exponentialApproachValueAtTime(e,n,s){return this._param.exponentialApproachValueAtTime(e,n,s),this}setTargetAtTime(e,n,s){return this._param.setTargetAtTime(e,n,s),this}setValueCurveAtTime(e,n,s,r){return this._param.setValueCurveAtTime(e,n,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,s){return this._param.rampTo(e,n,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Zu(t,e,n,s){(e instanceof le||ks(e)||e instanceof ue&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ue&&(e.overridden=!0)),Nr(t,e,n,s)}class Ku extends le{constructor(){const e=H(Ku.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Et(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(le.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,s){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(e),i=this._events.get(n),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const l=s*a+n,c=this._exponentialApproach(i.time,i.value,r,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,n){const s=this.toSeconds(n);super.setValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const s=this._fromType(e),r=this._events.get(n),i=Math.round(Math.max((n-r.time)*10,1)),o=(n-r.time)/i;for(let a=0;a<=i;a++){const l=o*a+r.time,c=this._exponentialInterpolate(r.time,r.value,n,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(bt(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(n));const i=this._events.get(n);return i&&i.time===n&&i.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const n=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const r=this._fromType(this.getValueAtTime(n.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*o*(n.ticks-e)),l=(-r+a)/o,c=(-r-a)/o;return(l>0?l:c)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const s=this.toSeconds(n),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class Ju extends ue{constructor(){const e=H(Ju.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new Ku({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ue.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class eh extends ut{constructor(){const e=H(eh.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Yu,this._tickOffset=new Et,this._ticksAtTime=new Et,this._secondsAtTime=new Et,this.frequency=new Ju({context:this.context,units:e.units,value:e.frequency}),we(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ut.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),ee(n)&&this.setTicksAtTime(n,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),s=this._state.getLastState("stopped",n),r=this._ticksAtTime.get(n),i={state:"paused",time:n};this._state.add(i);let o=r||s,a=r?r.ticks:0,l=null;return this._state.forEachBetween(o.time,n+this.sampleTime,c=>{let u=o.time;const d=this._tickOffset.get(c.time);d&&d.time>=o.time&&(a=d.ticks,u=d.time),o.state==="started"&&c.state!=="started"&&(a+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(u),c.time!==i.time&&(l={state:c.state,time:c.time,ticks:a})),o=c}),this._state.remove(i),l&&this._ticksAtTime.add(l),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),s=this.frequency.timeToTicks(e,n);this.setTicksAtTime(s,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const r=this._secondsAtTime.get(e);let i=r||n,o=r?r.seconds:0,a=null;return this._state.forEachBetween(i.time,e+this.sampleTime,l=>{let c=i.time;const u=this._tickOffset.get(l.time);u&&u.time>=i.time&&(o=u.seconds,c=u.time),i.state==="started"&&l.state!=="started"&&(o+=l.time-c,l.time!==s.time&&(a={state:l.state,time:l.time,seconds:o})),i=l}),this._state.remove(s),a&&this._secondsAtTime.add(a),o}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const s=this._tickOffset.get(n),r=this._state.get(n),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,n,s){let r=this._state.get(e);this._state.forEachBetween(e,n,o=>{r&&r.state==="started"&&o.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&r.state==="started"){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),l=this.frequency.getTicksAtTime(r.time),c=a-l;let u=Math.ceil(c)-c;u=Rt(u,1)?0:u;let d=this.frequency.getTimeOfTick(a+u);for(;d<n;){try{s(d,Math.round(this.getTicksAtTime(d)))}catch(f){i=f;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Da extends ut{constructor(){const e=H(Da.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=re,this._lastUpdate=0,this._state=new Yu("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new eh({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,we(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ut.getDefaults(),{callback:re,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){og(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const s=this.toSeconds(n),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,n,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Di.mixin(Da);class Es extends X{constructor(){const e=H(Es.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new je({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,we(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class th extends X{constructor(){const e=H(th.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Es({context:this.context}),this.output=new je({context:this.context}),this.volume=this.input.volume,_i(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),_i(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Ia(t=>{t.destination=new th({context:t})});ja(t=>{t.destination.dispose()});class hk extends X{constructor(){super(...arguments),this.name="Listener",this.positionX=new le({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new le({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new le({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new le({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new le({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new le({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new le({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new le({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new le({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(X.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Ia(t=>{t.listener=new hk({context:t})});ja(t=>{t.listener.dispose()});class nh extends vn{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=H(nh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const s=e.urls[n];this.add(n,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:re,onload:re,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return Y(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,s=re,r=re){return mn(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new ae(this.baseUrl+n,s,r))):this._buffers.set(e.toString(),new ae(n,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Ys extends Yr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class dk extends ut{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Et,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Ia(t=>{t.draw=new dk({context:t})});ja(t=>{t.draw.dispose()});class fk extends vn{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){Y(ee(e.time),"Events must have a time property"),Y(ee(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new pk(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const s of n)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let s,r=null;if(n>0)if(e.left.right===null)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const n=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(e){const n=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),n!==null?s?n.left=r:n.right=r:this._setRoot(r)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let s=n[0];for(let r=1;r<n.length;r++)n[r].low>s.low&&(s=n[r]);return s.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(e,n){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class pk{constructor(e,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class mk extends vn{constructor(e){super(),this.name="TimelineValue",this._timeline=new Et({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Hn extends X{constructor(){super(H(Hn.getDefaults(),arguments,["context"]))}connect(e,n=0,s=0){return Zu(this,e,n,s),this}}class Pi extends Hn{constructor(){const e=H(Pi.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,Vt(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):LS(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ue.getDefaults(),{length:1024})}setMap(e,n=1024){const s=new Float32Array(n);for(let r=0,i=n;r<i;r++){const o=r/(i-1)*2-1;s[r]=e(o,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(s=>s.includes(e));Y(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class sh extends Hn{constructor(){const e=H(sh.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Pi({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Hn.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Gn{constructor(e,n){this.id=Gn._eventId++,this._remainderTime=0;const s=Object.assign(Gn.getDefaults(),n);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:re,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Gn._eventId=0;class rh extends Gn{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(rh.getDefaults(),n);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Gn.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return sa(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Ys(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){sa(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Ys(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);pr(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Ra extends ut{constructor(){const e=H(Ra.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new mk(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Et,this._repeatedEvents=new fk,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Da({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),we(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(ut.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;e+=new Ys(this.context,this._swingTicks*2/3).toSeconds()*r}qd(!0),this._timeline.forEachAtTime(n,s=>s.invoke(e)),qd(!1)}schedule(e,n){const s=new Gn(this,{callback:e,time:new Yr(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,n,s,r=1/0){const i=new rh(this,{callback:e,duration:new Pt(this.context,r).toTicks(),interval:new Pt(this.context,n).toTicks(),time:new Yr(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,n){const s=new Gn(this,{callback:e,once:!0,time:new Yr(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new Ys(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let s;return ee(n)&&(s=this.toTicks(n)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){Vt(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new Pt(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new Pt(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Ys(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new Ys(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),s=this._clock.frequency.timeToTicks(e,n);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),i=n+r;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),r=e-s%e;return this._clock.nextTickTime(r,n)}}syncSignal(e,n){const s=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(s)/this.PPQ),o=[];if(e.units==="time"){const l=.015625/i,c=new je(l),u=new sh(-1),d=new je(l);r.chain(c,u,d),r=d,i=1/i,o=[c,u,d]}n||(e.getValueAtTime(s)!==0?n=e.getValueAtTime(s)/i:n=0);const a=new je(n);return r.connect(a),a.connect(e._param),o.push(a),this._syncedSignals.push({initial:e.value,nodes:o,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===e&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Hu(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Di.mixin(Ra);Ia(t=>{t.transport=new Ra({context:t})});ja(t=>{t.transport.dispose()});class Ye extends X{constructor(e){super(e),this.input=void 0,this._state=new Yu("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=re,this._syncedStop=re,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Es({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,we(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,onstop:re,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,s){let r=bt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")Y(pr(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(rr(n,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,n,s)},r);this._scheduled.push(o),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else og(this.context),this._start(r,n,s);return this}stop(e){let n=bt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||ee(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(pr(n,0)){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const r=n-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=re,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Fi extends mr{constructor(){const e=H(Fi.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,Nr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new le({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ae(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(mr.getDefaults(),{url:new ae,loop:!1,loopEnd:0,loopStart:0,onload:re,onerror:re,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,s,r=1){Y(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),this.loop?n=rr(n,this.loopStart):n=rr(n,0);let o=Math.max(this.toSeconds(n),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=a-l;Nc(o,a)&&(o=(o-l)%c+l),Rt(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,sa(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),ee(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class ra extends Ye{constructor(){const e=H(ra.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ye.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(Y(e in Bd,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=Bd[this._type];this._source=new Fi({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Os=44100*5,vl=2,tn={brown:null,pink:null,white:null},Bd={get brown(){if(!tn.brown){const t=[];for(let e=0;e<vl;e++){const n=new Float32Array(Os);t[e]=n;let s=0;for(let r=0;r<Os;r++){const i=Math.random()*2-1;n[r]=(s+.02*i)/1.02,s=n[r],n[r]*=3.5}}tn.brown=new ae().fromArray(t)}return tn.brown},get pink(){if(!tn.pink){const t=[];for(let e=0;e<vl;e++){const n=new Float32Array(Os);t[e]=n;let s,r,i,o,a,l,c;s=r=i=o=a=l=c=0;for(let u=0;u<Os;u++){const d=Math.random()*2-1;s=.99886*s+d*.0555179,r=.99332*r+d*.0750759,i=.969*i+d*.153852,o=.8665*o+d*.3104856,a=.55*a+d*.5329522,l=-.7616*l-d*.016898,n[u]=s+r+i+o+a+l+c+d*.5362,n[u]*=.11,c=d*.115926}}tn.pink=new ae().fromArray(t)}return tn.pink},get white(){if(!tn.white){const t=[];for(let e=0;e<vl;e++){const n=new Float32Array(Os);t[e]=n;for(let s=0;s<Os;s++)n[s]=Math.random()*2-1}tn.white=new ae().fromArray(t)}return tn.white}};function As(t,e){return Ie(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new Gu(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class ih extends mr{constructor(){const e=H(ih.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],Nr(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new le({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),we(this,["frequency","detune"])}static getDefaults(){return Object.assign(mr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Ae extends Ye{constructor(){const e=H(Ae.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new ue({context:this.context,units:"frequency",value:e.frequency}),we(this,"frequency"),this.detune=new ue({context:this.context,units:"cents",value:e.detune}),we(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ye.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),s=new ih({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Ae._periodicWaveCache.find(n=>n.phase===this._phase&&YS(n.partials,this._partials));{const e=Ae._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(ee(s)){const{partials:r,wave:i}=s;this._wave=i,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,i]=this._getRealImaginary(e,this._phase),o=this.context.createPeriodicWave(r,i);this._wave=o,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Ae._periodicWaveCache.push({imag:i,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),Ae._periodicWaveCache.length>100&&Ae._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){$n(e,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const r=new Float32Array(e);this._partials.forEach((i,o)=>r[o]=i),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,n){let r=2048;const i=new Float32Array(r),o=new Float32Array(r);let a=1;if(e==="custom"){if(a=this._partials.length+1,this._partialCount=this._partials.length,r=a,this._partials.length===0)return[i,o]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(a=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],a=Math.max(a,2),r=a):this._partialCount=0,this._partials=[]}for(let l=1;l<r;++l){const c=2/(l*Math.PI);let u;switch(e){case"sine":u=l<=a?1:0,this._partials[l-1]=u;break;case"square":u=l&1?2*c:0,this._partials[l-1]=u;break;case"sawtooth":u=c*(l&1?1:-1),this._partials[l-1]=u;break;case"triangle":l&1?u=2*(c*c)*(l-1>>1&1?-1:1):u=0,this._partials[l-1]=u;break;case"custom":u=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(i[l]=-u*Math.sin(n*l),o[l]=u*Math.cos(n*l)):(i[l]=0,o[l]=0)}return[i,o]}_inverseFFT(e,n,s){let r=0;const i=e.length;for(let o=0;o<i;o++)r+=e[o]*Math.cos(o*s)+n[o]*Math.sin(o*s);return r}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,i=32;for(let o=0;o<i;o++)s=Math.max(this._inverseFFT(e,n,o/i*r),s);return ZS(-this._inverseFFT(e,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return Ie(this,arguments,void 0,function*(e=1024){return As(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Ae._periodicWaveCache=[];class gk extends Hn{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Pi({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Qn extends ue{constructor(){const e=H(Qn.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new je({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ue.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Pa extends Ye{constructor(){const e=H(Pa.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new gk({context:this.context}),this._modulationNode=new je({context:this.context}),this._carrier=new Ae({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Ae({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Qn({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),we(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ae.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Ie(this,arguments,void 0,function*(e=1024){return As(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Li extends Ye{constructor(){const e=H(Li.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new je({context:this.context,gain:0}),this._carrier=new Ae({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ue({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Ae({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new Qn({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new Qn({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),we(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Ae.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return Ie(this,arguments,void 0,function*(e=1024){return As(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Vi extends Ye{constructor(){const e=H(Vi.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new je({context:this.context,gain:0}),this._thresh=new Pi({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new ue({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Ae({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),we(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ye.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return Ie(this,arguments,void 0,function*(e=1024){return As(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Fa extends Ye{constructor(){const e=H(Fa.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new ue({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ue({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,we(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ae.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=n+s*i)}}get count(){return this._oscillators.length}set count(e){if($n(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const s=new Ae({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):re});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return Ie(this,arguments,void 0,function*(e=1024){return As(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class La extends Ye{constructor(){const e=H(La.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Qn({context:this.context,value:2}),this._pulse=new Vi({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Ae({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),we(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ye.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return Ie(this,arguments,void 0,function*(e=1024){return As(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ud={am:Pa,fat:Fa,fm:Li,oscillator:Ae,pulse:Vi,pwm:La};class ia extends Ye{constructor(){const e=H(ia.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new ue({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ue({context:this.context,units:"cents",value:e.detune}),we(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Ae.getDefaults(),Li.getDefaults(),Pa.getDefaults(),Fa.getDefaults(),Vi.getDefaults(),La.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=Ud[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof Ud[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Un(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Un(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&mn(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return Ie(this,arguments,void 0,function*(e=1024){return As(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class oh extends ue{constructor(){super(H(oh.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new je({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,_i(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ue.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class ah extends Hn{constructor(){const e=H(ah.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new Qn({context:this.context,value:e.max-e.min}),this._add=this.output=new oh({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Hn.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function mg(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){$n(i,t,e),n.set(this,i)}})}}function _n(t,e=1/0){const n=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){$n(this.toSeconds(i),t,e),n.set(this,i)}})}}class Va extends Ye{constructor(){const e=H(Va.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new ae({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ye.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:re,onerror:re,playbackRate:1,reverse:!1})}load(e){return Ie(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=re){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,s){return super.start(e,n,s),this}_start(e,n,s){this._loop?n=rr(n,this._loopStart):n=rr(n,0);const r=this.toSeconds(n),i=s;s=rr(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o=o/this._playbackRate,e=this.toSeconds(e);const a=new Fi({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&bt(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(n))}restart(e,n,s){return super.restart(e,n,s),this}_restart(e,n,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,n,s)}seek(e,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&$n(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&$n(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}$t([_n(0)],Va.prototype,"fadeIn",void 0);$t([_n(0)],Va.prototype,"fadeOut",void 0);class qt extends X{constructor(){const e=H(qt.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new ue({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(X.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(mn(e))return e;{let s;for(s in oo)if(oo[s][n]===e)return s;return e}}_setCurve(e,n,s){if(mn(s)&&Reflect.has(oo,s)){const r=oo[s];ps(r)?e!=="_decayCurve"&&(this[e]=r[n]):this[e]=r}else if(Vt(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0){const a=1/r;r=(1-o)/a}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let l=1;l<a.length;l++)if(a[l-1]<=o&&o<=a[l]){a=this._attackCurve.slice(l),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,n)}if(i&&this.sustain<1){const a=n*this.sustain,l=e+r;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+l):this._sig.exponentialApproachValueAtTime(a,l,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(Y(Vt(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,s=0){return Zu(this,e,n,s),this}asArray(){return Ie(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,s=new Gu(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=i*.1,a=i+o,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/a,decay:n*this.toSeconds(this.decay)/a,release:n*this.toSeconds(this.release)/a,context:s}));return l._sig.toDestination(),l.triggerAttackRelease(n*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}$t([_n(0)],qt.prototype,"attack",void 0);$t([_n(0)],qt.prototype,"decay",void 0);$t([mg(0,1)],qt.prototype,"sustain",void 0);$t([_n(0)],qt.prototype,"release",void 0);const oo=(()=>{let e,n;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[],i=6.4;for(e=0;e<127;e++){n=e/127;const f=Math.sin(n*(Math.PI*2)*i-Math.PI/2)+1;r[e]=f/10+n*.83}r[127]=1;const o=[],a=5;for(e=0;e<128;e++)o[e]=Math.ceil(e/127*a)/a;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<128;e++){n=e/127;const f=Math.pow(n,3)*4+.2,y=Math.cos(f*Math.PI*2*n);c[e]=Math.abs(y*(1-n))}function u(f){const y=new Array(f.length);for(let m=0;m<f.length;m++)y[m]=1-f[m];return y}function d(f){return f.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:s,Out:d(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:l,Out:u(l)},step:{In:o,Out:u(o)}}})();class Yn extends X{constructor(){const e=H(Yn.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Es({context:this.context,volume:e.volume}),this.volume=this._volume.volume,we(this,"volume")}static getDefaults(){return Object.assign(X.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const i=r[n],o=this.context.transport.schedule(a=>{r[n]=a,s.apply(this,r)},i);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,s,r){const i=this.toSeconds(s),o=this.toSeconds(n);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Xn extends Yn{constructor(){const e=H(Xn.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Yn.getDefaults(),{detune:0,onsilence:re,portamento:0})}triggerAttack(e,n,s=1){this.log("triggerAttack",e,n,s);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const s=this.toSeconds(n),r=e instanceof Ct?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}$t([_n(0)],Xn.prototype,"portamento",void 0);class za extends qt{constructor(){super(H(za.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new je({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class oa extends Xn{constructor(){const e=H(oa.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new ia(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new za(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),we(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Xn.getDefaults(),{envelope:Object.assign(vi(qt.getDefaults(),Object.keys(X.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(vi(ia.getDefaults(),[...Object.keys(Ye.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class aa extends X{constructor(){const e=H(aa.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new le({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new le({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new le({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(X.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){Y(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let o=0;o<e;o++){const l=Math.pow(o/e,2)*19980+20;n[o]=l}const s=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(n,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class lh extends X{constructor(){const e=H(lh.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new je({context:this.context}),this.output=new je({context:this.context}),this._filters=[],this._filters=[],this.Q=new ue({context:this.context,units:"positive",value:e.Q}),this.frequency=new ue({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ue({context:this.context,units:"cents",value:e.detune}),this.gain=new ue({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,we(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(X.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){Y(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=Un(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let r=s.indexOf(n);Y(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new aa({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,_i(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new aa({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((i,o)=>s[o]*=i)}),n.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Hu(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}const $d=[1,1.483,1.932,2.546,2.63,3.897];class os extends Xn{constructor(){const e=H(os.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new ue({context:this.context,units:"cents",value:e.detune}),this.frequency=new ue({context:this.context,units:"frequency"}),this._amplitude=new je({context:this.context,gain:0}).connect(this.output),this._highpass=new lh({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<$d.length;n++){const s=new Li({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):re,type:"square"});s.connect(this._highpass),this._oscillators[n]=s;const r=new Qn({context:this.context,value:$d[n]});this._freqMultipliers[n]=r,this.frequency.chain(r,s.frequency),this.detune.connect(s.detune)}this._filterFreqScaler=new ah({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new qt({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return ms(Xn.getDefaults(),{envelope:Object.assign(vi(qt.getDefaults(),Object.keys(X.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,n=1){return this.envelope.triggerAttack(e,n),this._oscillators.forEach(s=>s.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(s=>{s.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(n=>n.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(n=>n.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(n=>n.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class gs extends oa{constructor(){const e=H(gs.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,we(this,["oscillator","envelope"])}static getDefaults(){return ms(Xn.getDefaults(),oa.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const s=this.toSeconds(n),r=this.toFrequency(e instanceof Ct?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}$t([mg(0)],gs.prototype,"octaves",void 0);$t([_n(0)],gs.prototype,"pitchDecay",void 0);class Xr extends Yn{constructor(){const e=H(Xr.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new ra(Object.assign({context:this.context},e.noise)),this.envelope=new za(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Yn.getDefaults(),{envelope:Object.assign(vi(qt.getDefaults(),Object.keys(X.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(vi(ra.getDefaults(),Object.keys(Ye.getDefaults())),{type:"white"})})}triggerAttack(e,n=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,n),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(n,s),this.triggerRelease(n+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const gg=new Set;function ch(t){gg.add(t)}function yg(t,e){const n=`registerProcessor("${t}", ${e})`;gg.add(n)}const yk=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;ch(yk);const vk=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;ch(vk);const _k=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;ch(_k);const xk="feedback-comb-filter",wk=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;yg(xk,wk);class Wa extends Yn{constructor(){const e=H(Wa.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(Y(io(s)||Un(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),io(s)){const i=new Ct(this.context,s).toMidi();n[i]=e.urls[s]}else Un(r)&&isFinite(r)&&(n[r]=e.urls[r])}),this._buffers=new nh({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Yn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:re,onerror:re,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,s=1){return this.log("triggerAttack",e,n,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=pg(new Ct(this.context,r).toFrequency()),o=Math.round(i),a=i-o,l=this._findClosest(o),c=o-l,u=this._buffers.get(c),d=fg(l+a),f=new Fi({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);f.start(n,0,u.duration/d,s),Vt(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const y=this._activeSources.get(o),m=y.indexOf(f);m!==-1&&y.splice(m,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new Ct(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);n=this.toSeconds(n),i.forEach(o=>{o.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),Vt(n)?(Y(Vt(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const l=n[Math.min(a,n.length-1)];this.triggerRelease(o,i+this.toSeconds(l))})):this.triggerRelease(e,i+this.toSeconds(n)),this}add(e,n,s){if(Y(io(e)||isFinite(e),`note must be a pitch or midi: ${e}`),io(e)){const r=new Ct(this.context,e).toMidi();this._buffers.add(r,n,s)}else this._buffers.add(e,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}$t([_n(0)],Wa.prototype,"attack",void 0);$t([_n(0)],Wa.prototype,"release",void 0);class uh extends X{constructor(){const e=H(uh.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new le({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",we(this,"pan")}static getDefaults(){return Object.assign(X.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Sk="bit-crusher",kk=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;yg(Sk,kk);class Ee extends X{constructor(){const e=H(Ee.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new je({context:this.context}),Ee._allSolos.has(this.context)||Ee._allSolos.set(this.context,new Set),Ee._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(X.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Ee._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Ee._soloed.has(this.context)||Ee._soloed.set(this.context,new Set),Ee._soloed.get(this.context).add(this)}_removeSolo(){Ee._soloed.has(this.context)&&Ee._soloed.get(this.context).delete(this)}_isSoloed(){return Ee._soloed.has(this.context)&&Ee._soloed.get(this.context).has(this)}_noSolos(){return!Ee._soloed.has(this.context)||Ee._soloed.has(this.context)&&Ee._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Ee._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Ee._allSolos=new Map;Ee._soloed=new Map;class hh extends X{constructor(){const e=H(hh.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new uh({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Es({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,we(this,["pan","volume"])}static getDefaults(){return Object.assign(X.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Xs extends X{constructor(){const e=H(Xs.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Ee({solo:e.solo,context:this.context}),this._panVol=this.output=new hh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),we(this,["pan","volume"])}static getDefaults(){return Object.assign(X.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Xs.buses.has(e)||Xs.buses.set(e,new je({context:this.context})),Xs.buses.get(e)}send(e,n=0){const s=this._getBus(e),r=new je({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Xs.buses=new Map;function Nk(){return Nt().now()}const kn=Nt().transport;Nt().destination;Nt().destination;Nt().listener;Nt().draw;Nt();const as=class as{constructor(){ze(this,"isInitialized",!1);ze(this,"drumSamples",{});ze(this,"masterVolume");this.masterVolume=new Es(-6).toDestination()}static getInstance(){return as.instance||(as.instance=new as),as.instance}async initialize(){if(!this.isInitialized)try{await nk(),this.drumSamples={kick:new gs({pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4}}).connect(this.masterVolume),snare:new Xr({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}}).connect(this.masterVolume),hihat:new os({envelope:{attack:.001,decay:.1,release:.01},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}).connect(this.masterVolume),openhat:new os({envelope:{attack:.001,decay:.3,release:.1},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}).connect(this.masterVolume),clap:new Xr({noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}}).connect(this.masterVolume),crash:new os({envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:64,resonance:4e3,octaves:1.5}).connect(this.masterVolume),ride:new os({envelope:{attack:.001,decay:.4,release:.1},harmonicity:5.1,modulationIndex:16,resonance:4e3,octaves:1.5}).connect(this.masterVolume),tom:new gs({pitchDecay:.008,octaves:2,oscillator:{type:"sine"},envelope:{attack:.006,decay:.5,sustain:0}}).connect(this.masterVolume)},this.isInitialized=!0,console.log("Audio engine initialized successfully")}catch(e){console.error("Failed to initialize audio engine:",e)}}playDrum(e,n=.8,s){if(!this.isInitialized){console.warn("Audio engine not initialized");return}const r=this.normalizeInstrumentName(e),i=this.drumSamples[r];if(!i){console.warn(`No sample found for instrument: ${e} (normalized: ${r})`);return}try{const o=s||Nk(),a=this.velocityToDb(n);if(i instanceof gs){const l=r==="kick"?"C1":"C3";i.volume.value=a,i.triggerAttackRelease(l,"8n",o)}else(i instanceof Xr||i instanceof os)&&(i.volume.value=a,i.triggerAttackRelease("8n",o))}catch(o){console.error(`Error playing drum ${e}:`,o)}}normalizeInstrumentName(e){const n=e.toLowerCase().replace(/[^a-z]/g,"");return{kick:"kick",bassdrum:"kick",bd:"kick",snare:"snare",sn:"snare",snaredrum:"snare",hihat:"hihat",hh:"hihat",closedhihat:"hihat",openhat:"openhat",openhihat:"openhat",oh:"openhat",clap:"clap",handclap:"clap",crash:"crash",crashcymbal:"crash",ride:"ride",ridecymbal:"ride",tom:"tom",hitom:"tom",midtom:"tom",lotom:"tom",perc:"clap",percussion:"clap"}[n]||"kick"}velocityToDb(e){return Math.max(-40,Math.log10(Math.max(.01,e))*20)}setMasterVolume(e){this.masterVolume&&(this.masterVolume.volume.value=this.velocityToDb(e))}async dispose(){if(this.isInitialized)try{Object.values(this.drumSamples).forEach(e=>{e.dispose()}),this.drumSamples={},this.isInitialized=!1,console.log("Audio engine disposed")}catch(e){console.error("Error disposing audio engine:",e)}}};ze(as,"instance");let Tc=as;const ln=Tc.getInstance(),Ck=({tracks:t,currentStep:e,isPlaying:n,tempo:s,colorMode:r,onStepToggle:i,onVelocityChange:o,onTrackMute:a,onTrackSolo:l,onTrackVolumeChange:c,onPlay:u,onStop:d,onTempoChange:f,onClearTrack:y,onClearAll:m,onAddTrack:v,onRemoveTrack:w,onLoadDefaultPattern:p})=>(Zr.useEffect(()=>((async()=>{try{await ln.initialize()}catch(_){console.error("Failed to initialize audio:",_)}})(),()=>{ln.dispose()}),[]),Zr.useEffect(()=>{n&&t.forEach(g=>{if(g.steps[e]&&!g.muted){const _=g.velocities[e]*g.volume;ln.playDrum(g.name,_)}})},[e,n,t]),h.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Drum Machine"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:p,className:"flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors",children:[h.jsx(ku,{className:"w-4 h-4"}),"Load Default Beat"]}),h.jsx("button",{onClick:m,className:"text-sm text-red-400 hover:text-red-300 transition-colors",children:"Clear All"})]})]}),h.jsx(Mv,{isPlaying:n,tempo:s,onPlay:u,onStop:d,onTempoChange:f}),h.jsx(Iv,{tracks:t,onAddTrack:v,onRemoveTrack:w,maxTracks:8}),h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx("div",{className:"w-32"})," ",h.jsx("div",{className:"flex gap-2",children:Array.from({length:16},(g,_)=>h.jsx("div",{className:`w-12 h-6 flex items-center justify-center text-xs font-mono ${_%4===0?"text-primary-400":"text-gray-500"}`,children:_+1},_))})]}),h.jsx("div",{className:"space-y-3",children:t.map(g=>h.jsx(Av,{track:g,currentStep:e,isPlaying:n,colorMode:r,onStepToggle:_=>i(g.id,_),onVelocityChange:(_,C)=>o(g.id,_,C),onMute:()=>a(g.id),onSolo:()=>l(g.id),onVolumeChange:_=>c(g.id,_),onClear:()=>y(g.id),onRemove:()=>w(g.id),canRemove:t.length>1},g.id))}),h.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[h.jsx("span",{children:"16-step pattern  4/4 time signature"}),h.jsxs("span",{children:["Current step: ",e+1,"/16"]})]})})]})),Tk=({tracks:t,currentStep:e,isPlaying:n,tempo:s,colorMode:r,onStepToggle:i,onPlay:o,onStop:a,onTempoChange:l,onAddTrack:c,onLoadDefaultPattern:u})=>{const[d,f]=U.useState(0),[y,m]=U.useState(!1),[v,w]=U.useState(!1),p=t[d],g=xo((p==null?void 0:p.name)||"",r),_=dm(t),C=t.length<8;Zr.useEffect(()=>{(async()=>{try{await ln.initialize()}catch(k){console.error("Failed to initialize audio:",k)}})()},[]),Zr.useEffect(()=>{n&&t.forEach(S=>{if(S.steps[e]&&!S.muted){const k=S.velocities[e]*S.volume;ln.playDrum(S.name,k)}})},[e,n,t]);const x=S=>{try{const k=Gs(S);c(k),w(!1)}catch(k){console.error("Failed to add track:",k)}};return h.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Drum Machine"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:u,className:"p-1 text-blue-400 hover:text-blue-300 rounded transition-colors",title:"Load default beat",children:h.jsx(ku,{className:"w-4 h-4"})}),C&&_.length>0&&h.jsxs("div",{className:"relative",children:[h.jsx("button",{onClick:()=>w(!v),className:"p-1 text-green-400 hover:text-green-300 rounded transition-colors",title:"Add track",children:h.jsx(lm,{className:"w-4 h-4"})}),v&&h.jsx("div",{className:"absolute top-full right-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-lg z-10 min-w-[140px]",children:h.jsx("div",{className:"p-2",children:_.slice(0,4).map(S=>h.jsx("button",{onClick:()=>x(S.id),className:"w-full text-left px-2 py-1 text-xs hover:bg-gray-600 rounded transition-colors",children:S.name},S.id))})})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:n?a:o,className:`p-2 rounded-lg transition-colors ${n?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:n?h.jsx(Su,{className:"w-5 h-5"}):h.jsx(Na,{className:"w-5 h-5"})}),h.jsx("button",{onClick:a,className:"p-2 bg-gray-600 hover:bg-gray-500 text-white rounded-lg transition-colors",children:h.jsx(um,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-sm text-gray-300",children:"BPM:"}),h.jsx("input",{type:"number",value:s,onChange:S=>l(parseInt(S.target.value)||120),min:"60",max:"200",className:"w-16 px-2 py-1 bg-gray-600 border border-gray-500 rounded text-center text-white text-sm focus:border-primary-500 focus:outline-none"})]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Tracks"}),h.jsxs("button",{onClick:()=>m(!y),className:"text-sm text-primary-400 hover:text-primary-300 flex items-center gap-1",children:[y?"Show Less":"Show All",y?h.jsx(tv,{className:"w-4 h-4"}):h.jsx(om,{className:"w-4 h-4"})]})]}),y?h.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map((S,k)=>h.jsx("button",{onClick:()=>f(k),className:`p-2 rounded-lg text-left transition-colors ${d===k?"bg-primary-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:xo(S.name,r)}}),h.jsx("span",{className:"text-sm font-medium",children:S.name})]})},S.id))}):h.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:t.map((S,k)=>h.jsx("button",{onClick:()=>f(k),className:`flex-shrink-0 px-3 py-2 rounded-lg transition-colors ${d===k?"bg-primary-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:xo(S.name,r)}}),h.jsx("span",{className:"text-sm font-medium",children:S.name})]})},S.id))})]}),v&&h.jsx("div",{className:"fixed inset-0 z-5",onClick:()=>w(!1)}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("span",{className:"text-sm font-medium text-gray-300",children:[p.name," - ",p.instrument]}),h.jsxs("span",{className:"text-xs text-gray-400",children:["Step ",e+1,"/16"]})]}),h.jsx("div",{className:"grid grid-cols-4 gap-2 mb-2",children:Array.from({length:16},(S,k)=>h.jsx("button",{onClick:()=>i(p.id,k),className:`aspect-square rounded-lg border-2 transition-all duration-150 cursor-pointer flex items-center justify-center text-xs font-mono ${p.steps[k]?"border-primary-500 bg-primary-600 shadow-lg shadow-primary-500/30":"border-gray-600 bg-gray-800 hover:bg-gray-700"} ${n&&e===k?"animate-pulse-beat":""}`,style:{backgroundColor:p.steps[k]?`${g}${Math.round(p.velocities[k]*255).toString(16).padStart(2,"0")}`:void 0},children:k+1},k))}),h.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[h.jsx("span",{className:"text-xs text-primary-400 font-medium",children:"1"}),h.jsx("span",{className:"text-xs text-primary-400 font-medium",children:"2"}),h.jsx("span",{className:"text-xs text-primary-400 font-medium",children:"3"}),h.jsx("span",{className:"text-xs text-primary-400 font-medium",children:"4"})]})]})]})},bk=({settings:t,onSettingsChange:e,audioData:n,midiNotes:s=[]})=>{const r=U.useRef(null),[i,o]=U.useState(!1);U.useEffect(()=>{const l=r.current;if(!l)return;const c=l.getContext("2d");c&&(l.width=l.offsetWidth*window.devicePixelRatio,l.height=l.offsetHeight*window.devicePixelRatio,c.scale(window.devicePixelRatio,window.devicePixelRatio),c.fillStyle="#000000",c.fillRect(0,0,l.offsetWidth,l.offsetHeight),a(c,l.offsetWidth,l.offsetHeight,t,n,s))},[t,n,s]);const a=(l,c,u,d,f,y=[])=>{if(y.forEach(m=>{const v=Cu(m.note,d.colorMode),w=m.velocity*d.brightness,p=Date.now()-m.timestamp,g=Math.max(0,w*(1-p/1e3));if(g>0){l.fillStyle=`rgba(${v.r}, ${v.g}, ${v.b}, ${g})`;const _=c*(p/1e3)%c,C=u-m.note/127*u,x=m.velocity*20;l.beginPath(),l.arc(_,C,x,0,2*Math.PI),l.fill()}}),f){const m=c/f.length;f.forEach((v,w)=>{const p=Math.abs(v)*u*.5,g=Ev(w/f.length,d.colorMode);l.fillStyle=`rgba(${g.r}, ${g.g}, ${g.b}, ${d.brightness})`,l.fillRect(w*m,u-p,m-1,p)})}};return h.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-2xl font-bold",children:"Music Visualizer"}),h.jsx("button",{onClick:()=>o(!i),className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",children:h.jsx(Ci,{className:"w-5 h-5"})})]}),i&&h.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color Mode"}),h.jsx("div",{className:"flex gap-2",children:["spectrum","chromatic","harmonic"].map(l=>h.jsx("button",{onClick:()=>e({...t,colorMode:l}),className:`px-3 py-2 rounded-lg text-sm capitalize transition-colors ${t.colorMode===l?"bg-primary-600 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:l},l))})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Brightness: ",Math.round(t.brightness*100),"%"]}),h.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.brightness,onChange:l=>e({...t,brightness:parseFloat(l.target.value)}),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("input",{type:"checkbox",id:"ledMatrix",checked:t.ledMatrixEnabled,onChange:l=>e({...t,ledMatrixEnabled:l.target.checked}),className:"w-4 h-4 text-primary-600 bg-gray-600 border-gray-500 rounded focus:ring-primary-500"}),h.jsx("label",{htmlFor:"ledMatrix",className:"text-sm font-medium",children:"Enable LED Matrix"})]}),t.ledMatrixEnabled&&h.jsx("input",{type:"text",placeholder:"LED Matrix IP (e.g., 192.168.1.100)",value:t.ledMatrixIP,onChange:l=>e({...t,ledMatrixIP:l.target.value}),className:"w-full px-3 py-2 bg-gray-600 border border-gray-500 rounded text-white placeholder-gray-400 focus:border-primary-500 focus:outline-none"})]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("canvas",{ref:r,className:"visualizer-canvas w-full h-64"}),h.jsx("div",{className:"absolute top-4 left-4 bg-black/50 px-3 py-1 rounded-lg",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(am,{className:"w-4 h-4"}),h.jsxs("span",{className:"text-sm capitalize",children:[t.colorMode," Mode"]})]})}),t.ledMatrixEnabled&&h.jsx("div",{className:"absolute top-4 right-4 bg-black/50 px-3 py-1 rounded-lg",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(uv,{className:"w-4 h-4 text-green-400"}),h.jsx("span",{className:"text-sm",children:"LED Connected"})]})})]}),h.jsxs("div",{className:"mt-4 text-sm text-gray-400",children:[t.colorMode==="spectrum"&&h.jsx("p",{children:" Spectrum: Low notes = red, high notes = violet (frequency-based)"}),t.colorMode==="chromatic"&&h.jsx("p",{children:" Chromatic: Each note has a consistent color across all octaves"}),t.colorMode==="harmonic"&&h.jsx("p",{children:" Harmonic: Related notes have similar colors (circle of fifths)"})]})]})},vg=({settings:t,onSettingsChange:e,midiNotes:n=[]})=>{const s=U.useRef(null),[r,i]=U.useState(!1),[o,a]=U.useState(!1);U.useEffect(()=>{const c=s.current;if(!c)return;const u=c.getContext("2d");u&&(c.width=c.offsetWidth*window.devicePixelRatio,c.height=c.offsetHeight*window.devicePixelRatio,u.scale(window.devicePixelRatio,window.devicePixelRatio),u.fillStyle="#000000",u.fillRect(0,0,c.offsetWidth,c.offsetHeight),l(u,c.offsetWidth,c.offsetHeight,t,n))},[t,n,r]);const l=(c,u,d,f,y)=>{y.forEach((m,v)=>{const w=Cu(m.note,f.colorMode),p=Date.now()-m.timestamp,g=Math.max(0,m.velocity*f.brightness*(1-p/1e3));if(g>0)if(c.fillStyle=`rgba(${w.r}, ${w.g}, ${w.b}, ${g})`,r){const _=u*(p/1e3)%u,C=d-m.note/127*d,x=m.velocity*15;c.beginPath(),c.arc(_,C,x,0,2*Math.PI),c.fill()}else{const _=u/8,C=m.velocity*d*.8,x=v%8*_;c.fillRect(x,d-C,_-2,C)}})};return h.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Visualizer"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>i(!r),className:"p-1 hover:bg-gray-700 rounded transition-colors",children:r?h.jsx(pv,{className:"w-4 h-4"}):h.jsx(dv,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>a(!o),className:"p-1 hover:bg-gray-700 rounded transition-colors",children:h.jsx(Ci,{className:"w-4 h-4"})})]})]}),o&&h.jsxs("div",{className:"mb-3 p-3 bg-gray-700 rounded-lg space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color Mode"}),h.jsx("div",{className:"grid grid-cols-3 gap-1",children:["spectrum","chromatic","harmonic"].map(c=>h.jsx("button",{onClick:()=>e({...t,colorMode:c}),className:`px-2 py-1 rounded text-xs capitalize transition-colors ${t.colorMode===c?"bg-primary-600 text-white":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:c},c))})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Brightness: ",Math.round(t.brightness*100),"%"]}),h.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.brightness,onChange:c=>e({...t,brightness:parseFloat(c.target.value)}),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]}),h.jsxs("div",{className:"relative",children:[h.jsx("canvas",{ref:s,className:`w-full bg-black rounded-lg border border-gray-700 transition-all duration-300 ${r?"h-48":"h-24"}`}),h.jsx("div",{className:"absolute top-2 left-2 bg-black/50 px-2 py-1 rounded text-xs",children:h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(am,{className:"w-3 h-3"}),h.jsx("span",{className:"capitalize",children:t.colorMode})]})})]})]})},Hd=({users:t,currentUserId:e,onUserKick:n})=>{var i;const s=t.find(o=>o.id===e),r=(s==null?void 0:s.isHost)||!1;return h.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[h.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[h.jsx("span",{children:"Participants"}),h.jsxs("span",{className:"text-sm text-gray-400",children:["(",t.length,")"]})]}),h.jsx("div",{className:"space-y-3",children:t.map(o=>h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm",style:{backgroundColor:o.color},children:o.name.charAt(0).toUpperCase()}),h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"font-medium",children:[o.name,o.id===e&&" (You)"]}),o.isHost&&h.jsx(nv,{className:"w-4 h-4 text-yellow-400"})]}),h.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[h.jsx(hm,{className:"w-3 h-3"}),h.jsx("span",{children:"Playing drums"})]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{className:"p-1 text-gray-400 hover:text-white transition-colors",children:h.jsx(fv,{className:"w-4 h-4"})}),r&&o.id!==e&&n&&h.jsx("button",{onClick:()=>n(o.id),className:"p-1 text-gray-400 hover:text-red-400 transition-colors",title:"Remove user",children:h.jsx(_v,{className:"w-4 h-4"})})]})]},o.id))}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Invite others:"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("input",{type:"text",value:`${window.location.origin}/join/${((i=t[0])==null?void 0:i.id)||"ABC123"}`,readOnly:!0,className:"flex-1 px-3 py-2 bg-gray-600 border border-gray-500 rounded text-sm text-white focus:outline-none"}),h.jsx("button",{onClick:()=>{var o;navigator.clipboard.writeText(`${window.location.origin}/join/${((o=t[0])==null?void 0:o.id)||"ABC123"}`)},className:"px-3 py-2 bg-primary-600 hover:bg-primary-700 text-white text-sm rounded transition-colors",children:"Copy"})]})]})]})},Ek=({activeView:t,onViewChange:e,userCount:n})=>{const s=[{id:"drum",icon:wu,label:"Drums"},{id:"visualizer",icon:ov,label:"Visual"},{id:"users",icon:Go,label:"Users",badge:n},{id:"settings",icon:Ci,label:"Settings"}];return h.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 px-4 py-2 z-50 md:hidden",children:h.jsx("div",{className:"flex justify-around items-center",children:s.map(({id:r,icon:i,label:o,badge:a})=>h.jsxs("button",{onClick:()=>e(r),className:`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors relative ${t===r?"text-primary-400 bg-primary-400/10":"text-gray-400 hover:text-white"}`,children:[h.jsx(i,{className:"w-5 h-5"}),h.jsx("span",{className:"text-xs font-medium",children:o}),a&&a>0&&h.jsx("span",{className:"absolute -top-1 -right-1 bg-primary-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:a})]},r))})})},Ak=({children:t,className:e=""})=>{const[n,s]=U.useState(!1),[r,i]=U.useState(!1);return U.useEffect(()=>{const o=()=>{s(window.innerWidth<768),i(window.innerWidth>=768&&window.innerWidth<1024)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),h.jsx("div",{className:`
      ${e}
      ${n?"mobile-layout":""}
      ${r?"tablet-layout":""}
    `,children:t})},Mk=({sessionCode:t,onLeaveSession:e})=>{const[n,s]=U.useState([{id:"1",name:"You",color:"#3b82f6",isHost:!0},{id:"2",name:"Alex",color:"#ef4444",isHost:!1},{id:"3",name:"Sam",color:"#10b981",isHost:!1}]),[r,i]=U.useState(()=>kd()),[o,a]=U.useState(0),[l,c]=U.useState(!1),[u,d]=U.useState(120),[f]=U.useState(!0),[y,m]=U.useState(!1),[v,w]=U.useState([]),[p,g]=U.useState(!1),[_,C]=U.useState("drum"),[x,S]=U.useState({colorMode:"spectrum",brightness:.8,ledMatrixEnabled:!1,ledMatrixIP:""});U.useEffect(()=>{const j=()=>{g(window.innerWidth<768)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),U.useEffect(()=>{if(!l)return;const j=setInterval(()=>{a(V=>(V+1)%16),r.forEach((V,Q)=>{if(V.steps[o]&&!V.muted){const te={note:36+Q*2,velocity:V.velocities[o],channel:10,timestamp:Date.now(),userId:"1"};w($=>[...$.slice(-10),te])}})},60/u/4*1e3);return()=>clearInterval(j)},[l,u,o,r]);const k=(j,V)=>{i(Q=>Q.map(te=>te.id===j?{...te,steps:te.steps.map(($,J)=>J===V?!$:$)}:te))},N=(j,V,Q)=>{i(te=>te.map($=>$.id===j?{...$,velocities:$.velocities.map((J,Se)=>Se===V?Q:J)}:$))},A=j=>{i(V=>V.map(Q=>Q.id===j?{...Q,muted:!Q.muted}:Q))},T=j=>{i(V=>V.map(Q=>Q.id===j?{...Q,solo:!Q.solo}:Q))},M=(j,V)=>{i(Q=>Q.map(te=>te.id===j?{...te,volume:V}:te))},E=()=>{c(!0)},F=()=>{c(!1),a(0)},b=j=>{d(Math.max(60,Math.min(200,j)))},P=j=>{i(V=>V.map(Q=>Q.id===j?{...Q,steps:new Array(16).fill(!1),velocities:new Array(16).fill(.8)}:Q))},L=()=>{i(j=>j.map(V=>({...V,steps:new Array(16).fill(!1),velocities:new Array(16).fill(.8)})))},z=j=>{i(V=>[...V,j])},I=j=>{i(V=>V.filter(Q=>Q.id!==j))},O=()=>{i(kd())},R=()=>{switch(_){case"drum":return h.jsx(Tk,{tracks:r,currentStep:o,isPlaying:l,tempo:u,colorMode:x.colorMode,onStepToggle:k,onPlay:E,onStop:F,onTempoChange:b,onAddTrack:z,onLoadDefaultPattern:O});case"visualizer":return h.jsx(vg,{settings:x,onSettingsChange:S,midiNotes:v});case"users":return h.jsxs("div",{className:"space-y-4",children:[h.jsx(Hd,{users:n,currentUserId:"1",onUserKick:j=>{s(V=>V.filter(Q=>Q.id!==j))}}),h.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Session Info"}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Room Code:"}),h.jsx("span",{className:"font-mono text-primary-400",children:t})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Tempo:"}),h.jsxs("span",{children:[u," BPM"]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Time Signature:"}),h.jsx("span",{children:"4/4"})]})]}),h.jsx("button",{onClick:e,className:"w-full mt-4 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Leave Session"})]})]});case"settings":return h.jsxs("div",{className:"bg-gray-800 rounded-xl p-4 border border-gray-700",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Settings"}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium mb-2",children:"Visualizer Settings"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Color Mode"}),h.jsxs("select",{value:x.colorMode,onChange:j=>S({...x,colorMode:j.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white focus:border-primary-500 focus:outline-none",children:[h.jsx("option",{value:"spectrum",children:"Spectrum"}),h.jsx("option",{value:"chromatic",children:"Chromatic"}),h.jsx("option",{value:"harmonic",children:"Harmonic"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Brightness: ",Math.round(x.brightness*100),"%"]}),h.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:x.brightness,onChange:j=>S({...x,brightness:parseFloat(j.target.value)}),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]})]})})]});default:return null}};return h.jsxs(Ak,{className:"min-h-screen bg-gray-900",children:[h.jsx(Tv,{sessionCode:t,userCount:n.length,isConnected:f,onSettingsClick:()=>m(!y)}),h.jsx("div",{className:"p-4 md:p-6",children:p?h.jsx("div",{className:"space-y-4",children:R()}):h.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[h.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[h.jsx(Ck,{tracks:r,currentStep:o,isPlaying:l,tempo:u,colorMode:x.colorMode,onStepToggle:k,onVelocityChange:N,onTrackMute:A,onTrackSolo:T,onTrackVolumeChange:M,onPlay:E,onStop:F,onTempoChange:b,onClearTrack:P,onClearAll:L,onAddTrack:z,onRemoveTrack:I,onLoadDefaultPattern:O}),h.jsx(bk,{settings:x,onSettingsChange:S,midiNotes:v})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx(Hd,{users:n,currentUserId:"1",onUserKick:j=>{s(V=>V.filter(Q=>Q.id!==j))}}),h.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Session Info"}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Room Code:"}),h.jsx("span",{className:"font-mono text-primary-400",children:t})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Tempo:"}),h.jsxs("span",{children:[u," BPM"]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Time Signature:"}),h.jsx("span",{children:"4/4"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Pattern Length:"}),h.jsx("span",{children:"16 steps"})]})]}),h.jsx("button",{onClick:e,className:"w-full mt-4 bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Leave Session"})]})]})]})}),p&&h.jsx(Ek,{activeView:_,onViewChange:C,userCount:n.length})]})},Ik=({onExitEducation:t})=>{const[e,n]=U.useState(null),[s,r]=U.useState(0),[i,o]=U.useState(new Array(16).fill(!1)),[a,l]=U.useState(new Array(16).fill(!1)),[c,u]=U.useState(!1),[d,f]=U.useState(0),[y]=U.useState(120),[m,v]=U.useState({colorMode:"spectrum",brightness:.8,ledMatrixEnabled:!1,ledMatrixIP:""}),[w,p]=U.useState([]),[g,_]=U.useState(0);U.useEffect(()=>{(async()=>{try{await ln.initialize()}catch(P){console.error("Failed to initialize audio:",P)}})()},[]);const C=[{id:"1",title:"Basic Beat",description:"Learn to create a simple kick drum pattern",difficulty:"beginner",steps:[{id:"1-1",instruction:"Click on steps 1, 5, 9, and 13 to create a basic kick drum pattern",expectedPattern:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],hint:"Put the kick on every quarter note (steps 1, 5, 9, 13)",completed:!1}]},{id:"2",title:"Color and Pitch",description:"Discover how musical notes relate to colors",difficulty:"beginner",steps:[{id:"2-1",instruction:"Click the drum buttons below to see how different sounds create different colors in the visualizer",hint:"Notice how low sounds like kick drums appear as red, while high sounds appear as blue/violet",completed:!1},{id:"2-2",instruction:"Now try switching between the different color modes to see how the same sounds can be displayed differently",hint:"Spectrum mode shows frequency (low=red, high=violet), Chromatic shows note names, Harmonic shows musical relationships",completed:!1}]},{id:"3",title:"Rhythm Patterns",description:"Learn to create a complete 4/4 beat with kick and snare",difficulty:"intermediate",steps:[{id:"3-1",instruction:"First, create a kick drum pattern on steps 1, 5, 9, and 13",expectedPattern:[!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1,!0,!1,!1,!1],hint:"The kick drum should hit on every quarter note (beats 1, 2, 3, 4)",completed:!1},{id:"3-2",instruction:"Now add a snare track below. Click on steps 5 and 13 for the snare (beats 2 and 4)",expectedPattern:[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1],hint:"Snare typically goes on the backbeat (beats 2 and 4)",completed:!1}]}],x=b=>{const P=[...i];P[b]=!P[b],o(P)},S=()=>{if(!e)return!1;const b=e.steps[s];return b?b.expectedPattern?e.id==="3"&&s===1?JSON.stringify(a)===JSON.stringify(b.expectedPattern):JSON.stringify(i)===JSON.stringify(b.expectedPattern):!0:!1},k=()=>{!e||!e.steps[s]||(s<e.steps.length-1?(r(s+1),e.id==="3"&&s===0||o(new Array(16).fill(!1)),l(new Array(16).fill(!1))):(n(null),r(0),o(new Array(16).fill(!1)),l(new Array(16).fill(!1))))},N=()=>{!e||!e.steps[s]||((e==null?void 0:e.id)==="3"&&s===1?l(new Array(16).fill(!1)):o(new Array(16).fill(!1)))};U.useEffect(()=>{if(!c){kn.stop(),kn.cancel(),f(0);return}kn.bpm.value=y,kn.cancel();let b=0;const P=kn.scheduleRepeat(()=>{i[b]&&ln.playDrum("kick",.8),(e==null?void 0:e.id)==="3"&&a[b]&&ln.playDrum("snare",.8),f(b),b=(b+1)%16},"16n",0);return kn.start(),()=>{kn.stop(),kn.cancel(P)}},[c,y,i,a,e]);const A=()=>{u(!c)},T=(b,P)=>{ln.playDrum(b,.8);const L={note:P,velocity:.8,channel:10,timestamp:Date.now(),userId:"education"};p(z=>[...z.slice(-10),L]),(e==null?void 0:e.id)==="2"&&s===0&&setTimeout(()=>{s===0&&r(1)},3e3)},M=()=>{const b=["spectrum","chromatic","harmonic"],L=(b.indexOf(m.colorMode)+1)%b.length;v(z=>({...z,colorMode:b[L]})),_(z=>z+1),(e==null?void 0:e.id)==="2"&&s===1&&g>=2&&setTimeout(()=>{k()},1e3)};if(!e)return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4 sm:p-6",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(dc,{className:"w-6 h-6 sm:w-8 sm:h-8 text-yellow-400"}),h.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Education Mode"})]}),h.jsx("button",{onClick:t,className:"btn-secondary w-full sm:w-auto touch-target",children:"Exit Education"})]}),h.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 sm:p-6 mb-6 sm:mb-8 border border-white/20",children:[h.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white mb-3",children:"Welcome, Music Explorer! "}),h.jsx("p",{className:"text-white/80 text-base sm:text-lg",children:"Let's learn about rhythm and music through fun, interactive lessons. Watch how your beats create beautiful colors and patterns!"})]}),h.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:C.map(b=>h.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 sm:p-6 border border-white/20 hover:bg-white/20 transition-all cursor-pointer touch-target",onClick:()=>n(b),children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 mb-3",children:[h.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${b.difficulty==="beginner"?"bg-green-500/20 text-green-300":b.difficulty==="intermediate"?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"}`,children:b.difficulty}),h.jsx("div",{className:"flex",children:Array.from({length:b.difficulty==="beginner"?1:b.difficulty==="intermediate"?2:3},(P,L)=>h.jsx(yv,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-400 fill-current"},L))})]}),h.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-2",children:b.title}),h.jsx("p",{className:"text-white/70 mb-4 text-sm sm:text-base",children:b.description}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-sm text-white/60",children:[b.steps.length," steps"]}),h.jsx(wd,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white/60"})]})]},b.id))})]})});const E=e.steps[s];if(!E)return n(null),r(0),o(new Array(16).fill(!1)),l(new Array(16).fill(!1)),null;const F=S();return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 p-4 sm:p-6",children:h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("button",{onClick:()=>n(null),className:"text-white/70 hover:text-white transition-colors touch-target",children:" Back to Lessons"})}),h.jsx("button",{onClick:t,className:"btn-secondary w-full sm:w-auto touch-target",children:"Exit Education"})]}),h.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 sm:p-6 mb-6 border border-white/20",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-white",children:e.title}),h.jsxs("div",{className:"text-white/70 text-sm sm:text-base",children:["Step ",s+1," of ",e.steps.length]})]}),h.jsx("div",{className:"w-full bg-white/20 rounded-full h-2 mb-4",children:h.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(s+1)/e.steps.length*100}%`}})})]}),h.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 sm:p-6 mb-6 border border-white/20",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white mb-3",children:" Instructions"}),h.jsx("p",{className:"text-white/90 text-base sm:text-lg mb-4",children:E.instruction}),E.hint&&h.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-3",children:h.jsxs("p",{className:"text-yellow-200 text-sm sm:text-base",children:[" Hint: ",E.hint]})})]}),(E.expectedPattern||(e==null?void 0:e.id)==="2")&&h.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 sm:p-6 mb-6 border border-white/20",children:(e==null?void 0:e.id)==="2"?h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:" Sound and Color Explorer"}),s===1&&h.jsxs("button",{onClick:M,className:"btn-accent flex items-center gap-2 touch-target",children:["Switch to ",m.colorMode==="spectrum"?"Chromatic":m.colorMode==="chromatic"?"Harmonic":"Spectrum"," Mode"]})]}),h.jsx("div",{className:"mb-6",children:h.jsx(vg,{settings:m,onSettingsChange:v,midiNotes:w})}),s===0&&h.jsxs("div",{children:[h.jsx("h4",{className:"text-white font-medium mb-3",children:"Click the drums to hear sounds and see colors:"}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[h.jsxs("button",{onClick:()=>T("kick",36),className:"bg-red-600 hover:bg-red-700 text-white py-3 px-4 rounded-lg transition-colors touch-target",children:[" Kick",h.jsx("br",{}),h.jsx("span",{className:"text-xs opacity-75",children:"(Low/Red)"})]}),h.jsxs("button",{onClick:()=>T("snare",38),className:"bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg transition-colors touch-target",children:[" Snare",h.jsx("br",{}),h.jsx("span",{className:"text-xs opacity-75",children:"(Mid/Green)"})]}),h.jsxs("button",{onClick:()=>T("hihat",42),className:"bg-blue-600 hover:bg-blue-700 text-white py-3 px-4 rounded-lg transition-colors touch-target",children:[" Hi-Hat",h.jsx("br",{}),h.jsx("span",{className:"text-xs opacity-75",children:"(High/Blue)"})]}),h.jsxs("button",{onClick:()=>T("crash",49),className:"bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg transition-colors touch-target",children:[" Crash",h.jsx("br",{}),h.jsx("span",{className:"text-xs opacity-75",children:"(Very High/Purple)"})]})]})]}),s===1&&h.jsxs("div",{children:[h.jsxs("h4",{className:"text-white font-medium mb-3",children:["Current Color Mode: ",h.jsx("span",{className:"text-yellow-400 capitalize",children:m.colorMode})]}),h.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-4",children:h.jsxs("p",{className:"text-white/80 text-sm",children:[m.colorMode==="spectrum"&&" Spectrum Mode: Colors represent frequency - low sounds are red, high sounds are violet",m.colorMode==="chromatic"&&" Chromatic Mode: Each musical note has its own color that stays the same across octaves",m.colorMode==="harmonic"&&" Harmonic Mode: Musically related notes have similar colors based on the circle of fifths"]})}),h.jsx("p",{className:"text-white/70 text-sm mb-4",children:"Try the same drum sounds in different color modes to see how the visualization changes:"}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[h.jsx("button",{onClick:()=>T("kick",36),className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-3 rounded-lg transition-colors touch-target",children:" Kick"}),h.jsx("button",{onClick:()=>T("snare",38),className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-3 rounded-lg transition-colors touch-target",children:" Snare"}),h.jsx("button",{onClick:()=>T("hihat",42),className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-3 rounded-lg transition-colors touch-target",children:" Hi-Hat"}),h.jsx("button",{onClick:()=>T("crash",49),className:"bg-gray-600 hover:bg-gray-700 text-white py-2 px-3 rounded-lg transition-colors touch-target",children:" Crash"})]})]})]}):h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:" Create Your Pattern"}),h.jsxs("button",{onClick:N,className:"btn-secondary flex items-center gap-2 touch-target",children:[h.jsx(cm,{className:"w-4 h-4"}),h.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})]}),h.jsx("div",{className:"grid grid-cols-8 sm:flex sm:gap-2 gap-1 mb-3 sm:ml-4",children:Array.from({length:16},(b,P)=>h.jsx("div",{className:`h-6 flex items-center justify-center text-xs font-mono ${P%4===0?"text-yellow-400":"text-white/60"}`,children:P+1},P))}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[h.jsx("div",{className:"w-full sm:w-16 text-white font-medium text-center sm:text-left",children:"Kick"}),h.jsx("div",{className:"grid grid-cols-8 sm:flex sm:gap-2 gap-1 w-full sm:w-auto",children:i.map((b,P)=>h.jsx("button",{onClick:()=>x(P),className:`step-button-compact ${b?"active":""} ${c&&P===d?"ring-2 ring-yellow-400":""} touch-target`,style:{backgroundColor:b?"#ef4444":void 0,borderColor:b?"#ef4444":void 0},children:b&&h.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})},P))})]}),e.id==="3"&&s===1&&h.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mt-4",children:[h.jsx("div",{className:"w-full sm:w-16 text-white font-medium text-center sm:text-left",children:"Snare"}),h.jsx("div",{className:"grid grid-cols-8 sm:flex sm:gap-2 gap-1 w-full sm:w-auto",children:a.map((b,P)=>h.jsx("button",{onClick:()=>{const L=[...a];L[P]=!L[P],l(L)},className:`step-button-compact ${b?"active":""} ${c&&P===d?"ring-2 ring-yellow-400":""} touch-target`,style:{backgroundColor:b?"#10b981":void 0,borderColor:b?"#10b981":void 0},children:b&&h.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})},P))})]}),h.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[h.jsx("div",{className:"flex items-center gap-2",children:F?h.jsxs(h.Fragment,{children:[h.jsx(ev,{className:"w-5 h-5 text-green-400"}),h.jsx("span",{className:"text-green-400 font-medium text-sm sm:text-base",children:"Great job! Pattern is correct!"})]}):h.jsx("span",{className:"text-white/70 text-sm sm:text-base",children:"Keep trying... you're doing great!"})}),F&&h.jsxs("button",{onClick:k,className:"btn-accent flex items-center gap-2 w-full sm:w-auto touch-target",children:[h.jsx("span",{children:s<e.steps.length-1?"Next Step":"Complete Lesson"}),h.jsx(wd,{className:"w-4 h-4"})]})]})]})}),(e==null?void 0:e.id)!=="2"&&h.jsx("div",{className:"text-center",children:h.jsxs("button",{onClick:A,className:"btn-primary flex items-center gap-2 touch-target",children:[c?h.jsx(Su,{className:"w-5 h-5"}):h.jsx(Na,{className:"w-5 h-5"}),h.jsxs("span",{children:[c?"Stop":"Play"," Pattern"]})]})})]})})};function jk(){const[t,e]=U.useState("welcome"),[n,s]=U.useState(""),r=()=>{const u="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let d="";for(let f=0;f<6;f++)d+=u.charAt(Math.floor(Math.random()*u.length));return d},i=()=>{const u=r();s(u),e("jam")},o=u=>{s(u),e("jam")},a=()=>{e("education")},l=()=>{e("welcome"),s("")},c=()=>{e("welcome")};switch(t){case"jam":return h.jsx(Mk,{sessionCode:n,onLeaveSession:l});case"education":return h.jsx(Ik,{onExitEducation:c});default:return h.jsx(wv,{onStartJam:i,onJoinJam:o,onEducationMode:a})}}_l.createRoot(document.getElementById("root")).render(h.jsx(Zr.StrictMode,{children:h.jsx(jk,{})}));
