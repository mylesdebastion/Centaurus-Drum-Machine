# Story 10.4: Legal-Safe Controller Branding & Discovery UI

## Status
Draft

## Story
**As a** legal/compliance stakeholder,
**I want** trademark-compliant controller naming and clear compatibility messaging,
**so that** we minimize legal risk while maintaining user-friendly controller discovery.

## Acceptance Criteria
1. Use descriptive language: "Compatible with Akai APC40" vs "Akai APC40 Integration"
2. Add trademark disclaimer in UI and documentation: "Third-party product names used for compatibility identification only. Not affiliated with or endorsed by [manufacturer]."
3. Create controller detection UI that highlights "detected hardware" without over-emphasizing brands
4. Design "Community Contributed" vs "Official Support" badges for controller profiles
5. Implement "bring your own controller config" option for free tier (advanced users)
6. Legal review checklist document for future controller additions

## Integration Verification
- **IV1**: All controller references use compatibility language, not ownership/endorsement claims
- **IV2**: UI clearly distinguishes official profiles from community contributions
- **IV3**: Documentation includes proper trademark acknowledgments and fair use statements

## Tasks / Subtasks

- [ ] **Task 1: Audit Existing Controller References** (AC: 1)
  - [ ] Search codebase for controller brand names (grep for "Akai", "Novation", "Arturia")
  - [ ] Identify UI text, code comments, and documentation using brand names
  - [ ] Replace "Akai APC40" with "Compatible with Akai APC40" in all UI strings
  - [ ] Update documentation to use compatibility language consistently
  - [ ] Create style guide for future controller additions
  - [ ] Add ESLint rule to flag unapproved brand name usage

- [ ] **Task 2: Implement Trademark Disclaimer System** (AC: 2)
  - [ ] Create `TrademarkDisclaimer.tsx` component for footer placement
  - [ ] Design disclaimer text: "Third-party product names used for compatibility identification only. Centaurus is not affiliated with or endorsed by Akai, Novation, Arturia, or other controller manufacturers."
  - [ ] Add disclaimer to main app footer (always visible)
  - [ ] Include disclaimer in controller settings panel
  - [ ] Add disclaimer to documentation (`docs/controllers/README.md`)
  - [ ] Create internationalized versions (i18n) for future localization

- [ ] **Task 3: Design Controller Discovery UI** (AC: 3)
  - [ ] Create `ControllerDiscovery.tsx` component
  - [ ] Design "Detected Hardware" section (emphasize functionality, not brands)
  - [ ] Use neutral language: "8x8 Grid Controller (Launchpad-compatible)"
  - [ ] Implement device icon system (generic controller icons, not branded logos)
  - [ ] Add "Learn More" links to controller setup guides (neutral educational content)
  - [ ] Test discovery UI with multiple controllers connected
  - [ ] Ensure mobile responsive design

- [ ] **Task 4: Create Profile Badge System** (AC: 4)
  - [ ] Design badge visual styles (Official, Community, Beta, Experimental)
  - [ ] Create `ProfileBadge.tsx` component with variants
  - [ ] Implement badge logic in ControllerProfile schema (add `source` field)
  - [ ] Display badges in controller list/selection UI
  - [ ] Add badge tooltips explaining provenance (e.g., "Official: Tested and maintained by Centaurus team")
  - [ ] Create badge documentation for community contributors

- [ ] **Task 5: Implement BYOC (Bring Your Own Controller Config)** (AC: 5)
  - [ ] Design `CustomControllerImporter.tsx` component
  - [ ] Create JSON file format specification for custom controller profiles
  - [ ] Implement file upload/import UI (drag-and-drop + file picker)
  - [ ] Add profile validation and error messaging
  - [ ] Create export functionality for sharing custom profiles
  - [ ] Build profile editor UI (advanced users can map MIDI messages manually)
  - [ ] Add examples: `docs/controllers/custom-profile-examples/`
  - [ ] Test with intentionally malformed profiles (validation robustness)

- [ ] **Task 6: Create Legal Review Checklist Document** (AC: 6)
  - [ ] Create `docs/legal/controller-addition-checklist.md`
  - [ ] Checklist items:
    - [ ] Does controller name use compatibility language?
    - [ ] Is trademark disclaimer visible in relevant UI?
    - [ ] Are manufacturer logos avoided (use generic icons)?
    - [ ] Is documentation clear about non-affiliation?
    - [ ] Does profile qualify as fair use (compatibility/interoperability)?
    - [ ] Has competitive analysis been done (prior art check)?
  - [ ] Add legal contact info for escalation if C&D received
  - [ ] Document response plan for trademark claims

- [ ] **Task 7: Trademark Fair Use Research & Documentation** (IV: 1)
  - [ ] Research trademark fair use doctrine (compatibility/descriptive use)
  - [ ] Document legal precedents (Ableton, Bitwig, VCV Rack controller support)
  - [ ] Create `docs/legal/trademark-fair-use.md` with case law citations
  - [ ] Consult IP attorney if available (recommended but not required)
  - [ ] Document safe harbor practices for controller naming
  - [ ] Add risk assessment framework (low/medium/high risk per controller)

- [ ] **Task 8: UI Consistency Audit** (IV: 2)
  - [ ] Verify all controller UI shows appropriate badges (Official/Community)
  - [ ] Test badge visibility across all themes (light/dark mode)
  - [ ] Ensure consistency between controller list, settings, and discovery UI
  - [ ] Check badge accessibility (screen reader compatibility)
  - [ ] Validate badge behavior when new community profiles imported

- [ ] **Task 9: Documentation Compliance Review** (IV: 3)
  - [ ] Audit all documentation for trademark compliance
  - [ ] Add trademark acknowledgments to:
    - [ ] README.md
    - [ ] docs/controllers/*.md
    - [ ] User manual / help center articles
  - [ ] Include fair use statement: "Controller names used for compatibility reference only"
  - [ ] Add manufacturer attribution where appropriate
  - [ ] Create glossary defining terms (compatibility vs endorsement)

## Dev Notes

### Relevant Architecture Context

**Legal Risk Mitigation Strategy**:
- **Primary Defense**: Trademark fair use doctrine (descriptive/compatibility use)
- **Secondary Defense**: Separate open-source library isolates liability
- **Tertiary Defense**: Clear disclaimers and non-affiliation statements

**Trademark Fair Use Doctrine** (U.S. Law):
- **Nominative Fair Use**: Can use trademark to refer to trademark holder's product when:
  1. Product cannot be readily identified without using the trademark
  2. Only so much of the mark is used as reasonably necessary
  3. Use does not suggest sponsorship or endorsement
- **Our Application**: Meets all three criteria for controller compatibility

**Industry Precedent**:
- **Ableton Live**: Lists 100+ controllers by manufacturer name
- **Bitwig Studio**: "Controller Scripts" page uses brand names
- **VCV Rack**: Community hardware modules reference manufacturers
- **Cycling 74 Max/MSP**: External objects use controller brand names
- **Conclusion**: Well-established pattern in music software industry

**Design Philosophy**:
- **Functional Emphasis**: Focus on what controller does, not brand prestige
- **Educational Tone**: Position as compatibility information, not marketing
- **User Empowerment**: BYOC feature gives advanced users full control

### Source Tree Context

```
src/
├── components/
│   ├── hardware/
│   │   ├── ControllerDiscovery.tsx     # NEW - This story
│   │   ├── ProfileBadge.tsx            # NEW - This story
│   │   ├── CustomControllerImporter.tsx # NEW - This story
│   │   └── TrademarkDisclaimer.tsx     # NEW - This story
│   └── layout/
│       └── Footer.tsx                  # UPDATE - Add disclaimer
├── types/
│   └── ControllerProfile.ts            # UPDATE - Add source field
└── utils/
    └── profileValidator.ts             # NEW - Validate custom profiles

docs/
├── legal/
│   ├── controller-addition-checklist.md  # NEW - This story
│   └── trademark-fair-use.md            # NEW - This story
└── controllers/
    ├── README.md                        # UPDATE - Add disclaimers
    └── custom-profile-examples/         # NEW - This story
        ├── example-simple-controller.json
        └── example-grid-controller.json
```

### UI/UX Considerations

**Controller Discovery Screen**:
```
┌─────────────────────────────────────────────────────────────┐
│ Hardware Controllers                                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 🎛️ Detected Hardware:                                       │
│                                                             │
│ ┌──────────────────────────────────────────────┐           │
│ │ 8x8 Grid Controller                          │ Official  │
│ │ Compatible with Novation Launchpad Mini MK3  │           │
│ │ [Setup Guide] [Settings]                     │           │
│ └──────────────────────────────────────────────┘           │
│                                                             │
│ ┌──────────────────────────────────────────────┐           │
│ │ 16-Pad Drum Controller                       │Community  │
│ │ Compatible with Akai MPD218                  │           │
│ │ [Setup Guide] [Settings]                     │           │
│ └──────────────────────────────────────────────┘           │
│                                                             │
│ [+ Import Custom Profile]                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**Badge Design**:
- **Official**: Green badge, checkmark icon, "Tested by Centaurus"
- **Community**: Blue badge, users icon, "Community Contributed"
- **Beta**: Orange badge, warning icon, "Experimental Support"
- **Custom**: Purple badge, wrench icon, "Custom Configuration"

**Trademark Disclaimer (Footer)**:
```
Third-party product names used for compatibility identification only.
Not affiliated with or endorsed by Akai, Novation, Arturia, or other
controller manufacturers. [Learn More]
```

### Key Design Decisions

**Language Strategy**: Use "Compatible with [Brand Model]" instead of "[Brand Model] Support". Emphasizes compatibility, not ownership.

**Badge System**: Visual indicator of profile provenance builds trust. Users know what's officially tested vs community-contributed.

**BYOC Feature**: Advanced users can create/import profiles. Demonstrates good faith (not locking down to paid-only controllers).

**Documentation Approach**: Educational tone. Explain compatibility, show setup guides, avoid marketing language.

**Risk Tolerance**: Low-medium risk. Industry precedent supports our approach. Disclaimers provide additional protection.

### Testing

**Unit Tests** (`tests/ui/trademark-compliance.test.ts`):
- Validate no unapproved brand usage in UI strings
- Test disclaimer component renders correctly
- Verify badge logic assigns correct badge types
- Test custom profile validation

**Integration Tests** (`tests/integration/legal-compliance.test.ts`):
- Audit all rendered UI for trademark compliance
- Verify disclaimers visible on all relevant pages
- Test BYOC import flow with various profiles
- Check badge consistency across UI

**Manual Testing**:
- Legal team review of all UI text
- Screenshot audit of controller-related screens
- Documentation compliance review

**Testing Standards**:
- Automated text scanning for unapproved brand usage
- Visual regression testing for disclaimer visibility
- Accessibility audit for badge/disclaimer components

### Legal Resources

**Recommended Reading**:
- McCarthy on Trademarks (legal treatise)
- Trademark Fair Use: Nominative and Descriptive
- "New Kids on the Block" case (nominative fair use precedent)
- Lanham Act Section 43(a) (false endorsement)

**If Cease & Desist Received**:
1. Do not panic - C&D is standard opening negotiation
2. Consult IP attorney immediately
3. Document all controller name usage (show fair use)
4. Prepare counter-response citing fair use doctrine
5. Be willing to adjust language if reasonable (maintain functionality)
6. Most C&Ds are resolved through minor wording changes

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-10 | 1.0 | Initial story creation | Sarah (PO) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_
