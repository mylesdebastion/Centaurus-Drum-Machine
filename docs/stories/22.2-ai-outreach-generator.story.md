# Story 22.2: AI Outreach Message Generator

**Epic**: 22 - AI-Native Product-Led Growth Flywheel
**Status**: 📋 Draft
**Priority**: 🔴 Critical (Week 1)
**Estimated Effort**: 1-2 hours
**Owner**: Solo Dev

---

## Story

As a **solo dev doing targeted outreach**,
I want **AI to generate personalized messages with custom onboarding URLs in 2 minutes**,
So that **I can focus on relationships instead of spending 30 minutes crafting each message**.

---

## Context

**Problem**: Manual outreach takes too long. Writing a personalized message to Scarlet Watters (TikTok influencer) that references her work, explains Audiolux relevance, and includes the right onboarding link takes 30+ minutes per person.

**Solution**: Build CLI tool using Claude API that:
1. Takes target info as input (name, platform, bio, recent content, persona)
2. Generates 3 message variations (friendly, professional, brief)
3. Includes custom onboarding URL with discrete codes (`?v=c&r=sc4t`)
4. Outputs in <2 minutes

**Time Savings**: 30 min/message → 2 min/message = **15x faster**

**Reference**: Epic 22, AI-native outreach strategy

---

## Acceptance Criteria

### Must-Have

- [ ] **Python CLI tool** (`tools/outreach_generator.py`):
  - Takes target info via JSON input or interactive prompt
  - Uses Claude API (Sonnet 3.5) to generate messages
  - Outputs 3 message variations (different tones)
  - Includes custom URL with persona code + referral code

- [ ] **3 Message Variations Generated**:
  - **Friendly**: Conversational, warm, personal
  - **Professional**: Formal, brief, to-the-point
  - **Brief**: <100 words, direct ask

- [ ] **Personalization Requirements**:
  - References target's specific work (post, video, bio)
  - Explains why Audiolux is relevant to THEM
  - Includes value prop (free tool, Pro access, etc.)
  - NOT generic/spammy

- [ ] **Custom URL Generation**:
  - Uses persona codes from Story 22.1 (`?v=d/e/v/p/c`)
  - Generates referral code (`&r=sc4t`)
  - Example: `jam.audiolux.app?v=c&r=sc4t` for Scarlet Watters

- [ ] **Top 10 Relationship Templates**:
  - Pre-filled JSON for each Top 10 target
  - Sean Forbes, Scarlet Watters, Drake Music, etc.
  - Can be used as-is or tweaked

### Nice-to-Have

- [ ] Interactive CLI mode (prompts for input instead of JSON)
- [ ] Save output to file (`outreach/scarlet-watters.md`)
- [ ] Track which messages were sent (simple CSV log)
- [ ] Web UI version (Flask app for non-technical use)

---

## Input Format

**JSON Input Example** (file or stdin):

```json
{
  "name": "Scarlet Watters",
  "platform": "TikTok",
  "bio": "4.4M followers, Deaf content creator, ASL educator",
  "recent_content": "Posted video about teaching music to Deaf kids using visual methods",
  "persona": "creator",
  "offer": "Free Pro account + custom URL (scarlet.audiolux.app)"
}
```

**Interactive Mode Example**:

```bash
$ python tools/outreach_generator.py

=== Audiolux Outreach Generator ===

Target name: Scarlet Watters
Platform (TikTok/Instagram/Email/Reddit): TikTok
Short bio: 4.4M followers, Deaf content creator, ASL educator
Recent content/post: Video about teaching music to Deaf kids
Persona (d/e/v/p/c): c
Special offer (optional): Free Pro account

Generating messages...
```

---

## Output Format

**Example Output** (printed to console + saved to file):

```markdown
=== Outreach Messages for Scarlet Watters ===
Platform: TikTok
Persona: Creator (c)
Custom URL: jam.audiolux.app?v=c&r=sc4t

---

OPTION 1 (Friendly)
---
Hey Scarlet! 👋

I loved your recent video about teaching music to Deaf kids using visual methods -
the way you visualize rhythm with movement is brilliant.

I built a tool that might interest you: Audiolux, a browser-based DAW designed
specifically for Deaf musicians and educators. It uses color-coded notes and visual
patterns (no hearing required).

Here's a personalized 30-second walkthrough made for content creators like you:
jam.audiolux.app?v=c&r=sc4t

Would love to get your thoughts! Happy to offer you free Pro access + a custom URL
(scarlet.audiolux.app) if it's useful for your work.

---

OPTION 2 (Professional)
---
Hi Scarlet,

I'm reaching out because I saw your work teaching music to Deaf students via TikTok,
and I think Audiolux could be valuable for your community.

Audiolux is a visual music production tool (browser-based, zero install) designed
specifically for Deaf/HOH musicians. Key features:
• Color-coded notes and visual music theory
• Real-time collaboration via shared links
• Accessible to 4.4M+ followers in your community

Here's a personalized demo for educators/creators:
jam.audiolux.app?v=c&r=sc4t

I'd love to offer you free Pro access and a custom URL if you're interested in
trying it with your audience.

Would you be open to a quick test?

---

OPTION 3 (Brief)
---
Scarlet - built a visual DAW for Deaf musicians after seeing your work with ASL
students. Thought you might be interested:

jam.audiolux.app?v=c&r=sc4t

30-second tour, no signup. Free Pro + custom URL (scarlet.audiolux.app) if you
want to share with your 4.4M followers.

Interested?

---

=== Saved to: outreach/scarlet-watters-2025-10-25.md ===
```

---

## Technical Implementation

### Dependencies

```bash
pip install anthropic python-dotenv
```

**Environment Variables** (`.env`):
```env
ANTHROPIC_API_KEY=sk-ant-xxxxx
```

---

### Implementation: outreach_generator.py

```python
#!/usr/bin/env python3
"""
Audiolux AI Outreach Message Generator

Generates personalized outreach messages using Claude API.
Usage:
  python tools/outreach_generator.py targets/scarlet-watters.json
  python tools/outreach_generator.py --interactive
"""

import os
import json
import argparse
from datetime import datetime
from dotenv import load_dotenv
import anthropic

load_dotenv()

# Persona code mapping (from Story 22.1)
PERSONA_CODES = {
    'deaf-musician': 'd',
    'educator': 'e',
    'visual-learner': 'v',
    'producer': 'p',
    'creator': 'c'
}

def generate_ref_code(name: str) -> str:
    """
    Generate discrete referral code from name.
    Format: first 2 chars + 2-char hash

    Examples:
      'Scarlet Watters' → 'sc4t'
      'Sean Forbes' → 'se8a'
    """
    cleaned = ''.join(c for c in name.lower() if c.isalpha())
    first_two = cleaned[:2]

    # Simple hash
    hash_val = 0
    for char in name:
        hash_val = ((hash_val << 5) - hash_val) + ord(char)
        hash_val = hash_val & 0xFFFFFFFF  # 32-bit

    hash_str = format(abs(hash_val), 'x')[:2]
    return first_two + hash_str


def generate_custom_url(persona: str, name: str) -> str:
    """Generate custom onboarding URL with discrete codes."""
    persona_code = PERSONA_CODES.get(persona, 'v')  # Default to visual-learner
    ref_code = generate_ref_code(name)
    return f"jam.audiolux.app?v={persona_code}&r={ref_code}"


def generate_outreach_messages(target_info: dict) -> str:
    """
    Generate 3 personalized outreach message variations using Claude.

    Args:
        target_info: Dict with keys:
            - name: Target person's name
            - platform: TikTok, Instagram, Email, Reddit, etc.
            - bio: Short bio/description
            - recent_content: Recent post/activity
            - persona: deaf-musician, educator, visual-learner, producer, creator
            - offer: Optional special offer (e.g., "Free Pro account")

    Returns:
        String containing 3 message variations
    """
    client = anthropic.Anthropic(api_key=os.getenv('ANTHROPIC_API_KEY'))

    custom_url = generate_custom_url(target_info['persona'], target_info['name'])

    prompt = f"""You are writing a personalized outreach message for Audiolux, a visual browser-based DAW for Deaf musicians and educators.

Target Information:
- Name: {target_info['name']}
- Platform: {target_info['platform']}
- Bio: {target_info['bio']}
- Recent activity: {target_info['recent_content']}
- Persona: {target_info['persona']}

Product: Audiolux
- Visual, browser-based DAW (digital audio workstation)
- Designed for Deaf/HOH musicians and visual learners
- Color-coded notes, real-time collaboration
- No software install, works in browser
- Free tier available

Custom onboarding URL: {custom_url}
(This is a personalized demo - don't explain the URL params, just use it)

Special offer (if applicable): {target_info.get('offer', 'None')}

Task:
Generate 3 outreach message variations for {target_info['platform']}:

1. FRIENDLY (warm, conversational, personal)
   - Reference their specific work/content
   - Explain why Audiolux is relevant to them
   - Include custom URL
   - 150-200 words

2. PROFESSIONAL (formal, concise, value-focused)
   - Brief intro
   - Bullet points of key features
   - Clear ask/CTA
   - Include custom URL
   - 100-150 words

3. BRIEF (direct, <100 words)
   - One sentence context
   - Custom URL
   - Quick offer
   - Direct question

Requirements:
- MUST reference their specific work (show you're not spamming)
- MUST explain why Audiolux is relevant to THEM specifically
- MUST include the custom URL: {custom_url}
- MUST be genuine, not salesy
- MUST respect their time (no long essays)

Platform-specific notes:
- TikTok/Instagram DM: Casual, emoji okay
- Email: Professional, structured
- Reddit DM: Genuine, no marketing speak

Output format:
---
OPTION 1 (Friendly)
---
[message here]

---
OPTION 2 (Professional)
---
[message here]

---
OPTION 3 (Brief)
---
[message here]
"""

    message = client.messages.create(
        model="claude-3-5-sonnet-20241022",
        max_tokens=1500,
        messages=[{"role": "user", "content": prompt}]
    )

    return message.content[0].text


def save_output(target_name: str, output: str, custom_url: str, platform: str, persona: str) -> str:
    """Save generated messages to file."""
    # Create outreach directory if it doesn't exist
    os.makedirs('outreach', exist_ok=True)

    # Generate filename
    date_str = datetime.now().strftime('%Y-%m-%d')
    safe_name = target_name.lower().replace(' ', '-')
    filename = f"outreach/{safe_name}-{date_str}.md"

    # Prepare full output
    full_output = f"""# Outreach Messages for {target_name}

**Platform**: {platform}
**Persona**: {persona}
**Custom URL**: {custom_url}
**Generated**: {datetime.now().strftime('%Y-%m-%d %H:%M')}

---

{output}
"""

    with open(filename, 'w', encoding='utf-8') as f:
        f.write(full_output)

    return filename


def interactive_mode():
    """Interactive CLI mode for generating outreach."""
    print("\n=== Audiolux Outreach Generator ===\n")

    target_info = {
        'name': input("Target name: "),
        'platform': input("Platform (TikTok/Instagram/Email/Reddit): "),
        'bio': input("Short bio: "),
        'recent_content': input("Recent content/post: "),
        'persona': input("Persona (d=deaf-musician, e=educator, v=visual-learner, p=producer, c=creator): "),
        'offer': input("Special offer (optional, press Enter to skip): ")
    }

    # Map single-letter persona codes to full names
    persona_map = {
        'd': 'deaf-musician',
        'e': 'educator',
        'v': 'visual-learner',
        'p': 'producer',
        'c': 'creator'
    }

    if target_info['persona'] in persona_map:
        target_info['persona'] = persona_map[target_info['persona']]

    print("\n⏳ Generating personalized messages using Claude API...\n")

    return target_info


def main():
    parser = argparse.ArgumentParser(description='Generate personalized outreach messages')
    parser.add_argument('input_file', nargs='?', help='JSON file with target info')
    parser.add_argument('--interactive', '-i', action='store_true', help='Interactive mode')

    args = parser.parse_args()

    if args.interactive or not args.input_file:
        target_info = interactive_mode()
    else:
        with open(args.input_file, 'r') as f:
            target_info = json.load(f)

    # Generate messages
    try:
        output = generate_outreach_messages(target_info)
        custom_url = generate_custom_url(target_info['persona'], target_info['name'])

        # Print to console
        print("=" * 60)
        print(f"Outreach Messages for {target_info['name']}")
        print(f"Platform: {target_info['platform']}")
        print(f"Custom URL: {custom_url}")
        print("=" * 60)
        print(output)
        print("=" * 60)

        # Save to file
        filename = save_output(
            target_info['name'],
            output,
            custom_url,
            target_info['platform'],
            target_info['persona']
        )

        print(f"\n✅ Saved to: {filename}")

    except Exception as e:
        print(f"\n❌ Error: {e}")
        return 1

    return 0


if __name__ == '__main__':
    exit(main())
```

---

### Pre-filled Templates for Top 10 Relationships

**File**: `tools/targets/sean-forbes.json`

```json
{
  "name": "Sean Forbes",
  "platform": "Email",
  "bio": "Deaf rapper, founder of D-PAN (Deaf Professional Arts Network), 59K followers",
  "recent_content": "D-PAN creates accessible music content and advocates for Deaf musicians",
  "persona": "educator",
  "offer": "Free Pro account for D-PAN community members"
}
```

**File**: `tools/targets/scarlet-watters.json`

```json
{
  "name": "Scarlet Watters",
  "platform": "TikTok",
  "bio": "4.4M followers, Deaf content creator, ASL educator",
  "recent_content": "Posted video about teaching music to Deaf kids using visual methods",
  "persona": "creator",
  "offer": "Free Pro account + custom URL (scarlet.audiolux.app)"
}
```

**File**: `tools/targets/drake-music.json`

```json
{
  "name": "Drake Music DMLab",
  "platform": "Email",
  "bio": "Digital music instrument making workshops for disabled musicians",
  "recent_content": "Community sessions for accessible music creation",
  "persona": "educator",
  "offer": "Partnership opportunity - free classroom access"
}
```

---

## Usage Examples

### Generate for Scarlet Watters (JSON file)

```bash
$ python tools/outreach_generator.py tools/targets/scarlet-watters.json

⏳ Generating personalized messages using Claude API...

============================================================
Outreach Messages for Scarlet Watters
Platform: TikTok
Custom URL: jam.audiolux.app?v=c&r=sc4t
============================================================

[3 message variations printed here]

✅ Saved to: outreach/scarlet-watters-2025-10-25.md
```

### Generate Interactively

```bash
$ python tools/outreach_generator.py --interactive

=== Audiolux Outreach Generator ===

Target name: Sarah Johnson
Platform (TikTok/Instagram/Email/Reddit): Email
Short bio: Music teacher at Gallaudet University
Recent content/post: Teaching visual music theory to Deaf students
Persona (d/e/v/p/c): e
Special offer (optional, press Enter to skip): Free classroom license pilot

⏳ Generating personalized messages using Claude API...

[Messages generated...]
```

### Batch Generate for All Top 10

```bash
#!/bin/bash
# tools/generate_all_top10.sh

for target in tools/targets/*.json; do
  echo "Generating for: $target"
  python tools/outreach_generator.py "$target"
  echo ""
done

echo "✅ All outreach messages generated in outreach/ folder"
```

---

## Validation & Testing

### Manual Testing Checklist

- [ ] Run interactive mode: `python tools/outreach_generator.py -i`
- [ ] Generate for Scarlet Watters: `python tools/outreach_generator.py tools/targets/scarlet-watters.json`
- [ ] Verify 3 variations are different tones (friendly, professional, brief)
- [ ] Verify custom URL matches persona code: `?v=c` for creator
- [ ] Verify referral code generated: `&r=sc4t`
- [ ] Verify message references specific work (not generic)
- [ ] Verify output saved to `outreach/scarlet-watters-YYYY-MM-DD.md`
- [ ] Test with invalid persona code (should default to 'v')

### Quality Checks

**Good outreach message** (checklist):
- ✅ References target's specific work/content
- ✅ Explains why Audiolux is relevant to them
- ✅ Includes value prop (what's in it for them)
- ✅ NOT generic/spammy ("Hi, try my app")
- ✅ Respects their time (<200 words max)
- ✅ Clear CTA (click link, reply, etc.)

**Bad outreach message** (red flags):
- ❌ "Hi, I built an app..."
- ❌ Generic copy-paste text
- ❌ Long essay (>300 words)
- ❌ No mention of their work
- ❌ Pushy sales language

---

## Success Metrics

**Primary KPIs** (Week 2):
- ✅ Generate outreach for all Top 10 relationships
- ✅ <2 minutes per message (vs. 30 min manual)
- ✅ 80%+ messages pass quality checklist

**Secondary KPIs** (Week 4):
- ✅ 30%+ response rate (3/10 targets reply)
- ✅ 1+ advocate conversion (Sean Forbes, Scarlet, etc.)
- ✅ 10+ users from outreach-driven traffic

---

## Dependencies

**Blockers**: None

**Required**:
- Claude API key (Anthropic account)
- Python 3.8+
- `anthropic` Python library
- `.env` file with API key

**Optional**:
- JSON templates for Top 10 targets (saves time)

---

## Risks & Mitigation

### Risk 1: Claude API Costs Too High
**Impact**: $5-10 per 100 messages
**Mitigation**:
- Use Sonnet 3.5 (cheaper than Opus)
- Only generate for high-value targets (Top 10 first)
- Cache outputs (don't regenerate for same target)

### Risk 2: Generated Messages Too Generic
**Impact**: Low response rate, feels spammy
**Mitigation**:
- Manually review first 5 outputs
- Refine prompt if too generic
- Add target-specific details to JSON input

### Risk 3: Referral Codes Collide
**Impact**: Two people get same `&r=` code
**Likelihood**: Very low (hash-based)
**Mitigation**: Add timestamp to hash if needed

---

## Definition of Done

- [ ] All acceptance criteria met
- [ ] Python script runs without errors
- [ ] 3 message variations generated (different tones)
- [ ] Custom URLs include persona + referral codes
- [ ] Output saved to `outreach/*.md` files
- [ ] Top 10 JSON templates created
- [ ] Manual testing checklist completed
- [ ] Quality check passed (messages not generic)
- [ ] Documentation added to README
- [ ] Story marked as "Review" status

---

## Dev Agent Record

### Agent Model Used
[To be filled by dev agent]

### Completion Notes
[To be filled by dev agent]

### File List
```
tools/
  outreach_generator.py
  targets/
    sean-forbes.json
    scarlet-watters.json
    drake-music.json
    [... 7 more JSON files for Top 10]
  generate_all_top10.sh

outreach/
  [Generated .md files saved here]
```

### Change Log
[To be filled by dev agent]

### Debug Log References
[To be filled by dev agent]

---

## Related Stories

- **Story 22.1**: Multi-Path Onboarding (provides persona codes used in URLs)
- **Story 22.3**: Referral Attribution (tracks `&r=` codes from outreach)
- **Story 22.4**: Viral Loop Triggers (users from outreach will trigger share prompts)

---

## Document Version

**Version**: 1.0
**Created**: 2025-10-25
**Last Updated**: 2025-10-25
**Status**: 📋 **Draft - Ready for Development**
